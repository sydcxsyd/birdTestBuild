window.__require=function t(e,n,o){function r(a,c){if(!n[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){return r(e[a][1][t]||t)},u,u.exports,t,e,n,o)}return n[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<o.length;a++)r(o[a]);return r}({Action:[function(t,e,n){"use strict";cc._RF.push(e,"0d24eys8NlI8oGuoOwTr03L","Action");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a,c=t("../common/GlobalInferfance"),s=cc._decorator,l=s.ccclass;s.property,function(t){t[t.ACT_FLY=1]="ACT_FLY",t[t.ACT_FULL=2]="ACT_FULL",t[t.ACT_STAND=3]="ACT_STAND",t[t.ACT_Stand_2=4]="ACT_Stand_2",t[t.ACT_SELECT=5]="ACT_SELECT"}(a||(a={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ACT_FLY="fly",e.ACT_FULL="grounding",e.ACT_STAND="idle_1",e.ACT_Stand_2="idle_2",e.ACT_SELECT="idle_select",e.SPEED=700,e.JUMP_SPEED=1e3,e.act_time=8,e.flyBoo=!1,e.currentFlyTween=null,e.currentJumpTween=null,e.pollindex="",e.clickFocusBoo=!1,e.act_state="",e}return r(e,t),e.prototype.start=function(){this.ske=this.node.getComponent(sp.Skeleton)},e.harkEff=function(t){var e="";switch(Number(t)){case 1:e=c.AudioEnum.hark2;break;case 2:e=c.AudioEnum.hark3;break;case 4:e=c.AudioEnum.hark8;break;case 3:e=c.AudioEnum.hark10;break;case 5:e=c.AudioEnum.hark7;break;case 6:e=c.AudioEnum.hark6;break;case 7:e=c.AudioEnum.hark1;break;case 8:e=c.AudioEnum.hark5;break;case 9:e=c.AudioEnum.hark9;break;case 10:e=c.AudioEnum.hark4}return e},e.prototype.rebackNormal=function(){this.clickFocusBoo=!1,this.runAct(0,this.ACT_STAND,!0),this.unschedule(this.idleAct),this.schedule(this.idleAct,this.act_time)},e.prototype.idleAct=function(){var t=this;this.ske&&this.ske.setCompleteListener(function(e){e.timeScale=0,(e.animation?e.animation.name:"")==t.ACT_STAND&&t.scheduleOnce(function(){e.timeScale=1,e.animationStart=1,e.animationEnd=28,t.runAct(0,t.ACT_Stand_2,!1),t.ske.setCompleteListener(function(e){e.timeScale=0,(e.animation?e.animation.name:"")===t.ACT_Stand_2&&t.scheduleOnce(function(){e.timeScale=1,e.animationStart=1,e.animationEnd=28,t.runAct(0,t.ACT_STAND,!0)})})})})},e.prototype.setFocus=function(){if(this.clickFocusBoo=!0,!this.flyBoo){this.runAct(0,this.ACT_SELECT,!0,[]),cc.Tween.stopAllByTarget(this.node);var t=cc.tween().to(.1,{scaleY:this.node.scaleY+.2}).to(.1,{scaleY:this.node.scaleY});cc.tween(this.node).then(t).start(),this.unschedule(this.idleAct)}},Object.defineProperty(e.prototype,"isStatic",{get:function(){return!this.flyBoo},enumerable:!1,configurable:!0}),e.prototype.changeStand=function(){this.runAct(0,this.ACT_STAND,!0)},e.prototype.runAct=function(t,e,n,o,r){void 0===o&&(o=[]),void 0===r&&(r=1),this.act_state!=e&&this.ske&&(this.act_state=e,this.ske.timeScale=r,this.ske.setAnimation(t,e,n))},e.prototype.animationGo=function(t,e,n,o,r,i){void 0===i&&(i=1),this.execMove(n,o,r,i)},e.prototype.execMove=function(t,e,n,o,r){var i=this;void 0===o&&(o=1),void 0===r&&(r=this.SPEED),this.currentFlyTween&&(this.flyBoo=!1,this.currentFlyTween.stop(),this.currentFlyTween=null),this.flyBoo=!0,this.runAct(0,this.ACT_FLY,!0,[a.ACT_STAND]);var c=e.sub(t).mag()/r;this.flyTrackEntry&&(this.flyTrackEntry.timeScale=1),this.currentFlyTween=cc.tween(this.node).then(cc.tween().to(c,{x:e.x,y:e.y},{easing:"sineOut"})).call(function(){i.node.scaleX*=o,i.runAct(0,i.ACT_FULL,!1,[a.ACT_FLY]),i.ske&&(n(),i.flyBoo=!1,i.ske.setCompleteListener(function(t){i.flyTrackEntry=t,t.timeScale=0,(t.animation?t.animation.name:"")===i.ACT_FULL&&i.scheduleOnce(function(){i.flyTrackEntry=null,t.timeScale=1,t.animationStart=1,t.animationEnd=28,i.clickFocusBoo?i.runAct(0,i.ACT_SELECT,!0,[a.ACT_FULL]):(i.runAct(0,i.ACT_STAND,!0,[a.ACT_FULL]),i.schedule(i.idleAct,i.act_time))})}))}).start()},i([l],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../common/GlobalInferfance":"GlobalInferfance"}],AdsCenter:[function(t,e,n){"use strict";cc._RF.push(e,"43692GGoYJGcalx2+sB0fkg","AdsCenter");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../base/BaseInst"),c=t("../common/AppData"),s=t("../otherOffer/OtherNoAdTip"),l=cc._decorator,u=l.ccclass,d=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bannerEntity=null,e.excitationEntity=null,e.showExcitationBoo=!1,e.fullScreenEntity=null,e.gridEntity=null,e.adsCd=3e4,e.startTime=0,e.showWay=0,e}return r(e,t),e.getInstance=function(){return t.getInstance.call(this)},e.prototype.preloadBanner=function(){var t=this;if(cc.sys.platform==cc.sys.WECHAT_GAME||window.wx){var e=window.wx.getSystemInfoSync();this.bannerEntity=window.wx.createBannerAd({adUnitId:"adunit-6303b62db7c37bd5",adIntervals:30,style:{left:(e.screenWidth-300)/2,top:e.screenHeight/6*5,width:300}}),this.bannerEntity.onResize(function(){t.bannerEntity.style.top=e.screenHeight/6*5,t.bannerEntity.style.width=300,t.bannerEntity.style.left=(e.screenWidth-300)/2}),this.bannerEntity.onError(function(t){console.log(t)})}},e.prototype.showBanner=function(){(cc.sys.platform==cc.sys.WECHAT_GAME||window.wx)&&(c.default.birdLev<3||(this.bannerEntity?this.bannerEntity.show():this.preloadBanner()))},e.prototype.hideBanner=function(){(cc.sys.platform==cc.sys.WECHAT_GAME||window.wx)&&(c.default.birdLev<3||(this.bannerEntity?this.bannerEntity.hide():this.preloadBanner()))},e.prototype.preloadExcitation=function(){var t=this;(cc.sys.platform==cc.sys.WECHAT_GAME||window.wx)&&(this.excitationEntity=window.wx.createRewardedVideoAd({adUnitId:"adunit-e39820c6e30083e3"}),this.excitationEntity.onError(function(t){console.log("this.videoAd.onError"+t)}),this.excitationEntity.onClose(function(e){t.showExcitationBoo=!1,e&&e.isEnded||void 0===e?(t.excitation_cb&&t.excitation_arg&&t.excitation_cb.call(t.excitation_arg,1),t.excitationEntity.onLoad(function(){})):(t.excitation_cb&&t.excitation_arg&&t.excitation_cb.call(t.excitation_arg,0),t.excitationEntity.onLoad(function(){}))}),this.excitationEntity.onLoad(function(){}))},e.prototype.showExcitation=function(t,e){var n=this;(cc.sys.platform==cc.sys.WECHAT_GAME||window.wx)&&(this.showExcitationBoo||c.default.birdLev<5||(this.excitation_cb=t,this.excitation_arg=e,this.excitationEntity?(this.showExcitationBoo=!0,this.excitationEntity.show().catch(function(){n.showExcitationBoo=!1,cc.find("tipNode").getComponent(s.default).showNoView(),t&&e&&t.call(e,0)}).then(function(){n.showExcitationBoo=!1,console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")})):(cc.find("tipNode").getComponent(s.default).showNoView(),this.preloadExcitation())))},e.prototype.preloadFullScreen=function(){var t=this;(cc.sys.platform==cc.sys.WECHAT_GAME||window.wx)&&(this.fullScreenEntity||(this.fullScreenEntity=window.wx.createInterstitialAd({adUnitId:"adunit-3fd8377cb9a8c2cb"}),this.fullScreenEntity.onClose(function(){1==t.showWay&&t.showGrid()})),this.fullScreenEntity.onLoad(function(){}))},e.prototype.showFullScreen=function(t){(cc.sys.platform==cc.sys.WECHAT_GAME||window.wx)&&(c.default.birdLev<3||(new Date).getTime()-this.startTime<this.adsCd||(this.startTime=(new Date).getTime(),this.showWay=t,this.fullScreenEntity?(this.fullScreenEntity.show(),this.fullScreenEntity.load()):this.preloadFullScreen()))},e.prototype.preloadGrid=function(){if(cc.sys.platform==cc.sys.WECHAT_GAME||window.wx){if(!this.gridEntity){var t=window.wx.getSystemInfoSync();this.gridEntity=window.wx.createCustomAd({adUnitId:"adunit-f2c73ccfe1ed80b3",style:{top:t.screenHeight/6*1.2,fixed:!0}})}this.gridEntity.onLoad(function(){})}},e.prototype.showGrid=function(){(cc.sys.platform==cc.sys.WECHAT_GAME||window.wx)&&(c.default.birdLev<=6||(this.gridEntity?this.gridEntity.show():this.preloadGrid()))},e.prototype.hideGrid=function(){(cc.sys.platform==cc.sys.WECHAT_GAME||window.wx)&&(c.default.birdLev<=6||(this.gridEntity?this.gridEntity.hide():this.preloadGrid()))},i([u],e)}(a.BaseInst));n.default=d,cc._RF.pop()},{"../base/BaseInst":"BaseInst","../common/AppData":"AppData","../otherOffer/OtherNoAdTip":"OtherNoAdTip"}],AniPool:[function(t,e,n){"use strict";cc._RF.push(e,"e4068R61AZBKalERVMpV6VR","AniPool");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.createPool=function(t,e,n){if(!this._pools[t]){this._prefabs[t]=e;for(var o=new cc.NodePool,r=0;r<n;r++){var i=cc.instantiate(e);i.name=t,this._birdScale[t]||(this._birdScale[t]=i.scale),o.put(i)}this._pools[t]=o}},e.getFromPool=function(t){var e=this._pools[t],n=null;if(e.size()>0)n=e.get();else if(this._prefabs[t]){var o=cc.instantiate(this._prefabs[t]);e.put(o),n=e.get()}return n},e.putInPool=function(t,e){e.setPosition(cc.v2()),e.scale=this._birdScale[t],e.active=!0;var n=e.getComponent("Action");n.rebackNormal(),n.flyBoo=!1,n.currentFlyTween&&(n.currentFlyTween.stop(),n.currentFlyTween=null),e.stopAllActions(),this._pools[t].put(e)},e.clearAll=function(){for(var t in this._pools)for(var e=this._pools[t],n=0;n<e.length;n++){var o=e[n];o&&o.clear()}this._pools=[],this._prefabs={},this._birdScale={}},e._pools={},e._prefabs={},e._birdScale={},i([c],e)}(cc.Component));n.default=s,cc._RF.pop()},{}],AppData:[function(t,e,n){"use strict";cc._RF.push(e,"f9700H3hOpM6qaqG8petPGQ","AppData");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../base/BaseInst"),c=t("../control/DatalController"),s=cc._decorator,l=s.ccclass,u=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return r(e,t),n=e,e.adReady=function(){return 0==this.adCd},Object.defineProperty(e,"show_guide",{get:function(){return n.birdLev>=1&&n.birdLev<=2},enumerable:!1,configurable:!0}),e.getInstance=function(){return t.getInstance.call(this)},e.prototype.initData=function(){var t=c.default.getInstance().getRecordData();n.AppDataObj=t;var e=c.default.getInstance().getShopData();n.skinShop=e},e.prototype.saveData=function(){n.AppDataObj&&c.default.getInstance().setRecordData(n.AppDataObj)},e.AppDataObj=null,e.userGold=1e5,e.skinShop=null,e.quickGetState=!0,e.CpuState=!0,e.soundOpen=!0,e.musicOpen=!0,e.shakeOpen=!0,e.isAddBranch=!1,e.gameComplete=!1,e.adCd=0,e.readyOk=!1,e.game_step=0,e.addtube=0,e.rollback=0,e.path=[],e.colourReach=[],e.reopenNum=0,e.aniFinish=!0,e.initGuide=null,e.hideNode=!1,e.waitTime=0,e.banner_state=!1,e.level_ids=[],e.startSlideOper=!1,e.gameCom=null,e.passPrompts=[],e.inAppHideTime=0,e.rewardAdLoadState=!1,e.birdLev=1,e.ani_indexs={1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1,10:1},e.cup_skin_index=1,e.bg_index=1,e.dataBuffers=[],e.markBuffers=[],e.bannerTop=1,n=i([l],e)}(a.BaseInst));n.default=u,cc._RF.pop()},{"../base/BaseInst":"BaseInst","../control/DatalController":"DatalController"}],AudioCenter:[function(t,e,n){"use strict";cc._RF.push(e,"555a2O+l65FuJ29RcLjdkKy","AudioCenter");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{s(o.next(t))}catch(e){i(e)}}function c(t){try{s(o.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../base/BaseInst"),l=t("../common/AppData"),u=t("./DatalController"),d=cc._decorator,p=d.ccclass,h=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgPlayBoo=!1,e.cacheList={},e}return r(e,t),e.getInstance=function(){return t.getInstance.call(this)},e.prototype.playBgMusic=function(){return a(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return!l.default.AppDataObj.music_open||this.bgPlayBoo?[2]:(this.bgPlayBoo=!0,[4,this.loadClip("music/bg")]);case 1:return(t=e.sent())?(cc.audioEngine.playMusic(t,!0),[2]):[2]}})})},e.prototype.stopBgMusic=function(){this.bgPlayBoo=!1,cc.audioEngine.stopMusic()},e.prototype.playEffect=function(t){return a(this,void 0,void 0,function(){var e,n;return c(this,function(o){switch(o.label){case 0:return l.default.AppDataObj.sound_open?(e="music/"+t,[4,this.loadClip(e)]):[2];case 1:return(n=o.sent())?(cc.audioEngine.play(n,!1,1),[2]):[2]}})})},e.prototype.preloadFromRemote=function(){var t=this,e=["type_hark_1","type_hark_2","type_hark_3","type_hark_4","type_hark_5","type_hark_6","type_hark_7","type_hark_8","type_hark_9","type_hark_10","bg","gamewin"];u.default.getInstance().getBundle("remote_ass",function(n){for(var o=function(o){var r="music/"+e[o];n.load(r,cc.AudioClip,function(e,n){t.cacheList[r]=n})},r=0;r<=e.length;r++)o(r)},this)},e.prototype.loadClip=function(t){return a(this,void 0,void 0,function(){return c(this,function(){return[2,new Promise(function(e){u.default.getInstance().getBundle("remote_ass",function(n){n.load(t,cc.AudioClip,function(t,n){e(t?null:n)})},this)})]})})},i([p],e)}(s.BaseInst));n.default=h,cc._RF.pop()},{"../base/BaseInst":"BaseInst","../common/AppData":"AppData","./DatalController":"DatalController"}],BaseInst:[function(t,e,n){"use strict";cc._RF.push(e,"fa4b3rnP3NAKb+xt8f8q3Md","BaseInst");var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.BaseInst=void 0;var r=cc._decorator,i=r.ccclass,a=(r.property,function(){function t(){}return t.getInstance=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this;if(!n._instance){var o=t.length;0==o?n._instance=new n:1==o?n._instance=new n(t[0]):2==o?n._instance=new n(t[0],t[1]):3==o?n._instance=new n(t[0],t[1],t[2]):4==o?n._instance=new n(t[0],t[1],t[2],t[3]):5==o&&(n._instance=new n(t[0],t[1],t[2],t[3],t[4]))}return n._instance},o([i],t)}());n.BaseInst=a,cc._RF.pop()},{}],BlockType:[function(t,e,n){"use strict";cc._RF.push(e,"212e4R8UJpNR5TxuO+kfgFv","BlockType");var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,a=(r.property,function(){function t(){}return t.getBlockInfoById=function(t){return this.deepCopyObj(this.block_data[t])},t.deepCopyObj=function(t){var e={};for(var n in t)e[n]=t[n];return e},t.block_data={1:{id:1,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u5757",type:0,assets:"quest_block_1"},2:{id:2,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u5757",type:0,assets:"quest_block_2"},3:{id:3,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u5757",type:0,assets:"quest_block_3"},4:{id:4,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u5757",type:0,assets:"quest_block_4"},5:{id:5,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u5757",type:0,assets:"quest_block_5"},6:{id:6,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u5757",type:0,assets:"quest_block_6"},7:{id:7,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u5757",type:0,assets:"quest_block_7"},8:{id:8,baseType:!1,IndependentType:!1,ratioGrid:0,desc:"\u661f\u661f",type:1,assets:"collect_star"},9:{id:9,baseType:!1,IndependentType:!1,ratioGrid:0,desc:"\u78c1\u94c1",type:2,assets:"collect_magnet",ani:!0},10:{id:10,baseType:!1,IndependentType:!1,ratioGrid:0,desc:"\u51b0\u5757",type:3,assets:"game_block_ice_1"},11:{id:11,baseType:!1,IndependentType:!1,ratioGrid:0,desc:"\u51b0\u5757",type:3,assets:"game_block_ice_2"},12:{id:12,baseType:!1,IndependentType:!1,ratioGrid:0,desc:"\u51b0\u5757",type:3,assets:"game_block_ice_3"},13:{id:13,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u51b0\u70b8\u5f39",type:4,assets:"tmp_icebomb"},14:{id:14,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u68a6\u60f3\u5b9d\u77f3",type:5,assets:"collect_dreamgem",ani:!0},15:{id:15,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u68a6\u60f3\u5b9d\u77f3",type:5,assets:"collect_dreamgem",ani:!0},16:{id:16,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u68a6\u60f3\u5b9d\u77f3",type:5,assets:"collect_dreamgem"},17:{id:17,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u68a6\u60f3\u5b9d\u77f3",type:5,assets:"collect_dreamgem"},18:{id:18,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u68a6\u60f3\u5b9d\u77f3",type:5,assets:"collect_dreamgem"},19:{id:19,baseType:!1,IndependentType:!1,ratioGrid:1,desc:"\u767d\u8272\u65b9\u5757",type:6,assets:"game_block_white"},20:{id:20,baseType:!1,IndependentType:!1,ratioGrid:1,desc:"\u77f3\u5934",type:7,assets:""},21:{id:21,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u7206\u70b8\u6c14\u7403",type:8,assets:"collect_bomb"},22:{id:22,baseType:!1,IndependentType:!0,ratioGrid:1,desc:"\u8f93\u9001\u5e26",type:9,assets:"tmp_conveyor"},23:{id:23,baseType:!1,IndependentType:!0,ratioGrid:1,desc:"\u8f93\u9001\u5e26",type:9,assets:"tmp_conveyor"},24:{id:24,baseType:!1,IndependentType:!0,ratioGrid:1,desc:"\u8f93\u9001\u5e26",type:9,assets:"tmp_conveyor"},25:{id:25,baseType:!1,IndependentType:!0,ratioGrid:1,desc:"\u8f93\u9001\u5e26",type:9,assets:"tmp_conveyor"},26:{id:26,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u79fb\u52a8\u5b9d\u77f3",type:10,assets:"collect_transfer"},27:{id:27,baseType:!0,IndependentType:!0,ratioGrid:4,desc:"\u97f3\u4e50\u76d2",type:11,assets:"tmp_music_box",ani:!0},28:{id:28,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u68a6\u60f3\u5b9d\u77f3\u5236\u9020\u673a",type:12,assets:"tmp_gemmachine",ani:!0},29:{id:29,baseType:!0,IndependentType:!0,relationId:1,ratioGrid:1,desc:"\u5b9d\u77f3\u76d2\u5b50",type:13,assets:"giftbox_1"},30:{id:30,baseType:!0,IndependentType:!0,ratioGrid:1,relationId:2,desc:"\u5b9d\u77f3\u76d2\u5b50",type:13,assets:"giftbox_2"},31:{id:31,baseType:!0,IndependentType:!0,ratioGrid:1,relationId:3,desc:"\u5b9d\u77f3\u76d2\u5b50",type:13,assets:"giftbox_3"},32:{id:32,baseType:!0,IndependentType:!0,ratioGrid:1,relationId:4,desc:"\u5b9d\u77f3\u76d2\u5b50",type:13,assets:"giftbox_4"},33:{id:33,baseType:!0,IndependentType:!0,ratioGrid:1,relationId:5,desc:"\u5b9d\u77f3\u76d2\u5b50",type:13,assets:"giftbox_5"},34:{id:34,baseType:!0,IndependentType:!0,ratioGrid:1,relationId:6,desc:"\u5b9d\u77f3\u76d2\u5b50",type:13,assets:"giftbox_6"},35:{id:35,baseType:!0,IndependentType:!0,ratioGrid:1,relationId:7,desc:"\u5b9d\u77f3\u76d2\u5b50",type:13,assets:"giftbox_7"},36:{id:36,baseType:!1,IndependentType:!0,ratioGrid:1,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble",ani:!0},37:{id:37,baseType:!1,IndependentType:!0,ratioGrid:1,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble",ani:!0},38:{id:38,baseType:!1,IndependentType:!0,ratioGrid:1,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble",ani:!0},39:{id:39,baseType:!1,IndependentType:!0,ratioGrid:1,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble",ani:!0},40:{id:40,baseType:!1,IndependentType:!0,ratioGrid:1,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble",ani:!0},41:{id:41,baseType:!1,IndependentType:!0,ratioGrid:1,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble",ani:!0},42:{id:42,baseType:!1,IndependentType:!0,ratioGrid:1,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble",ani:!0},43:{id:43,baseType:!1,IndependentType:!0,ratioGrid:1,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble",ani:!0},44:{id:44,baseType:!1,IndependentType:!0,ratioGrid:4,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble",ani:!0},45:{id:45,baseType:!1,IndependentType:!0,ratioGrid:4,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble"},46:{id:46,baseType:!1,IndependentType:!0,ratioGrid:4,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble"},47:{id:47,baseType:!1,IndependentType:!0,ratioGrid:4,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble"},48:{id:48,baseType:!1,IndependentType:!0,ratioGrid:4,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble"},49:{id:49,baseType:!1,IndependentType:!0,ratioGrid:4,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble"},50:{id:50,baseType:!1,IndependentType:!0,ratioGrid:4,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble"},51:{id:44,baseType:!1,IndependentType:!0,ratioGrid:4,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble"},52:{id:52,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u97f3\u4e50\u76d2",type:11,assets:"tmp_music_box",ani:!0},53:{id:53,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u51b0\u5757\u5236\u9020\u673a",type:15,assets:"tmp_icemachine",ani:!0},54:{id:54,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u51b0\u5757\u5236\u9020\u673a",type:15,assets:"tmp_icemachine",ani:!0},55:{id:55,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u51b0\u5757\u5236\u9020\u673a",type:15,assets:"tmp_icemachine",ani:!0},56:{id:56,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u7eb8\u98de\u673a",type:16,assets:"collect_paper_airplane"},57:{id:57,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u706b\u7bad",type:18,assets:"level_rocket"},58:{id:58,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u706b\u7bad",type:18,assets:"level_rocket"},59:{id:59,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u706b\u7bad",type:18,assets:"level_rocket"},60:{id:60,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u706b\u7bad",type:18,assets:"level_rocket"},61:{id:61,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u73cd\u73e0",type:19,assets:"collect_pearl",ani:!0},62:{id:62,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u9e3d\u5b50",type:20,assets:"collect_pigeon",ani:!0},63:{id:63,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u80fd\u91cf\u7403",type:21,assets:""},64:{id:64,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u80fd\u91cf\u7403",type:21,assets:""},65:{id:65,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u80fd\u91cf\u7403",type:21,assets:""},66:{id:66,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u73cd\u73e0-\u4efb\u52a1\u6536\u96c6",type:19,assets:"collect_pearl",ani:!0},67:{id:67,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u5c0f\u718a\u76d2\u5b50",type:20,assets:"collect_bear"},68:{id:68,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u725b\u5976",type:21,assets:"collect_milk"},69:{id:69,baseType:!1,IndependentType:!1,ratioGrid:1,desc:"\u97f3\u7b26-\u97f3\u4e50\u76d2\u5236\u9020",type:22,assets:"collect_notes"},70:{id:70,baseType:!1,IndependentType:!0,ratioGrid:0,desc:"\u969c\u788d-\u5206\u5272\u7ebf",assets:""}},o([i],t)}());n.default=a,cc._RF.pop()},{}],BranchEntityControl:[function(t,e,n){"use strict";cc._RF.push(e,"6e220zbzvhA9KzSDoE59cRr","BranchEntityControl");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./common/GlobalInferfance"),c=t("./common/AppData"),s=t("./control/EventController"),l=t("./control/AudioCenter"),u=t("./prefabs/Branch"),d=t("./prefabs/BranchPool"),p=t("./util/ModifyNode"),h=cc._decorator,f=h.ccclass,y=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._cups=[],e._actions=[],e.selected=null,e.opers=[],e.layout_h=null,e.layout_scale=1,e.__ids=[],e.downBranchs=[],e}return r(e,t),e.prototype.start=function(){},e.prototype.createBranchEntity=function(t,e){if(void 0===e&&(e=c.default.cup_skin_index),this.__ids=[].concat(t),this.downBranchs=[],this.layout_h&&(this.layout_h.node.destroyAllChildren(),this.layout_h.node.removeAllChildren()),this._cups=[],this.selected=null,this._actions=[],0!=t.length){for(var n=0;n<t.length;n++){var o=t[n],r=d.default.getFromPool();r.name=n.toString(),r.parent=this.node;var i=r.getComponent(u.default);i.setBranchIndex(e),i.setBranchData(o,this.clickBranchEntity.bind(this),n),this._cups.push(i)}null==this.layout_h&&(this.layout_h=C(cc.Layout.Type.HORIZONTAL,this.node,"layout_h"),this.layout_h.node.zIndex=1,p.default.getInstance().adapterNode(this.layout_h.node)),this._cups[0].node.getContentSize();var a=C(cc.Layout.Type.VERTICAL,this.layout_h.node,"layout_left");a.node.anchorX=0;var s=C(cc.Layout.Type.VERTICAL,this.layout_h.node,"layout_right");s.node.anchorX=1,s.node.scaleX=-1;var l=[a,s],h=0;for(n=0;n<this._cups.length;n++)this._cups[n].node.parent=l[h].node,h=0==h?1:0;var f=Math.max(a.node.childrenCount,s.node.childrenCount);a.spacingY=s.spacingY=120;var y=f*this._cups[0].node.getChildByName("clickLyer").height,_=this.node.parent.getChildByName("topBoarder"),g=this.node.parent.getChildByName("bottomBoarder"),m=_.y+-g.y;if(m<y){var v=1-(y-m)/y/2;s.node.scale=v,s.node.scaleX=-v,a.node.scale=v}var b=cc.view.getVisibleSize().width/2;a.node.width=b/this.layout_h.node.scale,s.node.width=b/this.layout_h.node.scale,this.layout_scale=a.node.scaleX*this.layout_h.node.scale,this.layout_h.enabled=!0,a.updateLayout(),s.updateLayout(),this.layout_h.updateLayout()}function C(t,e,n){var o=new cc.Node(n);o.parent=e;var r=o.addComponent(cc.Layout);return r.type=t,r.resizeMode=cc.Layout.ResizeMode.CONTAINER,r}},e.prototype.addBranchEntity=function(){for(var t,e=[0,0,0,0],n=this.layout_h.node.getChildByName("layout_left").getComponent(cc.Layout),o=this.layout_h.node.getChildByName("layout_right").getComponent(cc.Layout),r=!1,i=0,l=[],p=[],h=0,f=0,y=0,_=0;_<n.node.childrenCount;_++)(g=n.node.children[_].getComponent("Branch")).downed?(t=!0,l.push(g)):h+=1;for(_=0;_<o.node.childrenCount;_++){var g;(g=o.node.children[_].getComponent("Branch")).downed?(r=!0,p.push(g)):f+=1}var m=!1;if(t||r){m=!1;var v=[];h>f?(v=p,f+=1):(v=l,h+=1);var b=v.sort(function(t,e){var n=Math.abs(t.node.y),o=Math.abs(e.node.y);return 0==n&&(n=1),0==o&&(o=1),n-o})[0],C=b.node.getChildByName("branch"+c.default.cup_skin_index).getChildByName("branch");y=(A=b.node.getChildByName("clickLyer")).height,A.active=!0,C.active=!0,C.angle=0,C.x=0,C.setPosition(cc.v2()),b.downed=!1,b.polled=!1,b.shakeState=!1,b.execAddBranchAni(),i=b.branchIndex,b.setBranchData(e,this.clickBranchEntity.bind(this),i),this._cups[b.branchIndex]=b}else{m=!0;var w=this._cups.length,I=d.default.getFromPool();I.parent=this.node;var A,B=I.getComponent(u.default);B.setBranchData(e,this.clickBranchEntity.bind(this),w),B.setBranchIndex(c.default.cup_skin_index),y=(A=I.getChildByName("clickLyer")).height,this._cups.push(B),I.name=this._cups.length.toString();var O=null;w%2==0?(O=this.layout_h.node.getChildByName("layout_left").getComponent(cc.Layout),h+=1):(O=this.layout_h.node.getChildByName("layout_right").getComponent(cc.Layout),f+=1),this._cups[this._cups.length-1].node.parent=O.node,O.updateLayout(),B.execAddBranchAni(),i=w}var T=Math.max(h,f)*y,S=this.node.parent.getChildByName("topBoarder"),E=this.node.parent.getChildByName("bottomBoarder"),N=S.y+-E.y;if(N<T){var P=1-(T-N)/T/2;o.node.scale=P,o.node.scaleX=-P,n.node.scale=P}this.layout_scale=n.node.scaleX,this.layout_h.enabled=!0,this.layout_h.updateLayout(),n.updateLayout(),o.updateLayout(),s.default.getInstance().emitListen(a.CUSTOM_UPDATE_INFO,{newBranch:!0,index:i,useNew:m})},e.prototype.isGameFail=function(){for(var t=!1,e=0;e<this._cups.length;e++){var n=this._cups[e];if(n){for(var o=0;o<this._cups.length;o++){var r=this._cups[o];r!=n&&r&&this.isCanMove(n,r)&&(t=!0,n.topColorNum>r.emptyNum&&(t=!1))}if(t)break}}s.default.getInstance().emitListen(a.CUSTOM_END_JUDGE,{canPoll:t})},e.prototype.filterUsedBranchs=function(t){for(var e=0;e<this.opers.length;e++)this.opers[e].branchIndex==t&&(this.opers.splice(e,1),e-=1)},e.prototype.getBranchByIndex=function(t){return this._cups[t]},e.prototype.containsPos=function(t){for(var e=0;e<this._cups.length;e++)if(this._cups[e]&&this._cups[e].node.getBoundingBoxToWorld().contains(t))return this._cups[e];return null},e.prototype.clickBranchEntity=function(t){if(c.default.waitTime=0,!(!c.default.aniFinish||this.selected&&this.selected.finished)&&(1!=c.default.birdLev&&2!=c.default.birdLev||c.default.initGuide==t.node&&null!=c.default.initGuide))if(this.selected){var e=1==c.default.birdLev||2==c.default.birdLev;if(this.selected!=t||e){if(this.isCanMove(this.selected,t)&&this.selected!=t){this.transPageStr(),this.selectOper(this.selected,!1);var n=this.selected.branchIndex,o=t.branchIndex,r=t.emptyNum,i=this.selected.topColorNum,u=r>=i?i:r,d=this.selected.pop(u,!0);return t.push(d),this.transPageStr(),c.default.game_step+=1,c.default.path.push(this.selected.branchIndex.toString()+"."+t.branchIndex.toString()+".0"),this._actions.push({from:n,to:o,num:u,EndBranchIndex:t.branchIndex,SelectBranchIndex:this.selected.branchIndex}),s.default.getInstance().emitListen(a.CUSTOM_UPDATE_INFO,{pollNum:u,from:n,to:o}),l.default.getInstance().playEffect(a.AudioEnum.Fly_2_2),this.selected=null,e&&(c.default.initGuide=null,s.default.getInstance().emitListen(a.CUSTOM_NEXT_GUIDE)),this.isGameFail(),!0}return e||(this.selectOper(this.selected,!1),this.selected=t,this.selectOper(t,!0)),!1}this.selectOper(t,!1),this.selected=null}else{if(t.isEmpty())return;this.selected=t,this.selectOper(t,!0),1!=c.default.birdLev&&2!=c.default.birdLev||(c.default.initGuide=null,s.default.getInstance().emitListen(a.CUSTOM_NEXT_GUIDE))}},e.prototype.transPageStr=function(){for(var t="",e=0;e<this._cups.length;e++)this._cups[e]?t+=this._cups[e].cupInfo.join(""):t+="0000";return t},e.prototype.selectOper=function(t,e){var n=t.branchIndex,o=t.topColorNum;s.default.getInstance().emitListen(a.CUSTOM_UPDATE_STATE,{focusIndex:n,bool:e,topNum:o})},e.prototype.isCanMove=function(t,e){var n=t.getFirstData(),o=e.getFirstData();return 0!=n&&(0==o||o==n&&e.emptyNum>0&&(t.topColorNum<=e.emptyNum||t.topColorNum>0))},e.prototype.isBranchFull=function(t){return this._cups[t]?this._cups[t].finished:-1},e.prototype.allBranchFull=function(){for(var t=!0,e=0;e<this._cups.length;e++)if(!(this._cups[e]&&this._cups[e].isEmpty()||!this._cups[e]||this._cups[e].finished)){t=!1;break}return c.default.gameComplete=t,t},Object.defineProperty(e.prototype,"ids",{get:function(){for(var t=[],e=0;e<this._cups.length;e++)if(this._cups[e]){var n=this._cups[e];t=t.concat(n.cupInfo)}else t.push(13,13,13,13);return t},enumerable:!1,configurable:!0}),e.prototype.getEntityRealPos=function(t,e){return this._cups[t].transLocalPos(e)},e.prototype.checkAllShake=function(){for(var t=!1,e=0;e<this._cups.length;e++)if(this._cups[e]&&this._cups[e].shakeState){t=!0;break}return t},e.prototype.getBranchShakeState=function(t){return this._cups[t].shakeState},e.prototype.shakeBranch=function(t){var e=this;if(this._cups[t].shakeState)return!0;this._cups[t].shakeState=!0;var n=this._cups[t].node,o=cc.tween().to(.2,{angle:-2}),r=cc.tween().to(.2,{angle:1}),i=cc.tween().to(.2,{angle:-1}),a=cc.tween().to(.2,{angle:0});return cc.tween(n).then(o).then(r).then(i).then(a).call(function(){e._cups[t]&&(e._cups[t].shakeState=!1)}).start(),null},e.prototype.downAllBranchAni=function(){},e.prototype.recordBranchs=function(t){this._cups[t]&&this.downBranchs.push(this._cups[t])},e.prototype.execBranchDown=function(t){var e=this;if(this._cups[t]){var n=this._cups[t].node;n.getChildByName("clickLyer").active=!1;var o=n.getChildByName("branch"+c.default.cup_skin_index).getChildByName("branch"),r=cc.view.getVisibleSize().height,i=cc.tween().to(.8,{y:200-r,angle:-90},{easing:"sineIn"});cc.tween(o).delay(.15).then(i).call(function(){e._cups[t]&&(e._cups[t].downed=!0,e._cups[t]=null),o.active=!1}).start()}},e.prototype.getActionNum=function(){return this._actions.length},e.prototype.releasNodeAction=function(t){for(var e=0;e<this._actions.length;e++)this._actions[e].from!=t&&this._actions[e].to!=t||(this._actions.splice(e,1),e-=1)},e.prototype.undoAction=function(){var t=this._actions[this._actions.length-1];if(!t)return!1;var e=t.from,n=t.to,o=t.num,r=this._cups[n],i=this._cups[e];if(r&&i){if(!(r.topColorNum<o||i.emptyNum<o)){this.transPageStr();var l=r.pop(o);return i.push(l),this.transPageStr(),c.default.path.push(n.toString()+"."+e.toString()+".1"),s.default.getInstance().emitListen(a.CUSTOM_UPDATE_INFO,{pollNum:o,from:n,to:e,quick:!0}),this._actions.pop(),!0}this._actions=[]}else this._actions=[]},e.prototype.onReplaceBranchs=function(t){for(var e=0;e<this._cups.length;e++)this._cups[e]&&this._cups[e].setBranchIndex(t)},e.prototype.onRealseBranchs=function(){for(var t=0;t<this._cups.length;t++)this._cups[t]&&d.default.putInPool(this._cups[t].node);for(t=0;t<this.downBranchs.length;t++)this.downBranchs[t]&&d.default.putInPool(this.downBranchs[t].node);this.downBranchs=[],this._cups=[],this.selected=null,this._actions=[]},i([f],e)}(cc.Component));n.default=y,cc._RF.pop()},{"./common/AppData":"AppData","./common/GlobalInferfance":"GlobalInferfance","./control/AudioCenter":"AudioCenter","./control/EventController":"EventController","./prefabs/Branch":"Branch","./prefabs/BranchPool":"BranchPool","./util/ModifyNode":"ModifyNode"}],BranchPool:[function(t,e,n){"use strict";cc._RF.push(e,"7d10etzs/tFhaaueQyDdvJx","BranchPool");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../common/AppData"),c=t("./Branch"),s=cc._decorator,l=s.ccclass,u=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.createPool=function(t,e){this._pool=new cc.NodePool,this.__prefab=t;for(var n=0;n<e;n++){var o=cc.instantiate(t);this._pool.put(o)}},e.getFromPool=function(){var t=null;if(this._pool.size()>0)t=this._pool.get();else if(this.__prefab){var e=cc.instantiate(this.__prefab);this._pool.put(e),t=this._pool.get()}return t},e.putInPool=function(t){t.scaleX=Math.abs(t.scaleX),t.name="";var e=t.getComponent(c.default);e.branchIndex=0,e.shakeState=!1,e.polled=!1,e.downed=!1,e.__ids=[],e.setBranchIndex(a.default.cup_skin_index),t.getChildByName("clickLyer").active=!0;var n=t.getChildByName("branch"+a.default.cup_skin_index).getChildByName("branch");cc.Tween.stopAllByTarget(n),n.opacity=255,n.active=!0,n.setPosition(cc.v2(0,0)),n.angle=0,this._pool.put(t)},e.clearAll=function(){this._pool&&this._pool.clear(),this.__prefab=null},i([l],e)}(cc.Component));n.default=u,cc._RF.pop()},{"../common/AppData":"AppData","./Branch":"Branch"}],Branch:[function(t,e,n){"use strict";cc._RF.push(e,"6564e9Dgu1EkYDP0K3YKn6h","Branch");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../common/GlobalInferfance"),c=t("../common/AppData"),s=t("../control/EventController"),l=cc._decorator,u=l.ccclass,d=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.branchIndex=0,e.shakeState=!1,e.polled=!1,e.downed=!1,e.onClick=null,e.infoNormals=[],e.__ids=[],e}return r(e,t),e.prototype.transLocalPos=function(t){for(var e=[],n=this.node.getChildByName("branch"+c.default.cup_skin_index),o=[n.getChildByName("point1"),n.getChildByName("point2"),n.getChildByName("point3"),n.getChildByName("point4")],r=0;r<o.length;r++){var i=o[r].getPosition(),a=this.node.convertToWorldSpaceAR(i),s=t.convertToNodeSpaceAR(a);e.push(s)}return e},e.prototype.setBranchIndex=function(t){void 0===t&&(t=c.default.cup_skin_index);for(var e=1;e<=4;e++)this.node.getChildByName("branch"+e).active=!1,t==e&&(this.node.getChildByName("branch"+e).active=!0)},e.prototype.start=function(){this.node.getChildByName("clickLyer").on(cc.Node.EventType.TOUCH_START,this.onBtn_click,this)},e.prototype.onBtn_click=function(){this&&this.finished||c.default.gameComplete||c.default.startSlideOper||this.onClick&&this.onClick(this)},e.prototype.setBranchData=function(t,e,n){if(this.__ids=[].concat(t),this.onClick=e,this.branchIndex=n,this.infoNormals=[],c.default.hideNode)for(var o=0;o<this.__ids.length;o++)0!=this.__ids[o]&&0!=this.__ids[o+1]&&null!=this.__ids[o+1]&&(this.infoNormals.push(this.__ids[o]),this.__ids[o]=100)},e.prototype.execAddBranchAni=function(){var t=this.node.getChildByName("branch"+c.default.cup_skin_index).getChildByName("branch");t.x=2*-t.width,cc.tween(t).then(cc.tween().to(.7,{x:0})).call(function(){}).start()},Object.defineProperty(e.prototype,"cupInfo",{get:function(){return[].concat(this.__ids)},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return 0==this.__ids[0]&&this.__ids[0]==this.__ids[1]&&this.__ids[1]==this.__ids[2]&&this.__ids[2]==this.__ids[3]},e.prototype.pop=function(t,e){void 0===e&&(e=!1);for(var n=[],o=this.__ids.length-1;o>=0&&!(100!=this.__ids[o]&&0!=this.__ids[o]&&(n.push(this.__ids[o]),this.__ids[o]=0,n.length>=t));o--);var r=this.getFirstData();if(c.default.hideNode&&this.infoNormals.length&&e&&100==r){var i=this.infoNormals[this.infoNormals.length-1],l=1;for(o=this.infoNormals.length-2;o>=0&&i==this.infoNormals[o];o--)l+=1;for(var u=l,d=this.__ids.length-1;d>=0;d--)if(0!=this.__ids[d]){if(!(u>0))break;100==this.__ids[d]&&(this.__ids[d]=this.infoNormals.pop()),u-=1}s.default.getInstance().emitListen(a.CUSTOM_RESTORE,{restore:l,index:this.branchIndex})}return n},e.prototype.push=function(t){for(var e=0;e<this.__ids.length;e++)if(0==this.__ids[e]){var n=t.shift();if(this.__ids[e]=n,t.length<=0)break}},Object.defineProperty(e.prototype,"finished",{get:function(){return 0!=this.__ids[0]&&this.__ids[0]==this.__ids[1]&&this.__ids[1]==this.__ids[2]&&this.__ids[2]==this.__ids[3]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"emptyNum",{get:function(){var t=this.cupInfo,e=t[t.length-1];if(0!=e)return 0;for(var n=0,o=t.length-1;o>=0&&t[o]==e;o--)n+=1;return n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topColorNum",{get:function(){for(var t=this.cupInfo,e=0,n=0,o=t.length-1;o>=0;o--)if(0!=t[o]){if(0!=e&&e!=t[o])break;e=t[o],n++}return n},enumerable:!1,configurable:!0}),e.prototype.getFirstData=function(){for(var t=this.__ids.length-1;t>=0;t--)if(0!=this.__ids[t])return this.__ids[t];return 0},i([u],e)}(cc.Component));n.default=d,cc._RF.pop()},{"../common/AppData":"AppData","../common/GlobalInferfance":"GlobalInferfance","../control/EventController":"EventController"}],1:[function(t,e,n){"use strict";n.byteLength=function(t){var e=l(t),n=e[0],o=e[1];return 3*(n+o)/4-o},n.toByteArray=function(t){var e,n,o=l(t),a=o[0],c=o[1],s=new i(u(0,a,c)),d=0,p=c>0?a-4:a;for(n=0;n<p;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],s[d++]=e>>16&255,s[d++]=e>>8&255,s[d++]=255&e;return 2===c&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,s[d++]=255&e),1===c&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,s[d++]=e>>8&255,s[d++]=255&e),s},n.fromByteArray=function(t){for(var e,n=t.length,r=n%3,i=[],a=0,c=n-r;a<c;a+=16383)i.push(d(t,a,a+16383>c?c:a+16383));return 1===r?(e=t[n-1],i.push(o[e>>2]+o[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],i.push(o[e>>10]+o[e>>4&63]+o[e<<2&63]+"=")),i.join("")};for(var o=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,s=a.length;c<s;++c)o[c]=a[c],r[a.charCodeAt(c)]=c;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function u(t,e,n){return 3*(e+n)/4-n}function d(t,e,n){for(var r,i,a=[],c=e;c<n;c+=3)r=(t[c]<<16&16711680)+(t[c+1]<<8&65280)+(255&t[c+2]),a.push(o[(i=r)>>18&63]+o[i>>12&63]+o[i>>6&63]+o[63&i]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},{}],2:[function(t,e,n){(function(e){"use strict";var o=t("base64-js"),r=t("ieee754"),i=t("isarray");function a(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=s.prototype:(null===t&&(t=new s(e)),t.length=e),t}function s(t,e,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return p(this,t)}return l(this,t,e,n)}function l(t,e,n,o){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?y(t,e,n,o):"string"==typeof e?h(t,e,n):_(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function d(t,e,n,o){return u(e),e<=0?c(t,e):void 0!==n?"string"==typeof o?c(t,e).fill(n,o):c(t,e).fill(n):c(t,e)}function p(t,e){if(u(e),t=c(t,e<0?0:0|g(e)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var o=0|m(e,n),r=(t=c(t,o)).write(e,n);return r!==o&&(t=t.slice(0,r)),t}function f(t,e){var n=e.length<0?0:0|g(e.length);t=c(t,n);for(var o=0;o<n;o+=1)t[o]=255&e[o];return t}function y(t,e,n,o){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(o||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===o?new Uint8Array(e):void 0===o?new Uint8Array(e,n):new Uint8Array(e,n,o),s.TYPED_ARRAY_SUPPORT?(t=e).__proto__=s.prototype:t=f(t,e),t}function _(t,e){if(s.isBuffer(e)){var n=0|g(e.length);return 0===(t=c(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(o=e.length)!=o?c(t,0):f(t,e);if("Buffer"===e.type&&i(e.data))return f(t,e.data)}var o;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function m(t,e){if(s.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var o=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return K(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(t).length;default:if(o)return K(t).length;e=(""+e).toLowerCase(),o=!0}}function v(t,e,n){var o=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return D(this,e,n);case"utf8":case"utf-8":return N(this,e,n);case"ascii":return R(this,e,n);case"latin1":case"binary":return L(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,n);default:if(o)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),o=!0}}function b(t,e,n){var o=t[e];t[e]=t[n],t[n]=o}function C(t,e,n,o,r){if(0===t.length)return-1;if("string"==typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=s.from(e,o)),s.isBuffer(e))return 0===e.length?-1:w(t,e,n,o,r);if("number"==typeof e)return e&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):w(t,[e],n,o,r);throw new TypeError("val must be string, number or Buffer")}function w(t,e,n,o,r){var i,a=1,c=t.length,s=e.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(t.length<2||e.length<2)return-1;a=2,c/=2,s/=2,n/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(r){var u=-1;for(i=n;i<c;i++)if(l(t,i)===l(e,-1===u?0:i-u)){if(-1===u&&(u=i),i-u+1===s)return u*a}else-1!==u&&(i-=i-u),u=-1}else for(n+s>c&&(n=c-s),i=n;i>=0;i--){for(var d=!0,p=0;p<s;p++)if(l(t,i+p)!==l(e,p)){d=!1;break}if(d)return i}return-1}function I(t,e,n,o){n=Number(n)||0;var r=t.length-n;o?(o=Number(o))>r&&(o=r):o=r;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");o>i/2&&(o=i/2);for(var a=0;a<o;++a){var c=parseInt(e.substr(2*a,2),16);if(isNaN(c))return a;t[n+a]=c}return a}function A(t,e,n,o){return Z(K(e,t.length-n),t,n,o)}function B(t,e,n,o){return Z(q(e),t,n,o)}function O(t,e,n,o){return B(t,e,n,o)}function T(t,e,n,o){return Z(W(e),t,n,o)}function S(t,e,n,o){return Z(J(e,t.length-n),t,n,o)}function E(t,e,n){return 0===e&&n===t.length?o.fromByteArray(t):o.fromByteArray(t.slice(e,n))}function N(t,e,n){n=Math.min(t.length,n);for(var o=[],r=e;r<n;){var i,a,c,s,l=t[r],u=null,d=l>239?4:l>223?3:l>191?2:1;if(r+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(i=t[r+1]))&&(s=(31&l)<<6|63&i)>127&&(u=s);break;case 3:i=t[r+1],a=t[r+2],128==(192&i)&&128==(192&a)&&(s=(15&l)<<12|(63&i)<<6|63&a)>2047&&(s<55296||s>57343)&&(u=s);break;case 4:i=t[r+1],a=t[r+2],c=t[r+3],128==(192&i)&&128==(192&a)&&128==(192&c)&&(s=(15&l)<<18|(63&i)<<12|(63&a)<<6|63&c)>65535&&s<1114112&&(u=s)}null===u?(u=65533,d=1):u>65535&&(u-=65536,o.push(u>>>10&1023|55296),u=56320|1023&u),o.push(u),r+=d}return k(o)}n.Buffer=s,n.SlowBuffer=function(t){return+t!=t&&(t=0),s.alloc(+t)},n.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),n.kMaxLength=a(),s.poolSize=8192,s._augment=function(t){return t.__proto__=s.prototype,t},s.from=function(t,e,n){return l(null,t,e,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(t,e,n){return d(null,t,e,n)},s.allocUnsafe=function(t){return p(null,t)},s.allocUnsafeSlow=function(t){return p(null,t)},s.isBuffer=function(t){return!(null==t||!t._isBuffer)},s.compare=function(t,e){if(!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,o=e.length,r=0,i=Math.min(n,o);r<i;++r)if(t[r]!==e[r]){n=t[r],o=e[r];break}return n<o?-1:o<n?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var o=s.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var a=t[n];if(!s.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(o,r),r+=a.length}return o},s.byteLength=m,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)b(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)b(this,e,e+3),b(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)b(this,e,e+7),b(this,e+1,e+6),b(this,e+2,e+5),b(this,e+3,e+4);return this},s.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?N(this,0,t):v.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},s.prototype.compare=function(t,e,n,o,r){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===o&&(o=0),void 0===r&&(r=this.length),e<0||n>t.length||o<0||r>this.length)throw new RangeError("out of range index");if(o>=r&&e>=n)return 0;if(o>=r)return-1;if(e>=n)return 1;if(this===t)return 0;for(var i=(r>>>=0)-(o>>>=0),a=(n>>>=0)-(e>>>=0),c=Math.min(i,a),l=this.slice(o,r),u=t.slice(e,n),d=0;d<c;++d)if(l[d]!==u[d]){i=l[d],a=u[d];break}return i<a?-1:a<i?1:0},s.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},s.prototype.indexOf=function(t,e,n){return C(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return C(this,t,e,n,!1)},s.prototype.write=function(t,e,n,o){if(void 0===e)o="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)o=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===o&&(o="utf8")):(o=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var i=!1;;)switch(o){case"hex":return I(this,t,e,n);case"utf8":case"utf-8":return A(this,t,e,n);case"ascii":return B(this,t,e,n);case"latin1":case"binary":return O(this,t,e,n);case"base64":return T(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),i=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function k(t){var e=t.length;if(e<=P)return String.fromCharCode.apply(String,t);for(var n="",o=0;o<e;)n+=String.fromCharCode.apply(String,t.slice(o,o+=P));return n}function R(t,e,n){var o="";n=Math.min(t.length,n);for(var r=e;r<n;++r)o+=String.fromCharCode(127&t[r]);return o}function L(t,e,n){var o="";n=Math.min(t.length,n);for(var r=e;r<n;++r)o+=String.fromCharCode(t[r]);return o}function D(t,e,n){var o,r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=e;a<n;++a)i+=(o=t[a])<16?"0"+o.toString(16):o.toString(16);return i}function j(t,e,n){for(var o=t.slice(e,n),r="",i=0;i<o.length;i+=2)r+=String.fromCharCode(o[i]+256*o[i+1]);return r}function x(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,n,o,r,i){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<i)throw new RangeError('"value" argument is out of bounds');if(n+o>t.length)throw new RangeError("Index out of range")}function G(t,e,n,o){e<0&&(e=65535+e+1);for(var r=0,i=Math.min(t.length-n,2);r<i;++r)t[n+r]=(e&255<<8*(o?r:1-r))>>>8*(o?r:1-r)}function F(t,e,n,o){e<0&&(e=4294967295+e+1);for(var r=0,i=Math.min(t.length-n,4);r<i;++r)t[n+r]=e>>>8*(o?r:3-r)&255}function U(t,e,n,o){if(n+o>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Y(t,e,n,o,i){return i||U(t,0,n,4),r.write(t,e,n,o,23,4),n+4}function H(t,e,n,o,i){return i||U(t,0,n,8),r.write(t,e,n,o,52,8),n+8}s.prototype.slice=function(t,e){var n,o=this.length;if((t=~~t)<0?(t+=o)<0&&(t=0):t>o&&(t=o),(e=void 0===e?o:~~e)<0?(e+=o)<0&&(e=0):e>o&&(e=o),e<t&&(e=t),s.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=s.prototype;else{var r=e-t;n=new s(r,void 0);for(var i=0;i<r;++i)n[i]=this[i+t]}return n},s.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||x(t,e,this.length);for(var o=this[t],r=1,i=0;++i<e&&(r*=256);)o+=this[t+i]*r;return o},s.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||x(t,e,this.length);for(var o=this[t+--e],r=1;e>0&&(r*=256);)o+=this[t+--e]*r;return o},s.prototype.readUInt8=function(t,e){return e||x(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return e||x(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return e||x(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return e||x(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return e||x(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||x(t,e,this.length);for(var o=this[t],r=1,i=0;++i<e&&(r*=256);)o+=this[t+i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},s.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||x(t,e,this.length);for(var o=e,r=1,i=this[t+--o];o>0&&(r*=256);)i+=this[t+--o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},s.prototype.readInt8=function(t,e){return e||x(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){e||x(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(t,e){e||x(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(t,e){return e||x(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return e||x(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return e||x(t,4,this.length),r.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return e||x(t,4,this.length),r.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return e||x(t,8,this.length),r.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return e||x(t,8,this.length),r.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,n,o){t=+t,e|=0,n|=0,o||M(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,i=0;for(this[e]=255&t;++i<n&&(r*=256);)this[e+i]=t/r&255;return e+n},s.prototype.writeUIntBE=function(t,e,n,o){t=+t,e|=0,n|=0,o||M(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,i=1;for(this[e+r]=255&t;--r>=0&&(i*=256);)this[e+r]=t/i&255;return e+n},s.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,255,0),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):G(this,t,e,!0),e+2},s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):G(this,t,e,!1),e+2},s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):F(this,t,e,!0),e+4},s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},s.prototype.writeIntLE=function(t,e,n,o){if(t=+t,e|=0,!o){var r=Math.pow(2,8*n-1);M(this,t,e,n,r-1,-r)}var i=0,a=1,c=0;for(this[e]=255&t;++i<n&&(a*=256);)t<0&&0===c&&0!==this[e+i-1]&&(c=1),this[e+i]=(t/a>>0)-c&255;return e+n},s.prototype.writeIntBE=function(t,e,n,o){if(t=+t,e|=0,!o){var r=Math.pow(2,8*n-1);M(this,t,e,n,r-1,-r)}var i=n-1,a=1,c=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===c&&0!==this[e+i+1]&&(c=1),this[e+i]=(t/a>>0)-c&255;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,127,-128),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):G(this,t,e,!0),e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):G(this,t,e,!1),e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):F(this,t,e,!0),e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},s.prototype.writeFloatLE=function(t,e,n){return Y(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return Y(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return H(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return H(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,o){if(n||(n=0),o||0===o||(o=this.length),e>=t.length&&(e=t.length),e||(e=0),o>0&&o<n&&(o=n),o===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-e<o-n&&(o=t.length-e+n);var r,i=o-n;if(this===t&&n<e&&e<o)for(r=i-1;r>=0;--r)t[r+e]=this[r+n];else if(i<1e3||!s.TYPED_ARRAY_SUPPORT)for(r=0;r<i;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},s.prototype.fill=function(t,e,n,o){if("string"==typeof t){if("string"==typeof e?(o=e,e=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!s.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var a=s.isBuffer(t)?t:K(new s(t,o).toString()),c=a.length;for(i=0;i<n-e;++i)this[i+e]=a[i%c]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=z(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function z(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function K(t,e){var n;e=e||1/0;for(var o=t.length,r=null,i=[],a=0;a<o;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===o){(e-=3)>-1&&i.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&i.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function q(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function J(t,e){for(var n,o,r,i=[],a=0;a<t.length&&!((e-=2)<0);++a)o=(n=t.charCodeAt(a))>>8,r=n%256,i.push(r),i.push(o);return i}function W(t){return o.toByteArray(X(t))}function Z(t,e,n,o){for(var r=0;r<o&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":1,ieee754:4,isarray:3}],3:[function(t,e){var n={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},{}],4:[function(t,e,n){n.read=function(t,e,n,o,r){var i,a,c=8*r-o-1,s=(1<<c)-1,l=s>>1,u=-7,d=n?r-1:0,p=n?-1:1,h=t[e+d];for(d+=p,i=h&(1<<-u)-1,h>>=-u,u+=c;u>0;i=256*i+t[e+d],d+=p,u-=8);for(a=i&(1<<-u)-1,i>>=-u,u+=o;u>0;a=256*a+t[e+d],d+=p,u-=8);if(0===i)i=1-l;else{if(i===s)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,o),i-=l}return(h?-1:1)*a*Math.pow(2,i-o)},n.write=function(t,e,n,o,r,i){var a,c,s,l=8*i-r-1,u=(1<<l)-1,d=u>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=o?0:i-1,f=o?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-a))<1&&(a--,s*=2),(e+=a+d>=1?p/s:p*Math.pow(2,1-d))*s>=2&&(a++,s/=2),a+d>=u?(c=0,a=u):a+d>=1?(c=(e*s-1)*Math.pow(2,r),a+=d):(c=e*Math.pow(2,d-1)*Math.pow(2,r),a=0));r>=8;t[n+h]=255&c,h+=f,c/=256,r-=8);for(a=a<<r|c,l+=r;l>0;t[n+h]=255&a,h+=f,a/=256,l-=8);t[n+h-f]|=128*y}},{}],ChosenOneNodeType:[function(t,e,n){"use strict";cc._RF.push(e,"4376bVfLxlLeK7kHBe4FuAC","ChosenOneNodeType");var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.GAME_CHODENONE_DATA=n.ChosenOneItem=void 0;var r=function(){this.id=0,this.type=0,this.texture="",this.num=0,this.probability=0};n.ChosenOneItem=r;var i=cc._decorator,a=i.ccclass,c=(i.property,function(){function t(){this.choseOneData=[],this.chosenId=0}var e;return e=t,t.getInstance=function(){return this._instance||(this._instance=new e)},t.prototype.init=function(){this.initChosenOne()},t.prototype.getChosenOneId=function(t){for(var e=0;e<this.choseOneData.length;e++)if(t==this.choseOneData[e].id)return this.choseOneData[e]},t.prototype.getchosenArr=function(){return this.choseOneData},t.prototype.initChosenOne=function(){for(var t in e.relation_data){var n=new r;n.id=e.relation_data[t].id,n.type=e.relation_data[t].type,n.texture=e.relation_data[t].texture,n.num=e.relation_data[t].num,n.probability=e.relation_data[t].probability,this.choseOneData.push(n)}this.disorganizeArr()},t.prototype.disorganizeArr=function(){},Object.defineProperty(t.prototype,"chosenID",{get:function(){return this.chosenId},set:function(t){this.chosenId=t},enumerable:!1,configurable:!0}),t.relation_data={1:{id:1,type:1,texture:"texture/chosenOne/daily_gold_50",num:50,probability:10},2:{id:2,type:1,texture:"texture/chosenOne/daily_gold_75",num:75,probability:10},3:{id:3,type:1,texture:"texture/chosenOne/daily_gold_100",num:100,probability:10},4:{id:4,type:101,texture:"texture/chosenOne/daily_change",num:1,probability:10},5:{id:5,type:101,texture:"texture/chosenOne/daily_change",num:2,probability:10},6:{id:6,type:102,texture:"texture/chosenOne/daily_cube",num:1,probability:10},7:{id:7,type:102,texture:"texture/chosenOne/daily_cube",num:2},8:{id:8,type:2,texture:"texture/chosenOne/daily_power",num:5,probability:10},9:{id:9,type:103,texture:"texture/chosenOne/daily_boom",num:1,probability:10}},e=o([a],t)}());n.default=c,n.GAME_CHODENONE_DATA=c.getInstance(),cc._RF.pop()},{}],CreateLevColor:[function(t,e,n){"use strict";cc._RF.push(e,"0295cnb1IFDSqJpWzSqLTY7","CreateLevColor");var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/GlobalInferfance"),i=t("../common/AppData"),a=t("../util/MathTools"),c=cc._decorator,s=c.ccclass,l=(c.property,function(){function t(){}return t.getColorArr=function(t){var e=t||i.default.birdLev;if(1==e)return[0,0,0,1,0,1,1,1];if(2==e)return[1,1,2,2,2,2,1,1,0,0,0,0];var n=this.getBottleNum(t);n>10&&(n=10);for(var o=[],r=0;r<n;r++)for(var c=0;c<4;c++)o.push(r+1);for(a.default.seed=e,r=0;r<o.length;r++){var s=o.length-r,l=a.default.seedRandom()*o.length,u=Math.floor(l),d=o[r];if(o[r]=o[u],o[u]=d,s<=2)break}for(r=0;r<8;r++)o.push(0);return o},t.checkOut=function(){},t.getBottleNum=function(t){for(var e=t||i.default.birdLev,n=[],o=0;o<r.BottleArr.length;o++){if(e<r.BottleArr[o][1]){n=r.BottleArr[o-1];break}o==r.BottleArr.length-1&&(n=r.BottleArr[o])}return 0==n[2]?n[0]:e%n[2]==0?n[0]:n[3]},o([s],t)}());n.default=l,cc._RF.pop()},{"../common/AppData":"AppData","../common/GlobalInferfance":"GlobalInferfance","../util/MathTools":"MathTools"}],DatalController:[function(t,e,n){"use strict";cc._RF.push(e,"769002IG1ZOjafDFQLwLIp7","DatalController");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../base/BaseInst"),c=t("../common/AppData"),s=cc._decorator,l=s.ccclass,u=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.getInstance=function(){return t.getInstance.call(this)},e.prototype.initRecordData=function(){var t;return(t={}).prop_addcup=1,t.prop_back=3,t.add_guide=0,t.prop_jumplev=1,t.prop_propmt=3,t.music_open=!0,t.sound_open=!0,t.shake_open=!0,t},e.prototype.getRecordData=function(){var t;if(cc.sys.localStorage.getItem("BirdData")){t=JSON.parse(cc.sys.localStorage.getItem("BirdData"));var e=this.initRecordData(),n=Object.keys(t);for(var o in e)-1==n.indexOf(o)&&(t[o]=e[o]);cc.sys.localStorage.setItem("BirdData",JSON.stringify(t))}else t=this.initRecordData(),cc.sys.localStorage.setItem("BirdData",JSON.stringify(t));return t},e.prototype.setRecordData=function(t){cc.sys.localStorage.getItem("BirdData")&&cc.sys.localStorage.setItem("BirdData",JSON.stringify(t))},e.prototype.clearRecordData=function(){cc.sys.localStorage.getItem("BirdData")&&(cc.sys.localStorage.clear(),c.default.getInstance().initData())},e.prototype.getBundle=function(t,e,n){var o=cc.assetManager.getBundle(t);o?e.call(n,o):cc.assetManager.loadBundle(t,function(t,o){t?cc.log("Prefab error:"+t):e.call(n,o)})},e.prototype.getShopData=function(){var t,e=this.initShopData();if(cc.sys.localStorage.getItem("ShopData")){t=JSON.parse(cc.sys.localStorage.getItem("ShopData"));var n=Object.keys(t);for(var o in e)-1==n.indexOf(o)&&(t[o]=e[o])}else t=e;return cc.log(t),t},e.prototype.initShopData=function(){var t;return(t={}).use_bg=0,t.use_platform=0,t.use_anim={},t.own_bg={},t.own_platform={},t.own_anim={},cc.resources.load("data/shopData",function(e,n){if(e)return cc.error(e),null;for(var o in n.json){var r=n.json[o];9==r.showId&&(t.own_anim[r.id]=!0,t.use_anim[r.id]=!0),2==r.showId&&1==r.posId&&(t.own_platform[r.id]=!0,t.use_platform=r.id),3==r.showId&&1==r.posId&&(t.own_bg[r.id]=!0,t.use_bg=r.id)}}),t},i([l],e)}(a.BaseInst));n.default=u,cc._RF.pop()},{"../base/BaseInst":"BaseInst","../common/AppData":"AppData"}],EventController:[function(t,e,n){"use strict";cc._RF.push(e,"28ce8OctrZOQLiAHQmIT5Pr","EventController");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../base/BaseInst"),c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.getInstance=function(){return t.getInstance.call(this)},e.prototype.addListen=function(t,e,n){cc.Canvas.instance.node.on(t,e.bind(n))},e.prototype.emitListen=function(t,e){void 0===e&&(e=null);var n=new cc.Event.EventCustom(t,!0);n.setUserData(e),cc.Canvas.instance.node.dispatchEvent(n)},e.prototype.removeListen=function(t){cc.Canvas.instance.node.off(t)},i([s],e)}(a.BaseInst));n.default=l,cc._RF.pop()},{"../base/BaseInst":"BaseInst"}],GameLaunch:[function(t,e,n){"use strict";cc._RF.push(e,"ef50344+c5ENq9ZOsA8acLJ","GameLaunch");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./common/GlobalInferfance"),c=t("./common/AppData"),s=t("./control/EventController"),l=t("./control/SkinController"),u=t("./control/AudioCenter"),d=t("./RunCore"),p=cc._decorator,h=p.ccclass,f=p.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progressBar=null,e.showargee=!1,e._progress=0,e._total=4,e.enterAni=!1,e}return r(e,t),e.prototype.start=function(){var t=this;if(cc.sys.platform===cc.sys.WECHAT_GAME){window.wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]});var e=window.wx.getSystemInfoSync();c.default.bannerTop=e.screenHeight/6*5-e.screenHeight/2}c.default.getInstance().initData(),c.default.getInstance().saveData(),cc.macro.ENABLE_MULTI_TOUCH=!1;var n=cc.sys.localStorage.getItem(a.CustomLocalStorageKey.BG_INDEX);n&&(c.default.bg_index=parseInt(n)),this.node.getChildByName("bgs").getChildByName(c.default.bg_index.toString()).active=!0,cc.sys.isNative&&(console.log=function(){},console.warn=function(){},cc.log=function(){},cc.warn=function(){}),u.default.getInstance().preloadFromRemote(),this.scheduleOnce(function(){t.preLoadPrefab()},1),s.default.getInstance().addListen(a.CUSTOM_READY,this.onSdkInit,this),this.onGmInit(),u.default.getInstance().playBgMusic()},e.prototype.updateProgress=function(){this._progress+=1;var t=this._progress/this._total;t>=1&&(t=1),this.progressBar.getComponent(cc.ProgressBar).progress=t},e.prototype.getOption=function(t){if(window.location){var e=location.search;if(""==e)return"";for(var n=(e=e.slice(1)).split("&"),o=n.length,r=0;r<o;r++){var i=n[r].split("=");if(i[0]==t)return i[1]}}return""},e.prototype.onGmInit=function(){cc.debug.setDisplayStats(!1)},e.prototype.onSdkInit=function(){var t=this,e=cc.sys.localStorage.getItem(a.CustomLocalStorageKey.LEV);e?c.default.birdLev=parseInt(e):(cc.sys.localStorage.setItem(a.CustomLocalStorageKey.LEV,1),c.default.birdLev=1);var n=cc.sys.localStorage.getItem(a.CustomLocalStorageKey.ANI_INDEX);n?c.default.ani_indexs=JSON.parse(n):(c.default.ani_indexs={1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1,10:1},cc.sys.localStorage.setItem(a.CustomLocalStorageKey.ANI_INDEX,JSON.stringify(c.default.ani_indexs)));var o=cc.sys.localStorage.getItem(a.CustomLocalStorageKey.CUP_INDEX);o?c.default.cup_skin_index=parseInt(o):(c.default.cup_skin_index=1,cc.sys.localStorage.setItem(a.CustomLocalStorageKey.CUP_INDEX,c.default.cup_skin_index));var r=cc.sys.localStorage.getItem(a.CustomLocalStorageKey.BG_INDEX);r?c.default.bg_index=parseInt(r):(c.default.bg_index=1,cc.sys.localStorage.setItem(a.CustomLocalStorageKey.BG_INDEX,c.default.bg_index)),c.default.readyOk=!0;var i=c.default.gameCom.getComponent(d.default);i.initCfg(function(){i.initView(),t.updateProgress();var e=t,n=setTimeout(function(){clearTimeout(n),e.updateProgress(),e.enterGame()},1500)})},e.prototype.showAgree=function(){this.showargee=!0,this.onSdkInit()},e.prototype.enterGame=function(){var t=this;cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID||(c.default.readyOk=!0),this.showargee&&c.default.readyOk&&cc.director.preloadScene("GameMain",function(){s.default.getInstance().removeListen(a.CUSTOM_READY);var e=t.node.getChildByName("loading");cc.tween(e).then(cc.tween().to(.3,{opacity:0})).start(),cc.tween(t.progressBar).then(cc.tween().to(.3,{opacity:0})).start();var n=setTimeout(function(){clearTimeout(n),cc.director.loadScene("GameMain")},800)})},e.prototype.preLoadPrefab=function(){var t=this;l.default.loadPoolEntity(function(){t.updateProgress(),cc.resources.load("prefabs/GameCon",function(t,e){this.updateProgress(),c.default.gameCom=cc.instantiate(e);var n=cc.find("preloadNode");n.addChild(c.default.gameCom),c.default.gameCom.setContentSize(n.getContentSize()),c.default.gameCom.opacity=0,c.default.gameCom.getComponent(d.default).initialize(),this.checkFinish()}.bind(t))},this)},e.prototype.checkFinish=function(){if(!this.enterAni){this.enterAni=!0;var t=this,e=setTimeout(function(){clearTimeout(e),t.showAgree()},0)}},i([f(cc.Node)],e.prototype,"progressBar",void 0),i([h],e)}(cc.Component);n.default=y,cc._RF.pop()},{"./RunCore":"RunCore","./common/AppData":"AppData","./common/GlobalInferfance":"GlobalInferfance","./control/AudioCenter":"AudioCenter","./control/EventController":"EventController","./control/SkinController":"SkinController"}],GameMain:[function(t,e,n){"use strict";cc._RF.push(e,"e9c77jGPTdD/qRGkjdFEJOe","GameMain");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./common/GlobalInferfance"),c=t("./common/AppData"),s=t("./control/EventController"),l=t("./control/AudioCenter"),u=t("./RunCore"),d=t("./util/ModifyNode"),p=t("./control/AdsCenter"),h=cc._decorator,f=h.ccclass,y=h.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.back_btn=null,e.add_btn=null,e.jump_btn=null,e.shop_btn=null,e.prompt_btn=null,e.reset_btn=null,e.set_btn=null,e.btn_arrs=[],e.levelLab=null,e.guide_tip_font=null,e.eff_group=null,e.overPrefab=null,e.setPrefab=null,e.shopPrefab=null,e.resultPanel=null,e.guide_to_addcup=!1,e.clickboo=!1,e.forbidClick=!1,e}return r(e,t),e.prototype.start=function(){var t=this;cc.sys.platform===cc.sys.WECHAT_GAME&&(p.default.getInstance().preloadBanner(),p.default.getInstance().preloadExcitation(),p.default.getInstance().preloadFullScreen(),p.default.getInstance().preloadGrid()),s.default.getInstance().addListen(a.CUSTOM_RESET,this.onResetGame,this),s.default.getInstance().addListen(a.CUSTOM_NEXT_LEV,this.runToNext,this),s.default.getInstance().addListen(a.CUSTOM_FINISH,this.gameFinish,this),s.default.getInstance().addListen(a.CUSTOM_REFRESH,this.onRefreshStep,this),s.default.getInstance().addListen(a.CUSTOM_END_JUDGE,this.isGameFail,this),s.default.getInstance().addListen(a.CUSTOM_SHOW_ANI,this.showMain,this),cc.Canvas.instance.node.on(cc.Node.EventType.TOUCH_END,this.onCloseGrid,this),c.default.gameCom.opacity=255,c.default.gameCom.parent=this.node.getChildByName("content"),this.gameCom=c.default.gameCom.getComponent(u.default),d.default.getInstance().adapterNode(this.set_btn.node.parent),d.default.getInstance().adapterNode(this.reset_btn.node.parent),d.default.getInstance().adapterNode(this.jump_btn.node.parent),d.default.getInstance().adapterNode(this.prompt_btn.node.parent),d.default.getInstance().adapterNode(this.shop_btn.node.parent),d.default.getInstance().adapterNode(this.levelLab.node.parent),this.showBtnAni(),this.refreshLab(),this.scheduleOnce(function(){t.gameCom.registEvent(),t.gameCom.startEnterAni()}),6==c.default.birdLev&&0==c.default.AppDataObj.add_guide?(this.guide_to_addcup=!0,this.guide_AddBranch(!0)):c.default.birdLev>6&&(this.guide_to_addcup=!1);var e=this.node.getChildByName("mainshow"),n=e.getChildByName("upnode");e.getChildByName("goHomeParent").y=n.y=-c.default.bannerTop-245,p.default.getInstance().showBanner()},e.prototype.onCloseGrid=function(){},e.prototype.showMain=function(){this.node.getChildByName("oper_mark").active=!1},e.prototype.isGameFail=function(t){var e=t.detail.canPoll,n=this.node.getChildByName("notmove");e?n.active=!1:(n.active=!0,this.prompt_btn.interactable=!1,c.default.AppDataObj.prop_propmt<=0&&(this.prompt_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!1))},e.prototype.showBtnAni=function(){for(var t=0;t<2;t++)(e=this.btn_arrs[t]).y+=10,cc.tween(e).then(cc.tween().to(.3,{y:e.y-10,opacity:255})).start();for(t=2;t<this.btn_arrs.length;t++){var e;(e=this.btn_arrs[t]).y-=10,cc.tween(e).then(cc.tween().to(.3,{y:e.y+10,opacity:255})).start()}},e.prototype.setData=function(){this.levelLab.string="l "+c.default.birdLev},e.prototype.openSetPanel=function(){var t=this,e=this,n=setTimeout(function(){if(clearTimeout(n),t.setPrefab){var o=cc.instantiate(t.setPrefab);e.resultPanel=o,o.name="set",cc.Canvas.instance.node.addChild(o,100),t.clickboo=!1}else cc.resources.load("prefabs/SetPage",function(t,n){if(t)cc.log("Prefab error:"+t);else if(n instanceof cc.Prefab){if(!c.default.gameComplete){this.setPrefab=n;var o=cc.instantiate(n);e.resultPanel=o,o.name="set",cc.Canvas.instance.node.addChild(o,100),this.clickboo=!1}}else cc.log("Prefab error")}.bind(e))},50)},e.prototype.openShopPanel=function(){var t=this,e=this,n=setTimeout(function(){if(clearTimeout(n),t.shopPrefab){var o=cc.instantiate(t.shopPrefab);e.resultPanel=o,o.name="set",cc.Canvas.instance.node.addChild(o,100),t.clickboo=!1}else cc.resources.load("prefabs/ShopPage",function(t,n){if(t)cc.log("Prefab error:"+t);else if(n instanceof cc.Prefab){if(!c.default.gameComplete){this.shopPrefab=n;var o=cc.instantiate(n);e.resultPanel=o,o.name="shop",cc.Canvas.instance.node.addChild(o,100),this.clickboo=!1}}else cc.log("Prefab error")}.bind(e))},50)},e.prototype.onClick=function(t,e){var n=this,o=c.default.gameComplete||this.forbidClick||this.gameCom.checkIsRunning()||1==c.default.birdLev||2==c.default.birdLev||this.clickboo||!c.default.aniFinish;if(c.default.waitTime=0,!o)switch(e){case"menu":if(cc.Canvas.instance.node.getChildByName("set"))return;this.node.getChildByName("oper_mark").active=!0,l.default.getInstance().playEffect(a.AudioEnum.common_click),this.clickboo=!0,this.openSetPanel();break;case"shop":if(cc.Canvas.instance.node.getChildByName("shop"))return;this.node.getChildByName("oper_mark").active=!0,l.default.getInstance().playEffect(a.AudioEnum.common_click),this.clickboo=!0,this.openShopPanel();break;case"again":this.clickboo=!0,l.default.getInstance().playEffect(a.AudioEnum.resetGame),p.default.getInstance().showFullScreen(0);var r=this,i=setTimeout(function(){clearTimeout(i),r.clickboo=!1,r.onResetGame(null)},300);break;case"back":if(l.default.getInstance().playEffect(a.AudioEnum.common_click),this.clickboo=!0,c.default.AppDataObj.prop_back<=0){if(c.default.birdLev<5)return void(this.clickboo=!1);var s=this,u=null;return p.default.getInstance().hideBanner(),p.default.getInstance().showExcitation(function(t){p.default.getInstance().showBanner(),1==t&&(0==c.default.AppDataObj.prop_back&&(c.default.AppDataObj.prop_back+=5),c.default.getInstance().saveData()),n.clickboo=!1,u&&(clearTimeout(u),u=null),n.refreshLab()},this),void(u=setTimeout(function(){clearTimeout(u),s.clickboo=!1},500))}this.gameCom.undoAction()&&(this.gameCom.rebackNormal(),this.gameRecoverRefresh(),c.default.AppDataObj.prop_back-=1,c.default.game_step-=1,c.default.rollback+=1,this.refreshLab(),c.default.getInstance().saveData()),this.clickboo=!1,this.refreshLab();break;case"add":if(l.default.getInstance().playEffect(a.AudioEnum.common_click),this.clickboo=!0,this.guide_to_addcup)return this.guide_to_addcup=!1,c.default.AppDataObj.add_guide=1,c.default.getInstance().saveData(),this.guide_AddBranch(!1),c.default.addtube+=1,c.default.isAddBranch=!0,this.add_btn.interactable=!1,this.add_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!1,this.gameCom.addBranchEntity(),this.clickboo=!1,void this.gameRecoverRefresh();var d;if(c.default.AppDataObj.prop_addcup<=0)return c.default.birdLev<5?void(this.clickboo=!1):(p.default.getInstance().hideBanner(),p.default.getInstance().showExcitation(function(t){p.default.getInstance().showBanner(),1==t&&(c.default.banner_state=!1,c.default.addtube+=1,c.default.isAddBranch=!0,n.add_btn.interactable=!1,n.add_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!1,n.gameCom.addBranchEntity(),n.gameRecoverRefresh()),n.refreshLab(),d&&(clearTimeout(d),d=null),n.clickboo=!1},this),void(d=setTimeout(function(){clearTimeout(d),d=null,(void 0).clickboo=!1},500)));!c.default.isAddBranch&&c.default.AppDataObj.prop_addcup>0&&(this.gameRecoverRefresh(),c.default.AppDataObj.prop_addcup-=1,c.default.addtube+=1,c.default.isAddBranch=!0,this.add_btn.interactable=!1,this.add_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!1,this.refreshLab(),c.default.getInstance().saveData(),this.gameCom.addBranchEntity()),this.clickboo=!1,this.refreshLab();break;case"jump":if(this.clickboo=!0,l.default.getInstance().playEffect(a.AudioEnum.common_click),c.default.AppDataObj.prop_jumplev<=0)return c.default.birdLev,void(this.clickboo=!1);this.gameRecoverRefresh(),c.default.AppDataObj.prop_back=3,c.default.addtube=0,c.default.isAddBranch=!1,c.default.AppDataObj.prop_jumplev-=1,c.default.birdLev+=1,c.default.getInstance().saveData(),this.gameCom.releaseAni(),l.default.getInstance().playEffect(a.AudioEnum.gameSucc),this.showOverGame(),c.default.AppDataObj.prop_jumplev<=0&&(this.jump_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!0,this.jump_btn.node.getChildByName("Background").getChildByName("adShow").active=!0),this.clickboo=!1,this.refreshLab()}},e.prototype.guide_AddBranch=function(t){var e=this,n=this.node.getChildByName("mainshow");n.getChildByName("upnode").getChildByName("guide_tip").active=t,n.getChildByName("upnode").getChildByName("free").active=t;var o=this.eff_group.getChildByName("guide_hand");o.active=t,this.scheduleOnce(function(){var t=e.add_btn.node.parent.convertToWorldSpaceAR(e.add_btn.node.getPosition()),n=e.eff_group.convertToNodeSpaceAR(t);o.setPosition(cc.v2(n.x+75,n.y-5))});var r=this.add_btn.node.getChildByName("Background"),i=r.getChildByName("common_point"),a=r.getChildByName("stepNum");i.active=!t,a.active=!t;var s=r.getChildByName("adShow");c.default.AppDataObj.prop_addcup<=0&&0==t?s.active=!0:s.active=!1},e.prototype.gameRecoverRefresh=function(){this.node.getChildByName("notmove").active=!1},e.prototype.refreshLab=function(){this.levelLab.string="l "+c.default.birdLev,this.refreshSingleFunctionBtn(this.add_btn,c.default.AppDataObj.prop_addcup),this.refreshSingleFunctionBtn(this.back_btn,c.default.AppDataObj.prop_back),this.refreshSingleFunctionBtn(this.jump_btn,c.default.AppDataObj.prop_jumplev),this.refreshSingleFunctionBtn(this.prompt_btn,c.default.AppDataObj.prop_propmt),this.prompt_btn.interactable=!c.default.hideNode,c.default.AppDataObj.prop_propmt<=0&&(this.prompt_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!c.default.hideNode),this.guide_tip_font.active=1==c.default.birdLev||2==c.default.birdLev,c.default.AppDataObj.prop_back>0&&!this.gameCom.checkIsRunning()&&(this.gameCom.getActionNum()>0?this.back_btn.interactable=!0:this.back_btn.interactable=!1)},e.prototype.refreshSingleFunctionBtn=function(t,e){if(t.node.getChildByName("Background").getChildByName("stepNum").getComponent(cc.Label).string=e.toString(),(t==this.add_btn||t==this.back_btn)&&c.default.birdLev>=5){var n=t.node.getChildByName("Background").getChildByName("adShow");n.active=e<=0,n.active&&(this.back_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!0)}},e.prototype.onResetGame=function(){c.default.waitTime=0,this.gameRecoverRefresh(),this.resultPanel=null,c.default.reopenNum+=1,this.nextLevel();var t=this,e=setTimeout(function(){clearTimeout(e),t.clickboo=!1},600)},e.prototype.nextLevel=function(t){var e=this;void 0===t&&(t=!0),c.default.AppDataObj.prop_back=3,c.default.getInstance().saveData(),c.default.aniFinish=!1,this.resultPanel=null,this.guide_to_addcup=!1,this.clickboo=!1,this.gameCom.initialize(),this.gameCom.initCfg(function(){e.refreshLab(),e.gameCom.initView(),e.scheduleOnce(function(){e.gameCom.startEnterAni()})})},e.prototype.release=function(){s.default.getInstance().removeListen(a.CUSTOM_RESET),s.default.getInstance().removeListen(a.CUSTOM_FINISH),s.default.getInstance().removeListen(a.CUSTOM_NEXT_LEV),s.default.getInstance().removeListen(a.CUSTOM_END_JUDGE),s.default.getInstance().removeListen(a.CUSTOM_REFRESH),s.default.getInstance().removeListen(a.CUSTOM_SHOW_ANI),cc.Canvas.instance.node.off(cc.Node.EventType.TOUCH_END,this.onCloseGrid,this)},e.prototype.onRefreshStep=function(t){t.detail&&null!=t.detail.forbid&&(this.forbidClick=t.detail.forbid),this.refreshLab()},e.prototype.runToNext=function(){if(c.default.waitTime=0,c.default.gameComplete=!1,this.forbidClick=!1,this.gameCom.show(),cc.tween(this.add_btn.node).then(cc.tween().to(.5,{opacity:255,y:0})).start(),cc.tween(this.back_btn.node).then(cc.tween().to(.5,{opacity:255,y:0})).start(),cc.tween(this.jump_btn.node).then(cc.tween().to(.5,{opacity:255,y:0})).start(),cc.tween(this.shop_btn.node).then(cc.tween().to(.5,{opacity:255,y:0})).start(),cc.tween(this.set_btn.node).then(cc.tween().to(.5,{opacity:255,y:0})).start(),cc.tween(this.reset_btn.node).then(cc.tween().to(.5,{opacity:255,y:0})).start(),cc.tween(this.levelLab.node.parent).then(cc.tween().to(.5,{opacity:255,y:0})).start(),cc.tween(this.prompt_btn.node).then(cc.tween().to(.5,{opacity:255})).start(),1!=c.default.birdLev&&2!=c.default.birdLev||cc.tween(this.guide_tip_font).then(cc.tween().to(.5,{opacity:255})).start(),this.add_btn.interactable=!0,this.add_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!0,this.jump_btn.interactable=!0,this.jump_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!0,this.prompt_btn.interactable=!0,this.prompt_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!0,this.shop_btn.interactable=!0,this.refreshLab(),this.setData(),this.nextLevel(),6==c.default.birdLev&&0==c.default.AppDataObj.add_guide)this.guide_to_addcup=!0,this.guide_AddBranch(!0);else if(c.default.birdLev>6){this.guide_to_addcup=!1;var t=this.node.getChildByName("mainshow");t.getChildByName("upnode").getChildByName("guide_tip").active=!1,t.getChildByName("upnode").getChildByName("free").active=!1,this.eff_group.getChildByName("guide_hand").active=!1;var e=this.add_btn.node.getChildByName("Background"),n=e.getChildByName("common_point"),o=e.getChildByName("stepNum");n.active=!0,o.active=!0}},e.prototype.gameFinish=function(t){var e=this;void 0===t&&(t=!1),this.resultPanel&&(this.resultPanel.removeFromParent(),this.resultPanel=null),1!=c.default.birdLev&&2!=c.default.birdLev||cc.tween(this.guide_tip_font).then(cc.tween().to(.5,{opacity:0})).start(),cc.tween(this.add_btn.node).then(cc.tween().to(.5,{opacity:0,y:-60})).start(),cc.tween(this.back_btn.node).then(cc.tween().to(.5,{opacity:0,y:-60})).start(),cc.tween(this.jump_btn.node).then(cc.tween().to(.5,{opacity:0,y:-60})).start(),cc.tween(this.shop_btn.node).then(cc.tween().to(.5,{opacity:0,y:-60})).start();var n=this.node.getChildByName("mainshow");n.getChildByName("upnode").getChildByName("guide_tip").active=!1,n.getChildByName("upnode").getChildByName("free").active=!1,this.eff_group.getChildByName("guide_hand").active=!1,this.gameCom.hide(),cc.tween(this.set_btn.node).then(cc.tween().to(.5,{opacity:0,y:60})).start(),cc.tween(this.reset_btn.node).then(cc.tween().to(.5,{opacity:0,y:60})).start(),cc.tween(this.levelLab.node.parent).then(cc.tween().to(.5,{opacity:0,y:60})).start(),cc.tween(this.prompt_btn.node).then(cc.tween().to(.5,{opacity:0})).start(),this.forbidClick=!0,c.default.isAddBranch=!1,this.add_btn.interactable=!1,c.default.AppDataObj.prop_back=3,this.add_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!1,this.back_btn.interactable=!1,this.back_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!1,this.jump_btn.interactable=!1,this.jump_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!1,this.prompt_btn.interactable=!1,this.prompt_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!1,this.shop_btn.interactable=!1,cc.tween(this.node).delay(1).call(function(){l.default.getInstance().playEffect(a.AudioEnum.gameSucc),e.showOverGame(),p.default.getInstance().showFullScreen(1),c.default.birdLev++,cc.sys.localStorage.setItem("lev",c.default.birdLev),c.default.getInstance().saveData()}).start()},e.prototype.showOverGame=function(){if(p.default.getInstance().hideBanner(),this.overPrefab){var t=cc.instantiate(this.overPrefab);t.name="result",cc.Canvas.instance.node.addChild(t,100)}else cc.resources.load("prefabs/ResultGame",function(t,e){if(t)cc.log("Prefab error:"+t);else if(e instanceof cc.Prefab){this.overPrefab=e;var n=cc.instantiate(e);n.name="result",cc.Canvas.instance.node.addChild(n,100)}else cc.log("Prefab error")}.bind(this))},e.prototype.update=function(){},e.prototype.showShop=function(){},i([y(cc.Button)],e.prototype,"back_btn",void 0),i([y(cc.Button)],e.prototype,"add_btn",void 0),i([y(cc.Button)],e.prototype,"jump_btn",void 0),i([y(cc.Button)],e.prototype,"shop_btn",void 0),i([y(cc.Button)],e.prototype,"prompt_btn",void 0),i([y(cc.Button)],e.prototype,"reset_btn",void 0),i([y(cc.Button)],e.prototype,"set_btn",void 0),i([y({type:[cc.Node]})],e.prototype,"btn_arrs",void 0),i([y(cc.Label)],e.prototype,"levelLab",void 0),i([y(cc.Node)],e.prototype,"guide_tip_font",void 0),i([y(cc.Node)],e.prototype,"eff_group",void 0),i([f],e)}(cc.Component);n.default=_,cc._RF.pop()},{"./RunCore":"RunCore","./common/AppData":"AppData","./common/GlobalInferfance":"GlobalInferfance","./control/AdsCenter":"AdsCenter","./control/AudioCenter":"AudioCenter","./control/EventController":"EventController","./util/ModifyNode":"ModifyNode"}],GlobalFunc:[function(t,e,n){"use strict";cc._RF.push(e,"75d85ydJdBKWIYHTj4V+TJC","GlobalFunc"),Object.defineProperty(n,"__esModule",{value:!0}),n.solve=n.localOper=n.shuffle=n.formatTime=n.globalData=n.TIME_FORMAT1=void 0,n.TIME_FORMAT1="00:00",n.globalData={soundBoo:!0,gameData:{},uid:"",noAd:!1},n.formatTime=function(t,e){var o="";switch(e){case n.TIME_FORMAT1:var r=t/60>>0,i=t-60*r;o=(r<10?"0"+r:r)+":"+(i<10?"0"+i:i)}return o},n.shuffle=function(t){for(var e,n=t.length;n;){var o=Math.floor(Math.random()*n--);e=[t[n],t[o]],t[o]=e[0],t[n]=e[1]}return t},function(t){function e(t,e){localStorage.setItem(t,e)}t.LOCAL_LOCK_GUIDE="10001",t.LOCAL_LOCK_LEVEL="10002",t.LOCAL_BEST_TIME="10003",t.LOCAL_GAME_DATA="10004",t.saveToLocal=e,t.getValue=function(t){var n=localStorage.getItem(t);return n||e(t,n=""),n}}(n.localOper||(n.localOper={}));var o=[[0,1],[0,-1],[-1,0],[1,0]],r={copy:function(t){for(var e=new Array(t.length),n=0;n<e.length;n++)t[n]instanceof Array?e[n]=this.copy(t[n]):e[n]=t[n];return e},random_pintu:function(t,e){for(var n=this.get_array([t,e],0),i=0;i<t;i++)for(var a=0;a<e;a++)n[i][a]=(i*e+a+1)%(t*e);var c=[t-1,e-1];for(i=0;i<t*e*16;i++){var s=o[Math.floor(4*Math.random())],l=[c[0]+s[0],c[1]+s[1]],u=l[0],d=l[1];t>u&&u>=0&&d>=0&&e>d&&(r.swap(n,[u,d],[c[0],c[1]]),c=[u,d])}return n},swap:function(t,e,n){var o=t[e[0]][e[1]];t[e[0]][e[1]]=t[n[0]][n[1]],t[n[0]][n[1]]=o},legal:function(t,e,n){return t.length>e&&e>=0&&n>=0&&n<t[0].length},get_array:function(t,e){if(!(t instanceof Array))throw new Error("'shape' should be a array ");for(var n=new Array(t[0]),o=0;o<t[0];o++)1==t.length?n[o]=e:n[o]=this.get_array(t.slice(1),e);return n},flat:function(t){for(var e=[],n=0;n<t.length;n++)if(t[n]instanceof Array)for(var o=0,r=this.flat(t[n]);o<r.length;o++){var i=r[o];e.push(i)}else e.push(t[n]);return e},is_solvable:function(t){var e=this.get_reverse(r.flat(t)),n=t.length;return t[0].length%2==0&&(e^=n-1-r.get_space(t)[0]&1),e%2==0},array_eq:function(t,e){if(t.length!=e.length)throw new Error("length not equal");for(var n=0;n<t.length;n++)if(t[n]instanceof Array){if(!(e[n]instanceof Array))return!1;if(!r.array_eq(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0},get_space:function(t){for(var e=0;e<t.length;e++)for(var n=0;n<t[e].length;n++)if(0==t[e][n])return[e,n]},get_reverse:function(t){for(var e=0,n=0;n<t.length;n++)if(0!=t[n])for(var o=n+1;o<t.length;o++)0!=t[o]&&t[n]>t[o]&&(e+=1);return e},over:function(t){for(var e=0;e<t.length;e++)for(var n=0;n<t[0].length;n++)if(t[e][n]!=(e*t[0].length+n+1)%(t.length*t[0].length))return!1;return!0},get_angle:function(t,e,n,o){var r=(t*n+e*o)/Math.hypot(t,e)/Math.hypot(n,o);return Math.acos(r)},get_direction:function(t,e){for(var n=0;n<o.length;n++){var r=this.get_angle(o[n][0],o[n][1],t,e);if(Math.abs(r)<Math.PI/6)return n}return-1}};n.solve=function(){var t=0,e=0,n=null,i=null,a=null,c="",s=[0,2,1,3,1,2,0,0,3,1];function l(t){for(var e=0;e<o.length;e++)if(o[e][0]==t[0]&&o[e][1]==t[1])return"\u5de6\u53f3\u4e0b\u4e0a"[e];throw new Error("imposible to reach here")}function u(t,e){if(0!=n[t[0]][t[1]]){var o=t;t=e,e=o}c+=l([e[0]-t[0],e[1]-t[1]]),r.swap(n,t,e),i[n[t[0]][t[1]]]=[t[0],t[1]],i[n[e[0]][e[1]]]=[e[0],e[1]]}function d(n,o){return i[(n*e+o+1)%(t*e)]}function p(){for(var o=0;o<t;o++)for(var r=0;r<e;r++)i[n[o][r]]=[o,r]}function h(i,c,s,l,u,d){var p=r.get_array([t,e],-1),h=[];h.push([i,c]),p[i][c]=0;var f=r.get_array([t,e],0);(function(){for(;h.length>0;)for(var t=h.shift(),e=0,i=o;e<i.length;e++){var c=i[e],y=[t[0]+c[0],t[1]+c[1]],_=y[0],g=y[1];if(r.legal(n,_,g)&&-1==p[_][g]&&(_!=u||g!=d)&&0==a[_][g]&&(h.push([_,g]),p[_][g]=p[t[0]][t[1]]+1,f[_][g]=t,_==s&&g==l))return}})();for(var y=[],_=[s,l],g=_[0],m=_[1];y.push([g,m]),g!=i||m!=c;){var v=f[g][m];g=v[0],m=v[1]}return y.reverse()}function f(n,o,r,i){for(var a=d(t-1,e-1),c=h(a[0],a[1],n,o,r,i),s=1;s<c.length;s++)u(c[s],c[s-1])}function y(t,e,n,o){if(4!=arguments.length)throw new Error("move error");for(var r=h(t,e,n,o,null,null),i=1;i<r.length;i++)f(r[i][0],r[i][1],r[i-1][0],r[i-1][1]),u(r[i],r[i-1])}function _(n){for(var r=d(t-1,e-1),i=r[0],a=r[1],c=0,s=n;c<s.length;c++){var l=s[c],p=i-o[l][0],h=a-o[l][1];u([p,h],[i,a]),i=p,a=h}}function g(n){if(r.is_solvable(n)){for(var o=0;o<t-2;o++)for(var i=0;i<e-2;i++){var c=d(o,i);y(c[0],c[1],o,i),a[o][i]=!0}for(o=0;o<e-2;o++){var l=d(t-1,o);if(y(l[0],l[1],t-1,o),r.array_eq(d(t-1,e-1),[t-2,o])&&u([t-2,o],[t-2,o+1]),!r.array_eq(d(t-2,o),[t-2,o])){var p=d(t-2,o);y(p[0],p[1],t-2,o+2),f(t-2,o+1,t-2,o+2),_(s)}}for(o=0;o<t-2;o++){var h=d(o,e-2);if(y(h[0],h[1],o,e-2),r.array_eq(d(t-1,e-1),[o,e-1])&&u([o,e-1],[o+1,e-1]),!r.array_eq(d(o,e-1),[o,e-1])){var g=d(o,e-1);y(g[0],g[1],o+2,e-1),f(o+1,e-1,o+2,e-1),_(s.map(function(t){return[3,2,0,1][t]}))}}var m=d(t-2,e-2);y(m[0],m[1],t-2,e-2);var v=d(t-2,e-1);y(v[0],v[1],t-2,e-1);var b=d(t-1,e-2);y(b[0],b[1],t-1,e-2)}else console.log("unsolvable")}return function(o){return n=r.copy(o),this.a=n,t=n.length,e=n[0].length,i=r.get_array([t,e,2],-1),p(),a=r.get_array([t,e],0),c="",g(n),c}}(),cc._RF.pop()},{}],GlobalInferfance:[function(t,e,n){"use strict";cc._RF.push(e,"d0408GqRT1DwI4WaB+5sweM","GlobalInferfance"),Object.defineProperty(n,"__esModule",{value:!0}),n.ShopShowType=n.BottleArr=n.POS=n.AudioEnum=n.CUSTOM_CHANGE_SKIN=n.CUSTOM_BUY_SKIN=n.CUSTOM_UPDATE_SHOP=n.CUSTOM_RESTORE=n.CUSTOM_NEXT_GUIDE=n.CUSTOM_UPDATE_INFO=n.CUSTOM_UPDATE_STATE=n.CUSTOM_END_JUDGE=n.CUSTOM_REFRESH=n.CUSTOM_READY=n.CUSTOM_SHOW_ANI=n.CUSTOM_RESET=n.CUSTOM_NEXT_LEV=n.CUSTOM_FINISH=n.adCd=n.CustomLocalStorageKey=void 0,function(t){t.LEV="lev",t.ANI_INDEX="selectEntitys",t.CUP_INDEX="selectBranch",t.BG_INDEX="selectBg"}(n.CustomLocalStorageKey||(n.CustomLocalStorageKey={})),n.adCd=30,n.CUSTOM_FINISH="10001",n.CUSTOM_NEXT_LEV="10002",n.CUSTOM_RESET="10003";var o=cc._decorator;o.ccclass,o.property,n.CUSTOM_SHOW_ANI="10004",n.CUSTOM_READY="10005",n.CUSTOM_REFRESH="10006",n.CUSTOM_END_JUDGE="10007",n.CUSTOM_UPDATE_STATE="10009",n.CUSTOM_UPDATE_INFO="10010",n.CUSTOM_NEXT_GUIDE="10011",n.CUSTOM_RESTORE="10012",n.CUSTOM_UPDATE_SHOP="10013",n.CUSTOM_BUY_SKIN="20013",n.CUSTOM_CHANGE_SKIN="20014",function(t){t.common_click="common_click",t.gameSucc="gamewin",t.resetGame="common_click",t.flyout="flys",t.hark1="type_hark_1",t.hark2="type_hark_2",t.hark3="type_hark_3",t.hark4="type_hark_4",t.hark5="type_hark_5",t.hark6="type_hark_6",t.hark7="type_hark_7",t.hark8="type_hark_8",t.hark9="type_hark_9",t.Fly_2_2="collect_fly",t.hark10="type_hark_10",t.Collect="Collect",t.GetAward="getreward",t.collect_gold="collect_gold",t.PopupLayer="openpop"}(n.AudioEnum||(n.AudioEnum={}));n.POS=function(){},n.BottleArr=[[3,1,0,0],[5,5,0,0],[7,10,3,5],[9,30,3,7],[12,100,2,9]],function(t){t[t.bird=1]="bird",t[t.platform=2]="platform",t[t.bg=3]="bg",t[t.defaultBird=9]="defaultBird"}(n.ShopShowType||(n.ShopShowType={})),cc._RF.pop()},{}],GuideType:[function(t,e,n){"use strict";cc._RF.push(e,"16b0dliMChHpoI97BXB5onz","GuideType");var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,a=(r.property,function(){function t(){}return t.getGuideById=function(t){return this.relation_data[t]},t.getLockShow=function(){var t=[];for(var e in this.relation_data)if(this.relation_data[e].tip&&0!=this.relation_data[e].level){var n={};for(var o in this.relation_data[e])n[o]=this.relation_data[e][o];t.push(n)}return t.sort(function(t,e){return t.level-e.level})},t.getGuideInfoByLevel=function(){for(var t in this.relation_data)if(1==this.relation_data[t].level){var e={};for(var n in this.relation_data[t])e[n]=this.relation_data[t][n];return e}return null},t.relation_data={1:{guideId:1,level:3,tip:"Move BOXING GLOVE to somewhere to clear a line of things.",icon:"tmp_punch"},2:{level:6,guideId:2,tip:"Rotate the jewel",icon:"rotate"},3:{level:11,guideId:3,tip:"Exchanged for 3 single gems",icon:"prop_refresh"},4:{level:16,guideId:4,tip:"Use the bomb to eliminate all targets on 2 rows and columns",icon:"level_prop_bomb"},5:{level:21,guideId:5,tip:"Collect stars in the gem by removing a line of gems",icon:"collect_star"},6:{level:2,guideId:6,tip:"Two Magnets placed on the same line interact and clean the line",icon:"collect_magnet"},7:{level:10,guideId:7,tip:"Eliminate bubble gems to break bubbles",icon:"collect_bubble"},8:{level:15,guideId:8,tip:"Drop and collect the diamonds",icon:"collect_transfer"},9:{level:5,guideId:9,tip:"Eliminate gems to clean the ice",icon:"game_block_ice_1"},10:{level:30,guideId:10,tip:"Note occurs after music box removed",icon:"tmp_music_box"},11:{level:40,guideId:11,tip:"Collect the balloon before it explodes",icon:"collect_bomb"},13:{level:61,guideId:13,tip:"Collect colorful gems!",icon:"collect_dreamgem"},14:{level:71,guideId:14,tip:"Gems generated by the Gem Machine can fill up the line",icon:"tmp_gemmachine"},15:{level:0,guideId:15,tip:"To remove 2 rows or 2 columns of bubble gems at the same time to break the bubbles",icon:"collect_bubble"},17:{level:0,guideId:17},18:{level:96,tip:"Open the gift box by removing the same colored gems",icon:"tmp_gembox",guideId:18},19:{level:120,guideId:19,tip:"Nearby blocks in a 3*3 area will be frozen after an explosion",icon:"tmp_icebomb"},20:{level:50,guideId:20,tip:"Conveyor belt can move the gems",icon:"tmp_conveyor"},21:{level:141,guideId:21,tip:"The ice machine freezes the gems Burst it!",icon:"tmp_icemachine"},23:{level:201,guideId:23,tip:"Collect the Pearl when the Clamshell opens",icon:"collect_pearl"},24:{level:251,guideId:24,tip:"Clear the Magic Hat to collect pigeons",icon:"collect_pigeon"}},o([i],t)}());n.default=a,cc._RF.pop()},{}],MarkPool:[function(t,e,n){"use strict";cc._RF.push(e,"11f8cpdCXFC+bRBcbpEUvAK","MarkPool");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.createPool=function(t,e){this._pool=new cc.NodePool,this.__prefab=t;for(var n=0;n<e;n++){var o=cc.instantiate(t);this._pool.put(o),this.__scale=o.scale}},e.getFromPool=function(){var t=null;if(this._pool.size()>0)t=this._pool.get();else if(this.__prefab){var e=cc.instantiate(this.__prefab);this._pool.put(e),t=this._pool.get()}return t},e.putInPool=function(t){t.scale=this.__scale,this._pool.put(t)},e.clearAll=function(){this._pool&&this._pool.clear(),this.__prefab=null,this.__scale=1},e.__scale=1,i([c],e)}(cc.Component));n.default=s,cc._RF.pop()},{}],MathTools:[function(t,e,n){"use strict";cc._RF.push(e,"766eaWRt0hFlaZhNjTQGNdk","MathTools");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.seedRandom=function(){return this.seed=(9301*this.seed+49297)%233280,this.seed/233280},e.deepCopy=function(t){for(var e=[],n=0;n<t.length;n++){e.push([-1,-1,-1,-1,-1,-1,-1,-1]);for(var o=0;o<t[n].length;o++)e[n][o]=t[n][o]}return e},e.Bezier2=function(t,e,n,o){var r=cc.bezierTo(e,n);r.easing(cc.easeSineOut());var i=cc.sequence(r,cc.callFunc(function(){o()}));t.runAction(i)},e.shakeEffect=function(t,e){var n={};n.x=e.x,n.y=e.y,e.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.02,cc.v2(5+n.x,7+n.y)),cc.moveTo(.02,cc.v2(-6+n.x,7+n.y)),cc.moveTo(.02,cc.v2(-13+n.x,3+n.y)),cc.moveTo(.02,cc.v2(3+n.x,-6+n.y)),cc.moveTo(.02,cc.v2(-5+n.x,5+n.y)),cc.moveTo(.02,cc.v2(2+n.x,-8+n.y)),cc.moveTo(.02,cc.v2(-8+n.x,-10+n.y)),cc.moveTo(.02,cc.v2(3+n.x,10+n.y)),cc.moveTo(.02,cc.v2(0+n.x,0+n.y))))),setTimeout(function(){e.stopAllActions(),e.setPosition(n.x,n.y)},1e3*t)},e.seed=5,i([c],e)}(cc.Component));n.default=s,cc._RF.pop()},{}],MessageController:[function(t,e,n){"use strict";cc._RF.push(e,"11925X/MNtMlY4ZbfOzq0Fb","MessageController");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../base/BaseInst"),c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.getInstance=function(){return t.getInstance.call(this)},e.prototype.addListen=function(t,e,n){cc.Canvas.instance.node.on(t,e.bind(n))},e.prototype.emitListen=function(t,e){void 0===e&&(e=null);var n=new cc.Event.EventCustom(t,!0);n.setUserData(e),cc.Canvas.instance.node.dispatchEvent(n)},e.prototype.removeListen=function(t){cc.Canvas.instance.node.off(t)},i([s],e)}(a.BaseInst));n.default=l,cc._RF.pop()},{"../base/BaseInst":"BaseInst"}],ModifyNode:[function(t,e,n){"use strict";cc._RF.push(e,"3a78eh9LZxK26XIlHTJjKhK","ModifyNode");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../base/BaseInst"),c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.getInstance=function(){return t.getInstance.call(this)},e.prototype.adapterNode=function(t){var e=cc.winSize.height/cc.winSize.width,n=cc.view.getDesignResolutionSize();if(e<=1.4){var o=cc.winSize.width/n.width,r=cc.winSize.height/n.height,i=Math.min(o,r);t.scale=i-.1}else if(e>1.4&&e<1.8)if(o=cc.winSize.width/n.width,(r=cc.winSize.height/n.height)>o){var a=o/r;t.scaleX*=a,t.scaleY*=a}else a=r/o,t.scaleX*=a,t.scaleY*=a},i([s],e)}(a.BaseInst));n.default=l,cc._RF.pop()},{"../base/BaseInst":"BaseInst"}],OtherNoAdTip:[function(t,e,n){"use strict";cc._RF.push(e,"9f38cZ1ZBZPpLvVsTPB+1B1","OtherNoAdTip");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){cc.game.addPersistRootNode(this.node),this.node.active=!1},e.prototype.showNoView=function(){var t=this;this.node.active=!0;var e=this.node.getChildByName("bg");e.active=!0,this.node.opacity=255;var n=this,o=setTimeout(function(){clearTimeout(o),cc.tween(t.node).then(cc.tween().to(.5,{opacity:0})).call(function(){n.node.active=!1,e.active=!1}).start()},1e3)},i([c],e)}(cc.Component));n.default=s,cc._RF.pop()},{}],OverContent:[function(t,e,n){"use strict";cc._RF.push(e,"522f6a8bfVIdpDqfIKc2Trl","OverContent");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../common/GlobalInferfance"),c=t("../common/AppData"),s=t("../control/EventController"),l=t("../control/AdsCenter"),u=cc._decorator,d=u.ccclass,p=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_next=null,e.untouch=null,e.result_node=null,e.aniFINISH=!1,e}return r(e,t),e.prototype.start=function(){var t=this;this.node.active=!0,this.untouch.active=!1,this.btn_next.active=!1,this.ske=this.result_node.getComponent(sp.Skeleton);var e=this.node.getChildByName("cnt").getChildByName("result_lock_bg"),n=this.node.getChildByName("cnt").getChildByName("progressBar");cc.tween(this.node).delay(.3).call(function(){e.scale=.1,e.opacity=0,cc.tween(e).then(cc.tween().to(.2,{scale:1,opacity:255})).start()}).delay(.1).call(function(){n.opacity=0,cc.tween(n).then(cc.tween().to(.2,{opacity:255})).start()}).start(),this.ske.setCompleteListener(function(e){"start"==(e.animation?e.animation.name:"")&&t.scheduleOnce(function(){e.animationStart=3,e.animationEnd=28,t.ske.setAnimation(1,"loop",!0),t.btn_next.active=!0,t.aniFINISH=!0})}),c.default.gameComplete=!1},e.prototype.onNextClick=function(){if(this.aniFINISH){this.ske.setAnimation(0,"end",!1),this.untouch.active=!0,this.btn_next.active=!1;var t=this.node.getChildByName("cnt").getChildByName("result_lock_bg"),e=this.node.getChildByName("cnt").getChildByName("progressBar");cc.tween(t).then(cc.tween().to(.5,{scale:0,opacity:0})).start(),e.active=!1,s.default.getInstance().emitListen(a.CUSTOM_NEXT_LEV),l.default.getInstance().showBanner(),this.node.removeFromParent()}},i([p(cc.Node)],e.prototype,"btn_next",void 0),i([p(cc.Node)],e.prototype,"untouch",void 0),i([p(cc.Node)],e.prototype,"result_node",void 0),i([d],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../common/AppData":"AppData","../common/GlobalInferfance":"GlobalInferfance","../control/AdsCenter":"AdsCenter","../control/EventController":"EventController"}],OverGame:[function(t,e,n){"use strict";cc._RF.push(e,"a3cd1k5//JFo6D7C5mI0X9T","OverGame");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../common/GlobalInferfance"),c=t("../common/AppData"),s=t("../control/EventController"),l=t("../control/AudioCenter"),u=t("../control/AdsCenter"),d=cc._decorator,p=d.ccclass,h=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickboo=!1,e}return r(e,t),e.prototype.onLoad=function(){var t=this.node.getChildByName("cnt").getChildByName("next_btn");t.active=!1,t.scale=.7,cc.tween(t).delay(1.5).call(function(){t.active=!0}).then(cc.tween().to(.23,{scale:1})).start();var e=this.node.getChildByName("cnt").getChildByName("ani").getComponent(dragonBones.ArmatureDisplay);e.addEventListener(dragonBones.EventObject.COMPLETE,function(){e.removeEventListener(dragonBones.EventObject.COMPLETE),e.playAnimation("newAnimation_2",0)},this)},e.prototype.start=function(){},e.prototype.onClick=function(t,e){switch(e){case"next":if(this.clickboo)return;this.clickboo=!0,c.default.gameComplete=!1,l.default.getInstance().playEffect(a.AudioEnum.resetGame),this.clickboo=!1,s.default.getInstance().emitListen(a.CUSTOM_NEXT_LEV),this.node.removeFromParent(),u.default.getInstance().showBanner()}},i([p],e)}(cc.Component));n.default=h,cc._RF.pop()},{"../common/AppData":"AppData","../common/GlobalInferfance":"GlobalInferfance","../control/AdsCenter":"AdsCenter","../control/AudioCenter":"AudioCenter","../control/EventController":"EventController"}],PointReport:[function(t,e,n){"use strict";cc._RF.push(e,"7bf4f7GrUdKm5kLqrr9O74u","PointReport"),Object.defineProperty(n,"__esModule",{value:!0}),n.PointReport=void 0;var o=t("../common/AppData"),r=cc._decorator;r.ccclass,r.property,function(t){t.ClickEvent={usr_device_type:"usr_device_type",usr_data_install:"usr_data_install",usr_data_round_start:"usr_data_round_start",usr_data_round_reopen:"usr_data_round_reopen",usr_data_game_end:"usr_data_game_end",usr_act_main_guid:"usr_act_main_guid",usr_data_restart:"usr_data_restart",usr_data_round_rollback:"usr_data_round_rollback",usr_data_round_addtube:"usr_data_round_addtube",usr_data_round_jumplev:"usr_data_round_jumplev",usr_data_round_prompt:"usr_data_round_prompt",wx_ad_show_request_succ:"wx_ad_show_request_succ",wx_ad_show_request_fail:"wx_ad_show_request_fail",wx_ad_excitation_finish:"wx_ad_excitation_finish",wx_ad_excitation_broken:"wx_ad_excitation_broken",wx_ad_show_request:"wx_ad_show_request",ta_mg_show:"ta_mg_show",ta_mg_hide:"ta_mg_hide",Difficulty_level:"Difficulty_level",usr_levels_completed:"usr_levels_completed",usr_data_game_error:"usr_data_game_error",game_drag:"game_drag",usr_game_scene:"usr_game_scene",usr_game_click_point:"usr_game_click_point",usr_gold_num:"usr_gold_num",usr_game_bg:"usr_game_bg",usr_game_platform:"usr_game_platform",usr_game_anims:"usr_game_anims",usr_own_bg:"usr_own_bg",usr_own_platform:"usr_own_platform",usr_own_anims:"usr_own_anims",usr_coin_get:"usr_coin_get",usr_shop_buy_skin:"usr_shop_buy_skin",usr_click_show_gameover:"usr_click_show_gameover"},t.reportInfo=function(t){if(0!=t.length)if(t.length%2>0)console.error(t);else{for(var e={},n=0;n<t.length;n++)n%2==0&&(e[""+t[n]]=t[n+1]);e.time=(new Date).getTime(),[].push(e),console.log(e)}},t.uploadUserInfo=function(){var e={};e[t.ClickEvent.usr_levels_completed]=o.default.birdLev,e[t.ClickEvent.usr_gold_num]=o.default.userGold,e[t.ClickEvent.usr_game_bg]=o.default.skinShop.use_bg,e[t.ClickEvent.usr_game_platform]=o.default.skinShop.use_platform,e[t.ClickEvent.usr_game_anims]=JSON.stringify(o.default.skinShop.use_anim),e[t.ClickEvent.usr_own_bg]=JSON.stringify(o.default.skinShop.own_bg),e[t.ClickEvent.usr_own_platform]=JSON.stringify(o.default.skinShop.own_platform),e[t.ClickEvent.usr_own_anims]=JSON.stringify(o.default.skinShop.own_anim)}}(n.PointReport||(n.PointReport={})),cc._RF.pop()},{"../common/AppData":"AppData"}],QuestType:[function(t,e,n){"use strict";cc._RF.push(e,"d736a5qo+FH4YJTEkDuMbqc","QuestType");var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,a=(r.property,function(){function t(){}return t.getItemQuestById=function(t){return[].concat(this.relation_data[t])},t.getQuestIdByBlockId=function(t){for(var e in this.relation_data)if(this.relation_data[e][0]==t)return parseInt(e);return-1},t.relation_data={},o([i],t)}());n.default=a,cc._RF.pop()},{}],RegGlobalNode:[function(t,e,n){"use strict";cc._RF.push(e,"a73639nJyRCi4389QY7doSW","RegGlobalNode");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){cc.game.addPersistRootNode(this.node)},i([c],e)}(cc.Component));n.default=s,cc._RF.pop()},{}],RunCore:[function(t,e,n){(function(o){"use strict";cc._RF.push(e,"094ecss3LZNsLNRrxkdRDkn","RunCore");var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var c=t("./BranchEntityControl"),s=t("./common/GlobalInferfance"),l=t("./common/AppData"),u=t("./control/EventController"),d=t("./control/AudioCenter"),p=t("./prefabs/Action"),h=t("./prefabs/MarkPool"),f=t("./prefabs/AniPool"),y=t("./util/CreateLevColor"),_=cc._decorator,g=_.ccclass,m=_.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cupCenter=null,e.aniLayer=null,e.eff_group=null,e.startModifyPos=!1,e.entityNodes={},e.runningAni=[],e.hideEntityNodes={},e.__idArr=[],e.all_ids=[],e.syncBranchs=[],e.RULE_COLOR=[[4],[4,5],[4,5,7],[4,5,7,1],[4,5,7,1,6],[4,5,7,1,6,8],[4,5,7,1,6,8,3],[4,5,7,1,6,8,3,9],[4,5,7,1,6,8,3,9,2],[4,5,7,1,6,8,3,9,2,10]],e.no_move_click_num=0,e.startPos=null,e.maxBirdLayer=0,e.guidePoints=[],e.guideNodes=[],e}return i(e,t),e.prototype.onLoad=function(){this.node.getChildByName("bgs").getChildByName(l.default.bg_index.toString()).active=!0},e.prototype.start=function(){},e.prototype.hide=function(){cc.tween(this.aniLayer).then(cc.tween().to(.5,{opacity:0})).start(),cc.tween(this.cupCenter.node).then(cc.tween().to(.5,{opacity:0})).start()},e.prototype.show=function(){this.aniLayer.opacity=255,this.cupCenter.node.opacity=255},e.prototype.registEvent=function(){u.default.getInstance().addListen(s.CUSTOM_NEXT_GUIDE,this.toNextGuide,this),u.default.getInstance().addListen(s.CUSTOM_RESTORE,this.removeHideNode,this),u.default.getInstance().addListen(s.CUSTOM_UPDATE_STATE,this.onRefreshState,this),u.default.getInstance().addListen(s.CUSTOM_UPDATE_INFO,this.onRefreshInfo,this),u.default.getInstance().addListen(s.CUSTOM_CHANGE_SKIN,this.useSkin,this)},e.prototype.useSkin=function(t){var e=t.detail.showId,n=t.detail.posId;switch(e){case s.ShopShowType.bird:case s.ShopShowType.defaultBird:var o=n+"_"+t.detail.posIndex;this.changeAssets({ani:o});break;case s.ShopShowType.platform:this.changeAssets({cup:n});break;case s.ShopShowType.bg:this.changeAssets({bg:n})}},e.prototype.onRefreshInfo=function(t){var e=this;if(t.detail.newBranch){for(var n in t.detail.useNew,this.entityNodes[t.detail.index]=[],this.entityNodes)if((i=this.entityNodes[n])&&i.length)for(var o=this.cupCenter.getEntityRealPos(Number(n),this.aniLayer),r=0;r<i.length;r++)i[r].getComponent(p.default).isStatic&&(i[r].scaleX*=this.cupCenter.layout_scale,i[r].scaleY*=this.cupCenter.layout_scale,i[r].setPosition(cc.v2(o[r].x,o[r].y)));for(var n in this.hideEntityNodes){var i;if((i=this.hideEntityNodes[n])&&i.length)for(var a=0;a<i.length;a++)i[a].egg.setPosition(i[a].bird.getPosition())}}else{var c=t.detail.pollNum,d=t.detail.from,h=t.detail.to,f=t.detail.quick,y=this.entityNodes[d],_=this.entityNodes[h],g=_.length;for(a=y.length-1;a>=0&&(f||(y[a].getComponent("Action").flyBoo=!0),_.push(y[a]),y.splice(a,1),!((c-=1)<=0));a--);var m=this.cupCenter.isBranchFull(h);if(-1!=m){m&&(this.runningAni=this.runningAni.concat(_),this.cupCenter.recordBranchs(h),l.default.colourReach.push(l.default.game_step),this.cupCenter.releasNodeAction(h));var v=this.cupCenter.getEntityRealPos(h,this.aniLayer),b=0,C=function(t){if(t>=g){var n=_[t];w.maxBirdLayer+=1,n.zIndex=w.maxBirdLayer,f?((d%2==0&&h%2!=0||h%2==0&&d%2!=0)&&(n.scaleX*=-1),n.getComponent("Action").flyBoo=!1,n.setPosition(v[t])):cc.tween(n).delay(.1*b).call(function(){e.flyToOtherBranch(n,n.getPosition(),v[t],d,h,m)}).start(),b+=1}},w=this;for(a=0;a<_.length;a++)C(a);u.default.getInstance().emitListen(s.CUSTOM_REFRESH)}}},e.prototype.flyToOtherBranch=function(t,e,n,o,r,i){var a=this,c=1;o%2==0?t.scaleX<0&&(t.scaleX*=-1):t.scaleX>0&&(t.scaleX*=-1),o%2==0&&r%2!=0||r%2==0&&o%2!=0?c=-1:o%2==0&&r%2==0?n.x-e.x<0&&(t.scaleX*=-1,c=-1):o%2!=0&&r%2!=0&&n.x-e.x>0&&(t.scaleX*=-1,c=-1),u.default.getInstance().emitListen(s.CUSTOM_REFRESH),t.getComponent(p.default).animationGo(o,r,e,n,function(){if(a.modifyLayer(),a.scheduleOnce(function(){a.checkIsRunning()||l.default.gameComplete||u.default.getInstance().emitListen(s.CUSTOM_REFRESH)}),!l.default.gameComplete&&a.entityNodes[r])if(i){var t=a.entityNodes[r];a.runningAni.concat(t),delete a.entityNodes[r];if(cc.view.getVisibleSize().width,t&&(d.default.getInstance().playEffect(s.AudioEnum.Collect),l.default.AppDataObj.shake_open&&console.log("====exec===shake==="),a.flyToOutSide(t,r)),a.cupCenter.allBranchFull(),l.default.gameComplete){var e=a,n=setTimeout(function(){for(var t in clearTimeout(n),e.entityNodes){var o=e.entityNodes[t];a.flyToOutSide(o,Number(t))}e.entityNodes={}},800);a.startModifyPos=!1,a.__idArr=[],a.syncBranchs=[],console.log("=====\u6e38\u620f\u7ed3\u675f=====\u51fa\u7ed3\u7b97\u754c\u9762=====");var o=setTimeout(function(){clearTimeout(o),e.cupCenter.downAllBranchAni(),u.default.getInstance().emitListen(s.CUSTOM_FINISH)},1500);return}}else a.cupCenter.getBranchShakeState(r)||(a.syncBranchs=[r],a.startModifyPos=!0,a.cupCenter.shakeBranch(r))},c)},e.prototype.modifyLayer=function(){var t=0,e={};for(var n in this.entityNodes){var o=this.entityNodes[n];if(o&&o.length)for(var r=0,i=o.length;r<i;r++){var a=o[r].getComponent("Action");e[a.pollindex]||(e[a.pollindex]=t,t+=1),o[r].zIndex=e[a.pollindex]}}var c=t;for(var n in this.hideEntityNodes){var s=this.hideEntityNodes[n];s&&s.egg&&(s.egg.zIndex=c,c+=1)}},e.prototype.releaseAni=function(){},e.prototype.flyToOutSide=function(t,e){var n=this;if(t&&t.length){d.default.getInstance().playEffect(s.AudioEnum.flyout);for(var o=e%2==0?1:-1,r=(cc.view.getVisibleSize().width+200)*o,i=function(e){var n=.3*Math.random();cc.tween(t[e]).delay(n).call(function(){var n=t[e].getComponent("Action"),i=200*Math.random()+400;1==o?t[e].scaleX<0&&(t[e].scaleX*=-1):t[e].scaleX>0&&(t[e].scaleX*=-1),n.execMove(t[e].getPosition(),cc.v2(t[e].x+r,t[e].y+i),function(){f.default.putInPool(n.pollindex,t[e])},1)}).start()},a=t.length-1;a>=0;a--)i(a);this.scheduleOnce(function(){n.cupCenter.execBranchDown(e)},.2)}},e.prototype.onTouchNoMoveEnd=function(){l.default.startSlideOper&&(this.no_move_click_num++,this.cupCenter.selected&&this.no_move_click_num>=2&&(this.no_move_click_num=0,this.cupCenter.clickBranchEntity(this.cupCenter.selected)))},e.prototype.execPromptMove=function(t,e){var n=this.cupCenter.getBranchByIndex(t),o=this.cupCenter.getBranchByIndex(e);null!=n&&null!=o&&(this.cupCenter.selected&&this.rebackNormal(this.cupCenter.selected.branchIndex),this.cupCenter.selected=n,this.cupCenter.clickBranchEntity(o))},e.prototype.onTouchEnd=function(t){if(l.default.startSlideOper&&l.default.aniFinish){var e=t.getLocation(),n=this.cupCenter.containsPos(e);if(n){if(n.finished||l.default.gameComplete)return;this.cupCenter.selected&&(this.cupCenter.clickBranchEntity(n),this.cupCenter.selected||(this.no_move_click_num=0))}}},e.prototype.onTouchStart=function(t){var e=t.getLocation();if(this.startPos=e,l.default.startSlideOper&&l.default.aniFinish){var n=this.cupCenter.containsPos(e);if(n){if(n.finished||l.default.gameComplete)return;(!this.cupCenter.selected||this.cupCenter.selected&&this.cupCenter.selected!=n)&&(this.cupCenter.clickBranchEntity(n)||(this.no_move_click_num=0))}}},e.prototype.onTouchMove=function(t){var e=t.getLocation();this.startPos&&e.sub(this.startPos).mag()>130&&(this.startPos=null)},e.prototype.changeAssets=function(t){if(t.bg&&(this.node.getChildByName("bgs").getChildByName(l.default.bg_index.toString()).active=!1,l.default.bg_index=t.bg,cc.sys.localStorage.setItem(s.CustomLocalStorageKey.BG_INDEX,l.default.bg_index),this.node.getChildByName("bgs").getChildByName(t.bg.toString()).active=!0),t.cup)for(var e in this.cupCenter.onReplaceBranchs(t.cup),l.default.cup_skin_index=t.cup,cc.sys.localStorage.setItem(s.CustomLocalStorageKey.CUP_INDEX,l.default.cup_skin_index),this.rebackNormal(),this.entityNodes)for(var n=this.cupCenter.getEntityRealPos(Number(e),this.aniLayer),o=0;o<this.entityNodes[e].length;o++)this.entityNodes[e][o].setPosition(cc.v2(n[o].x,n[o].y)),this.hideEntityNodes[e]&&this.hideEntityNodes[e][o]&&this.hideEntityNodes[e][o].egg.setPosition(cc.v2(n[o].x,n[o].y));if(t.ani){var r=t.ani.split("_");for(var e in this.entityNodes)for(o=0;o<this.entityNodes[e].length;o++){var i=this.entityNodes[e][o];if(i.name.split("_")[0]==r[0]){var a=i.scaleX>0?1:-1,c=f.default.getFromPool(t.ani);c.active=!0,c.getComponent("Action").pollindex=t.ani,c.getComponent("Action").flyBoo=!1,this.aniLayer.addChild(c),c.setSiblingIndex(i.getSiblingIndex()),c.setPosition(i.getPosition()),c.scale*=this.cupCenter.layout_scale,c.scaleX*=a,f.default.putInPool(i.name,i),this.entityNodes[e][o]=c,this.hideEntityNodes[e]&&this.hideEntityNodes[e][o]&&(this.hideEntityNodes[e][o].bird=c,c.active=!1)}}var u=t.ani.split("_");l.default.ani_indexs[u[0]]=Number(u[1]),cc.sys.localStorage.setItem(s.CustomLocalStorageKey.ANI_INDEX,JSON.stringify(l.default.ani_indexs))}l.default.getInstance().saveData()},e.prototype.createEntity=function(t){for(var e=0,n=cc.view.getVisibleSize().width/2,o=l.default.ani_indexs,r=0,i=t.length,a=0;a<t.length;a++){var c=this.cupCenter.getEntityRealPos(a,this.aniLayer);~this.syncBranchs.indexOf(a)||this.syncBranchs.push(a),this.entityNodes[a]=[],this.hideEntityNodes[a]=[];for(var s=0;s<t[a].length;s++)if(0!=t[a][s]){var u=0==e?1:-1,d=t[a][s]+"_"+o[t[a][s]],p=f.default.getFromPool(d);p.active=!0,p.getComponent("Action").pollindex=d,p.getComponent("Action").flyBoo=!1,this.aniLayer.addChild(p),p.zIndex=3*i+(4*a+s);var y=c[s].x-n*u,_=c[s].y+100*Math.random()+200;if(p.setPosition(cc.v2(y,_)),p.scale*=this.cupCenter.layout_scale,p.scaleX*=u,this.entityNodes[a].push(p),this.maxBirdLayer=p.zIndex,l.default.hideNode&&0!=t[a][s+1]&&null!=t[a][s+1]){var g=h.default.getFromPool();g.zIndex=r,g.getComponent(sp.Skeleton).setAnimation(1,"idle",!0),g.scale*=this.cupCenter.layout_scale,this.aniLayer.addChild(g),p.active=!1,p.setPosition(c[s].x,c[s].y),g.setPosition(c[s].x,c[s].y),this.hideEntityNodes[a].push({egg:g,bird:p}),r+=1}}e=0==e?1:0}this.modifyLayer()},e.prototype.startEnterAni=function(){for(var t=this,e=0,n=0,o=0;o<this.__idArr.length;o++)"0,0,0,0"==this.__idArr[o].toString()&&(n+=1);d.default.getInstance().playEffect(s.AudioEnum.Fly_2_2);var r=l.default.hideNode?this.__idArr.length-n:4*(this.__idArr.length-n);1==l.default.birdLev&&(r=4);var i=function(n){var o=a.entityNodes[n];if(o&&o.length)for(var i=0,c=a.cupCenter.getEntityRealPos(Number(n),a.aniLayer),s=function(a){if(!o[a].active)return"continue";var s=o[a].getComponent(p.default),u=setTimeout(function(){clearTimeout(u),s.execMove(o[a].getPosition(),cc.v2(c[a].x,c[a].y),function(){if((1==(i+=1)||l.default.hideNode)&&(t.startModifyPos=!0,t.cupCenter.shakeBranch(Number(n)),1!=l.default.birdLev&&2!=l.default.birdLev||t.showGuideLevel()),(e+=1)>=r){l.default.aniFinish=!0;var o=t,a=setTimeout(function(){clearTimeout(a),o.startModifyPos=!1,t.syncBranchs=[]},800)}},1,1e3)},100*a)},u=0;u<o.length;u++)s(u)},a=this;for(var c in this.entityNodes)i(c)},e.prototype.showGuideLevel=function(){if((1==l.default.birdLev||2==l.default.birdLev)&&this.guidePoints.length<=0){var t=this.eff_group.getChildByName("guide_hand");if(t.active=!0,1==l.default.birdLev){var e=(c=this.cupCenter.node.getChildByName("layout_h").getChildByName("layout_left").children[0]).parent.convertToWorldSpaceAR(cc.v2(c.x+c.width/2,c.y)),n=this.eff_group.convertToNodeSpaceAR(e);this.guidePoints.push(n);var o=(a=this.cupCenter.node.getChildByName("layout_h").getChildByName("layout_right").children[0]).parent.convertToWorldSpaceAR(cc.v2(a.x+a.width/2,a.y)),r=this.eff_group.convertToNodeSpaceAR(o);this.guidePoints.push(r);var i=this.guidePoints.shift();t.setPosition(i),this.guideNodes.push(c,a),l.default.initGuide=this.guideNodes.shift()}else if(2==l.default.birdLev){var a;o=(a=this.cupCenter.node.getChildByName("layout_h").getChildByName("layout_right").children[0]).parent.convertToWorldSpaceAR(cc.v2(a.x+a.width/2,a.y)),r=this.eff_group.convertToNodeSpaceAR(o),this.guidePoints.push(r);var c,s=this.cupCenter.node.getChildByName("layout_h").getChildByName("layout_left").children[1],u=s.parent.convertToWorldSpaceAR(cc.v2(s.x+s.width/2,s.y)),d=this.eff_group.convertToNodeSpaceAR(u);this.guidePoints.push(d),e=(c=this.cupCenter.node.getChildByName("layout_h").getChildByName("layout_left").children[0]).parent.convertToWorldSpaceAR(cc.v2(c.x+c.width/2,c.y)),n=this.eff_group.convertToNodeSpaceAR(e),this.guidePoints.push(n),this.guidePoints.push(r),this.guidePoints.push(n),this.guidePoints.push(d),this.guideNodes.push(a,s,c,a,c,s),t.setPosition(this.guidePoints.shift()),l.default.initGuide=this.guideNodes.shift()}}},e.prototype.toNextGuide=function(){if(console.log("=====\u6267\u884c\u4e0b\u4e00\u6b65\u5f15\u5bfc===="),(1==l.default.birdLev||2==l.default.birdLev)&&this.guidePoints.length>0){l.default.initGuide=this.guideNodes.shift();var t=this.eff_group.getChildByName("guide_hand"),e=this.guidePoints.shift();t.setPosition(e)}else l.default.initGuide=null,(t=this.eff_group.getChildByName("guide_hand")).active=!1},e.prototype.initCfg=function(t){var e=this;if(l.default.hideNode=!1,l.default.dataBuffers.length){if(l.default.dataBuffers[l.default.birdLev-1])l.default.hideNode=l.default.markBuffers[l.default.birdLev-1]>=1,this.syncPageFontToId(l.default.dataBuffers[l.default.birdLev-1]);else{var n=y.default.getColorArr(l.default.birdLev);this.dealLevIds(n)}t&&t()}else cc.resources.load("way/ratio",cc.BufferAsset,function(n,r){for(var i=r._buffer,a=new o(i.byteLength),c=new Uint8Array(i),s=0;s<a.length;++s)a[s]=c[s];for(var u=a.readInt32BE(0),d=0,p=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],h=0;h<u;h++){a.readInt32BE(d+4);for(var f=a.readInt32BE(d+8),_=a.readInt32BE(d+12),g="",m=0;m<_;m++)g+=p[Number(a.readInt32BE(d+16+4*m))-1];d=d+12+4*_,l.default.dataBuffers.push(g),l.default.markBuffers.push(f)}if(l.default.dataBuffers[l.default.birdLev-1])l.default.hideNode=l.default.markBuffers[l.default.birdLev-1]>=1,e.syncPageFontToId(l.default.dataBuffers[l.default.birdLev-1]);else{var v=y.default.getColorArr(l.default.birdLev);e.dealLevIds(v)}t&&t()})},e.prototype.initView=function(){var t=this;this.cupCenter.createBranchEntity(this.__idArr),l.default.isAddBranch&&this.cupCenter.addBranchEntity(),l.default.aniFinish=!1,this.scheduleOnce(function(){t.createEntity(t.__idArr)})},e.prototype.dealLevIds=function(t){this.all_ids=[].concat(t);for(var e=t,n=0,o=[];n<e.length;){var r=[e[n],e[n+1]||0,e[n+2]||0,e[n+3]||0];r.reverse(),o.push(r),n+=4}this.__idArr=o},e.prototype.calLevIds=function(){return this.cupCenter.ids},e.prototype.syncPageFontToId=function(t){for(var e=[],n=t.length/4,o=[],r=t.split(""),i=0;i<r.length;i++)~o.indexOf(r[i])||"O"==r[i]||o.push(r[i]);var a=o.length,c=[].concat(this.RULE_COLOR[a-1]),s={};for(i=0;i<n;i++){var u=t.substring(4*i,4*i+4).split("");u.reverse();for(var d=0;d<u.length;d++)"O"!=u[d]?(s[u[d]]||(s[u[d]]=c.shift()),e.push(s[u[d]])):e.push(0)}l.default.level_ids=[].concat(e),this.dealLevIds(e)},e.prototype.initialize=function(){for(var t in this.cupCenter.onRealseBranchs(),this.entityNodes)if((o=this.entityNodes[t])&&o.length)for(var e=0;e<o.length;e++){cc.Tween.stopAllByTarget(o[e]);var n=o[e].getComponent("Action");f.default.putInPool(n.pollindex,o[e])}for(e=0;e<this.runningAni.length;e++)this.runningAni[e]&&(cc.Tween.stopAllByTarget(this.runningAni[e]),n=this.runningAni[e].getComponent("Action"),f.default.putInPool(n.pollindex,this.runningAni[e]));for(var t in this.hideEntityNodes){var o;if((o=this.hideEntityNodes[t])&&o.length)for(e=0;e<o.length;e++)h.default.putInPool(o[e].egg)}this.startModifyPos=!1,this.entityNodes={},this.runningAni=[],this.hideEntityNodes={},this.__idArr=[],this.syncBranchs=[],l.default.hideNode=!1},e.prototype.removeHideNode=function(t){var e=t.detail.restore,n=t.detail.index,o=this.hideEntityNodes[n];if(o&&o.length)for(var r=function(){var t=o.pop(),e=t.egg.getComponent(sp.Skeleton);e.setAnimation(1,"broken",!1),e.setCompleteListener(function(e){"broken"==(e.animation?e.animation.name:"")&&h.default.putInPool(t.egg)}),t.bird.active=!0;var n=t.bird.scaleX,r=t.bird.scaleY;t.bird.scale=0,t.bird.getComponent("Action").flyBoo=!0,t.bird.getComponent("Action").changeStand(),cc.tween(t.bird).then(cc.tween().to(.5,{scaleX:n,scaleY:r}).call(function(){t.bird.getComponent("Action").flyBoo=!1})).start()},i=0;i<e;i++)r()},e.prototype.addBranchEntity=function(){this.startModifyPos=!0;for(var t=Object.keys(this.entityNodes),e=[],n=0;n<t.length;n++)e.push(parseInt(t[n]));this.syncBranchs=e,this.cupCenter.addBranchEntity()},e.prototype.undoAction=function(){return this.cupCenter.undoAction()},e.prototype.checkIsRunning=function(){for(var t in this.entityNodes){var e=this.entityNodes[t];if(e&&e.length)for(var n=0;n<e.length;n++)if(e[n].active&&!e[n].getComponent("Action").isStatic)return!0}return!1},e.prototype.onRefreshState=function(t){this.refresAniStates(t.detail.focusIndex,t.detail.bool,t.detail.topNum)},e.prototype.getActionNum=function(){return this.cupCenter.getActionNum()},e.prototype.refresAniStates=function(t,e,n){var o=this.entityNodes[t];if(o&&o.length)for(var r=!1,i=o.length-1;i>=0&&n>0;i--){var a=o[i].getComponent("Action");if(e){var c=a.pollindex.split("_");r||(r=!0,d.default.getInstance().playEffect(p.default.harkEff(c[0]))),a.setFocus()}else a.rebackNormal();n-=1}},e.prototype.rebackNormal=function(t){if(void 0===t&&(t=null),t){if((o=this.entityNodes[t])&&o.length)for(var e=o.length-1;e>=0;e--)o[e].getComponent("Action").rebackNormal()}else for(var n in this.entityNodes){var o;if((o=this.entityNodes[n])&&o.length)for(e=o.length-1;e>=0;e--)o[e].getComponent("Action").rebackNormal()}this.cupCenter.selected=null},e.prototype.update=function(){if(this.startModifyPos&&this.__idArr){for(var t in this.entityNodes)if((o=this.entityNodes[Number(t)])&&o.length&&-1!=this.syncBranchs.indexOf(Number(t)))for(var e=this.cupCenter.getEntityRealPos(Number(t),this.aniLayer),n=0;n<o.length;n++)o[n].getComponent(p.default).isStatic&&o[n].setPosition(cc.v2(e[n].x,e[n].y));for(var t in this.hideEntityNodes){var o;if((o=this.hideEntityNodes[t])&&o.length)for(var r=0;r<o.length;r++)o[r].egg.setPosition(o[r].bird.getPosition())}this.cupCenter.checkAllShake()||(this.startModifyPos=!1)}},a([m(c.default)],e.prototype,"cupCenter",void 0),a([m(cc.Node)],e.prototype,"aniLayer",void 0),a([m(cc.Node)],e.prototype,"eff_group",void 0),a([g],e)}(cc.Component);n.default=v,cc._RF.pop()}).call(this,t("buffer").Buffer)},{"./BranchEntityControl":"BranchEntityControl","./common/AppData":"AppData","./common/GlobalInferfance":"GlobalInferfance","./control/AudioCenter":"AudioCenter","./control/EventController":"EventController","./prefabs/Action":"Action","./prefabs/AniPool":"AniPool","./prefabs/MarkPool":"MarkPool","./util/CreateLevColor":"CreateLevColor",buffer:2}],Set:[function(t,e,n){"use strict";cc._RF.push(e,"d5c23TXKBFBuqiwu03NICxE","Set");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../common/GlobalInferfance"),c=t("../common/AppData"),s=t("../control/EventController"),l=t("../control/AudioCenter"),u=cc._decorator,d=u.ccclass,p=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audio_btn=null,e.shake_btn=null,e.music_btn=null,e.clickBoo=!1,e}return r(e,t),e.prototype.onLoad=function(){this.changeSound(),this.changeShake(),this.changeMusic();var t=this.node.getChildByName("content");t.opacity=0;var e=cc.tween().to(.4,{opacity:255},{easing:"circOut"});cc.tween(t).then(e).start()},e.prototype.start=function(){},e.prototype.changeSound=function(){var t=this.audio_btn.node.getChildByName("Background").getChildByName("sound_icon_down"),e=this.audio_btn.node.getChildByName("Background").getChildByName("sound_icon_up");t.active=c.default.AppDataObj.sound_open,e.active=!c.default.AppDataObj.sound_open,c.default.getInstance().saveData()},e.prototype.changeShake=function(){var t=this.shake_btn.node.getChildByName("Background").getChildByName("shake_close"),e=this.shake_btn.node.getChildByName("Background").getChildByName("shake_open");t.active=!c.default.AppDataObj.shake_open,e.active=c.default.AppDataObj.shake_open,c.default.getInstance().saveData()},e.prototype.changeMusic=function(){var t=this.music_btn.node.getChildByName("Background").getChildByName("music_icon_down"),e=this.music_btn.node.getChildByName("Background").getChildByName("music_icon_up");t.active=c.default.AppDataObj.music_open,e.active=!c.default.AppDataObj.music_open,c.default.AppDataObj.music_open?l.default.getInstance().playBgMusic():l.default.getInstance().stopBgMusic(),c.default.getInstance().saveData()},e.prototype.onClick=function(t,e){var n=this;switch(e){case"sound":if(this.clickBoo)return;c.default.AppDataObj.sound_open=!c.default.AppDataObj.sound_open,c.default.getInstance().saveData(),l.default.getInstance().playEffect(a.AudioEnum.common_click),this.changeSound();break;case"shake":if(this.clickBoo)return;c.default.AppDataObj.shake_open=!c.default.AppDataObj.shake_open,c.default.getInstance().saveData(),l.default.getInstance().playEffect(a.AudioEnum.common_click),this.changeShake();break;case"music":if(this.clickBoo)return;c.default.AppDataObj.music_open=!c.default.AppDataObj.music_open,l.default.getInstance().playEffect(a.AudioEnum.common_click),this.changeMusic();break;case"close":if(this.clickBoo)return;this.clickBoo=!0,l.default.getInstance().playEffect(a.AudioEnum.resetGame),s.default.getInstance().emitListen(a.CUSTOM_SHOW_ANI),this.node.removeFromParent();break;case"shop":if(this.clickBoo)return;this.clickBoo=!0,l.default.getInstance().playEffect(a.AudioEnum.common_click),s.default.getInstance().emitListen(a.CUSTOM_SHOW_ANI),this.node.removeFromParent(),this.showShop();break;case"reset":if(this.clickBoo)return;this.clickBoo=!0,l.default.getInstance().playEffect(a.AudioEnum.resetGame);var o=setTimeout(function(){clearTimeout(o),s.default.getInstance().emitListen(a.CUSTOM_RESET,{ani:!1}),c.default.banner_state=!1,s.default.getInstance().emitListen(a.CUSTOM_SHOW_ANI),n.node.removeFromParent()},100);break;case"feedback":if(this.clickBoo)return;this.clickBoo=!0,console.log("====feedback==="),l.default.getInstance().playEffect(a.AudioEnum.common_click);var r=this,i=setTimeout(function(){clearTimeout(i),r.clickBoo=!1},1500);break;case"private":if(this.clickBoo)return;this.clickBoo=!0,console.log("====private==="),l.default.getInstance().playEffect(a.AudioEnum.common_click);var u=this,d=setTimeout(function(){clearTimeout(d),u.clickBoo=!1},1500)}},e.prototype.showShop=function(){},i([p(cc.Button)],e.prototype,"audio_btn",void 0),i([p(cc.Button)],e.prototype,"shake_btn",void 0),i([p(cc.Button)],e.prototype,"music_btn",void 0),i([d],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../common/AppData":"AppData","../common/GlobalInferfance":"GlobalInferfance","../control/AudioCenter":"AudioCenter","../control/EventController":"EventController"}],ShopItem1:[function(t,e,n){"use strict";cc._RF.push(e,"6baac/l0BZPurR9INFuF0De","ShopItem1");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator.menu,c=t("./AniPool"),s=t("../common/AppData"),l=t("../control/EventController"),u=t("../common/GlobalInferfance"),d=cc._decorator,p=d.ccclass,h=d.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemId=0,e}return r(e,t),e.prototype.onLoad=function(){l.default.getInstance().addListen(u.CUSTOM_CHANGE_SKIN,this.reload,this)},e.prototype.start=function(){},e.prototype.update=function(){},e.prototype.setItemId=function(t){this.itemId=t,this.reload()},e.prototype.reload=function(){var t=this.shopData.json[this.itemId];this.key=t.posId+"_"+t.posIndex,this.birdNode=c.default.getFromPool(this.key),this.birdNode.parent=this.birdRootNode,this.priceLabel.string=t.price,s.default.skinShop.own_anim[this.itemId]?(this.buyBtn.node.active=!1,s.default.skinShop.use_anim[this.itemId]?(this.chooseBtn.node.active=!1,this.useSprite.node.active=!0):(this.chooseBtn.node.active=!0,this.useSprite.node.active=!1)):(this.buyBtn.node.active=!0,this.chooseBtn.node.active=!1,this.useSprite.node.active=!1)},e.prototype.onClickBuy=function(){l.default.getInstance().emitListen(u.CUSTOM_BUY_SKIN,this.itemId)},e.prototype.onClickChoose=function(){var t=this.shopData.json[this.itemId];for(var e in s.default.skinShop.use_anim){var n=Number(s.default.skinShop.use_anim[e]);if(this.shopData.json[n].posId==t.posId){delete s.default.skinShop.use_anim[e];break}}s.default.skinShop.use_anim[this.itemId]=!0,l.default.getInstance().emitListen(u.CUSTOM_CHANGE_SKIN,t)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),l.default.getInstance().removeListen(u.CUSTOM_CHANGE_SKIN),c.default.putInPool(this.key,this.birdNode)},i([h(cc.Sprite)],e.prototype,"bgSprite",void 0),i([h(cc.Label)],e.prototype,"priceLabel",void 0),i([h(cc.Button)],e.prototype,"buyBtn",void 0),i([h(cc.Button)],e.prototype,"chooseBtn",void 0),i([h(cc.Sprite)],e.prototype,"useSprite",void 0),i([h(cc.JsonAsset)],e.prototype,"shopData",void 0),i([h(cc.Node)],e.prototype,"birdRootNode",void 0),i([p,a("shop/shopItem1")],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../common/AppData":"AppData","../common/GlobalInferfance":"GlobalInferfance","../control/EventController":"EventController","./AniPool":"AniPool"}],ShopItem2:[function(t,e,n){"use strict";cc._RF.push(e,"f83b0LPHEVNb7yX8lzjItav","ShopItem2");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator.menu,c=t("../common/AppData"),s=t("../control/EventController"),l=t("../common/GlobalInferfance"),u=cc._decorator,d=u.ccclass,p=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frameList=[],e.itemId=0,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){s.default.getInstance().addListen(l.CUSTOM_CHANGE_SKIN,this.reload,this)},e.prototype.update=function(){},e.prototype.setItemId=function(t){this.itemId=t,this.reload()},e.prototype.reload=function(){var t=this.shopData.json[this.itemId];this.branchSprite.spriteFrame=this.frameList[t.posId-1],this.priceLabel.string=t.price,c.default.skinShop.own_platform[this.itemId]?(this.buyBtn.node.active=!1,c.default.skinShop.use_platform==this.itemId?(this.chooseBtn.node.active=!1,this.useSprite.node.active=!0):(this.chooseBtn.node.active=!0,this.useSprite.node.active=!1)):(this.buyBtn.node.active=!0,this.chooseBtn.node.active=!1,this.useSprite.node.active=!1)},e.prototype.onClickBuy=function(){s.default.getInstance().emitListen(l.CUSTOM_BUY_SKIN,this.itemId)},e.prototype.onClickChoose=function(){var t=this.shopData.json[this.itemId];c.default.skinShop.use_platform=this.itemId,s.default.getInstance().emitListen(l.CUSTOM_CHANGE_SKIN,t)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),s.default.getInstance().removeListen(l.CUSTOM_CHANGE_SKIN)},i([p(cc.Sprite)],e.prototype,"bgSprite",void 0),i([p(cc.Label)],e.prototype,"priceLabel",void 0),i([p(cc.Button)],e.prototype,"buyBtn",void 0),i([p(cc.Button)],e.prototype,"chooseBtn",void 0),i([p(cc.Sprite)],e.prototype,"useSprite",void 0),i([p(cc.JsonAsset)],e.prototype,"shopData",void 0),i([p(cc.Sprite)],e.prototype,"branchSprite",void 0),i([p([cc.SpriteFrame])],e.prototype,"frameList",void 0),i([d,a("shop/shopItem2")],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../common/AppData":"AppData","../common/GlobalInferfance":"GlobalInferfance","../control/EventController":"EventController"}],ShopItem3:[function(t,e,n){"use strict";cc._RF.push(e,"3fcc0iRYktKU4a8SaRbPAFF","ShopItem3");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator.menu,c=cc._decorator,s=c.ccclass,l=c.property,u=t("../common/AppData"),d=t("../control/EventController"),p=t("../common/GlobalInferfance"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frameList=[],e.itemId=0,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){d.default.getInstance().addListen(p.CUSTOM_CHANGE_SKIN,this.reload,this)},e.prototype.update=function(){},e.prototype.setItemId=function(t){this.itemId=t,this.reload()},e.prototype.reload=function(){var t=this.shopData.json[this.itemId],e=t.posId-1;this.sprite.spriteFrame=this.frameList[e],this.priceLabel.string=t.price,u.default.skinShop.own_bg[this.itemId]?(this.buyBtn.node.active=!1,u.default.skinShop.use_bg==this.itemId?(this.chooseBtn.node.active=!1,this.useSprite.node.active=!0):(this.chooseBtn.node.active=!0,this.useSprite.node.active=!1)):(this.buyBtn.node.active=!0,this.chooseBtn.node.active=!1,this.useSprite.node.active=!1)},e.prototype.onClickBuy=function(){d.default.getInstance().emitListen(p.CUSTOM_BUY_SKIN,this.itemId)},e.prototype.onClickChoose=function(){var t=this.shopData.json[this.itemId];u.default.skinShop.use_bg=this.itemId,d.default.getInstance().emitListen(p.CUSTOM_CHANGE_SKIN,t)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),d.default.getInstance().removeListen(p.CUSTOM_CHANGE_SKIN)},i([l(cc.Sprite)],e.prototype,"sprite",void 0),i([l(cc.Label)],e.prototype,"priceLabel",void 0),i([l(cc.Label)],e.prototype,"gotLabel",void 0),i([l([cc.SpriteFrame])],e.prototype,"frameList",void 0),i([l(cc.Button)],e.prototype,"buyBtn",void 0),i([l(cc.Button)],e.prototype,"chooseBtn",void 0),i([l(cc.Sprite)],e.prototype,"useSprite",void 0),i([l(cc.JsonAsset)],e.prototype,"shopData",void 0),i([s,a("shop/shopItem3")],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../common/AppData":"AppData","../common/GlobalInferfance":"GlobalInferfance","../control/EventController":"EventController"}],ShopPage:[function(t,e,n){"use strict";cc._RF.push(e,"930bau+F91EypxROZMA5Jmi","ShopPage");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a,c,s=t("../common/GlobalInferfance"),l=t("../common/AppData"),u=t("../control/EventController"),d=t("../control/AudioCenter"),p=cc._decorator.menu,h=t("./ShopItem3"),f=t("./ShopItem1"),y=t("./ShopItem2");(function(t){t[t.bird=1]="bird",t[t.platform=2]="platform",t[t.bg=3]="bg",t[t.off=4]="off"})(a||(a={})),function(t){t[t.shop=1]="shop",t[t.owner=2]="owner"}(c||(c={}));var _=cc._decorator,g=_.ccclass,m=_.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickBoo=!1,e.curPageType=a.bird,e.curOwnerType=c.shop,e}return r(e,t),e.prototype.onLoad=function(){this.showAction()},e.prototype.start=function(){this.reloadPage(),u.default.getInstance().addListen(s.CUSTOM_BUY_SKIN,this.buyItem,this)},e.prototype.showAction=function(){var t=this.node.getChildByName("content");t.opacity=0;var e=cc.tween().to(.4,{opacity:255},{easing:"circOut"});cc.tween(t).then(e).start()},e.prototype.clickClose=function(){this.clickBoo||(this.clickBoo=!0,d.default.getInstance().playEffect(s.AudioEnum.resetGame),u.default.getInstance().emitListen(s.CUSTOM_SHOW_ANI),this.node.removeFromParent())},e.prototype.typeCheckEvent=function(t){var e=t.target.name;this.curPageType=e.charAt(e.length-1),this.reloadPage()},e.prototype.ownerCheckEvent=function(t){var e=t.target.name;this.curOwnerType=e.charAt(e.length-1),this.reloadPage()},e.prototype.reloadPage=function(){this.birdPage.active=this.curPageType==a.bird,this.branchPage.active=this.curPageType==a.platform,this.picPage.active=this.curPageType==a.bg,this.offPage.active=this.curPageType==a.off,this.reloadByType()},e.prototype.reloadByType=function(){this.shopView.content.removeAllChildren(),this.ownerView.content.removeAllChildren();var t=this._getItemDataList(),e=this.curOwnerType==c.owner;this.shopView.node.active=!e,this.ownerView.node.active=e,this.curPageType==a.bird?this._reloadShopViewBird(t,e):this.curPageType==a.platform?this._reloadShopViewBranch(t,e):this.curPageType==a.bg?this._reloadShopViewPic(t,e):(this.curPageType,a.off)},e.prototype._reloadShopViewBird=function(t,e){if(e){var n={};for(var o in l.default.skinShop.own_anim){var r=Number(o),i=this.shopData.json[r];n[i.posId]||(n[i.posId]=[]),n[i.posId].push(i.id)}for(var o in n)for(var a=0;a<n[o].length;a++){var c=Number(n[o][a]);this._addItemToView(this.itemPre1,f.default,this.ownerView,c)}}else for(var o in t)c=t[o].id,l.default.skinShop.own_anim[c]||this._addItemToView(this.itemPre1,f.default,this.shopView,c)},e.prototype._reloadShopViewBranch=function(t,e){if(e)for(var n in l.default.skinShop.own_platform)this._addItemToView(this.itemPre2,y.default,this.ownerView,Number(n));else for(var n in t){var o=t[n].id;l.default.skinShop.own_platform[o]||this._addItemToView(this.itemPre2,y.default,this.shopView,o)}},e.prototype._reloadShopViewPic=function(t,e){if(e)for(var n in l.default.skinShop.own_bg)this._addItemToView(this.itemPre3,h.default,this.ownerView,Number(n));else for(var n in t){var o=t[n].id;l.default.skinShop.own_bg[o]||this._addItemToView(this.itemPre3,h.default,this.shopView,o)}},e.prototype._addItemToView=function(t,e,n,o){var r=cc.instantiate(t);r.parent=n.content,r.getComponent(e).setItemId(o)},e.prototype._getItemDataList=function(){var t=[];for(var e in this.shopData.json){var n=this.shopData.json[e];n.showId==this.curPageType&&t.push(n)}return t},e.prototype.showShop=function(){},e.prototype.buyItem=function(t){var e=t.getUserData(),n=this.shopData.json[e],o=n.price;if(l.default.userGold<o)return cc.log("\u94b1\u4e0d\u591f\uff01\uff01\uff01"),void cc.tween(this.noMoneyNode).then(cc.tween().to(.5,{opacity:255})).then(cc.delayTime(2)).then(cc.tween().to(.5,{opacity:0})).start();n.showId==a.bird?l.default.skinShop.own_anim[e]=!0:n.showId==a.platform?l.default.skinShop.own_platform[e]=!0:n.showId==a.bg&&(l.default.skinShop.own_bg[e]=!0),this.reloadPage()},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),u.default.getInstance().removeListen(s.CUSTOM_BUY_SKIN)},i([m(cc.ToggleContainer)],e.prototype,"choosePageToggle",void 0),i([m(cc.Node)],e.prototype,"birdPage",void 0),i([m(cc.Node)],e.prototype,"branchPage",void 0),i([m(cc.Node)],e.prototype,"picPage",void 0),i([m(cc.Node)],e.prototype,"offPage",void 0),i([m(cc.ScrollView)],e.prototype,"shopView",void 0),i([m(cc.ScrollView)],e.prototype,"ownerView",void 0),i([m(cc.Prefab)],e.prototype,"itemPre1",void 0),i([m(cc.Prefab)],e.prototype,"itemPre2",void 0),i([m(cc.Prefab)],e.prototype,"itemPre3",void 0),i([m(cc.Prefab)],e.prototype,"itemPre4",void 0),i([m(cc.JsonAsset)],e.prototype,"shopData",void 0),i([m(cc.Node)],e.prototype,"noMoneyNode",void 0),i([g,p("shop/shopPage")],e)}(cc.Component);n.default=v,cc._RF.pop()},{"../common/AppData":"AppData","../common/GlobalInferfance":"GlobalInferfance","../control/AudioCenter":"AudioCenter","../control/EventController":"EventController","./ShopItem1":"ShopItem1","./ShopItem2":"ShopItem2","./ShopItem3":"ShopItem3"}],SkinController:[function(t,e,n){"use strict";cc._RF.push(e,"4aa4a8HnFxJ6pjMcjup+xM7","SkinController");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../base/BaseInst"),c=t("../prefabs/BranchPool"),s=t("../prefabs/MarkPool"),l=t("../prefabs/AniPool"),u=cc._decorator,d=u.ccclass,p=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.getInstance=function(){return t.getInstance.call(this)},e.loadAnimation=function(t,e,n,o){var r=t+e;cc.resources.load("prefabs/"+r,function(t,e){t?cc.log("Prefab error:"+t):e instanceof cc.Prefab?n.call(o,e):cc.log("Prefab error")}.bind(this))},e.loadPoolEntity=function(t,e){l.default.clearAll();for(var n=0,o=1;o<=2;o++)for(var r=function(r){var a=r+"_"+o;cc.resources.load("prefabs/ani"+a,function(o,r){o?cc.log("Prefab error:"+o):r instanceof cc.Prefab?(n+=1,l.default.createPool(a,r,4),10==n&&(this.loadCount+=1,this.checkLoadFinish(t,e))):cc.log("Prefab error")}.bind(i))},i=this,a=1;a<=10;a++)r(a);c.default.clearAll(),cc.resources.load("prefabs/Branch",function(n,o){c.default.createPool(o,12),this.loadCount+=1,this.checkLoadFinish(t,e)}.bind(this)),s.default.clearAll(),cc.resources.load("prefabs/MarkNode",function(n,o){s.default.createPool(o,48),this.loadCount+=1,this.checkLoadFinish(t,e)}.bind(this))},e.checkLoadFinish=function(t,e){this.loadCount>=this.totalCount&&(this.loadCount=0,this.totalCount=0,t&&e&&t.call(e))},e.loadCount=0,e.totalCount=3,i([d],e)}(a.BaseInst));n.default=p,cc._RF.pop()},{"../base/BaseInst":"BaseInst","../prefabs/AniPool":"AniPool","../prefabs/BranchPool":"BranchPool","../prefabs/MarkPool":"MarkPool"}]},{},["BranchEntityControl","GameLaunch","GameMain","RunCore","BaseInst","BlockType","ChosenOneNodeType","GuideType","QuestType","AppData","GlobalInferfance","AdsCenter","AudioCenter","DatalController","EventController","MessageController","SkinController","GlobalFunc","OtherNoAdTip","PointReport","Action","AniPool","Branch","BranchPool","MarkPool","OverContent","OverGame","Set","ShopItem1","ShopItem2","ShopItem3","ShopPage","CreateLevColor","MathTools","ModifyNode","RegGlobalNode"]);