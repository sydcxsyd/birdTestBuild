window.__require=function t(e,o,n){function i(a,c){if(!o[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var u=o[a]={exports:{}};e[a][0].call(u.exports,function(t){return i(e[a][1][t]||t)},u,u.exports,t,e,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({Action:[function(t,e,o){"use strict";cc._RF.push(e,"0d24eys8NlI8oGuoOwTr03L","Action");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,c=t("../common/GlobalInferfance"),s=cc._decorator,l=s.ccclass;s.property,function(t){t[t.ACT_FLY=1]="ACT_FLY",t[t.ACT_FULL=2]="ACT_FULL",t[t.ACT_STAND=3]="ACT_STAND",t[t.ACT_Stand_2=4]="ACT_Stand_2",t[t.ACT_SELECT=5]="ACT_SELECT"}(a||(a={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ACT_FLY="fly",e.ACT_FULL="grounding",e.ACT_STAND="idle_1",e.ACT_Stand_2="idle_2",e.ACT_SELECT="idle_select",e.SPEED=700,e.JUMP_SPEED=1e3,e.act_time=8,e.flyBoo=!1,e.currentFlyTween=null,e.currentJumpTween=null,e.pollindex="",e.clickFocusBoo=!1,e.act_state="",e}return i(e,t),e.prototype.start=function(){this.ske=this.node.getComponent(sp.Skeleton)},e.harkEff=function(t){var e="";switch(Number(t)){case 1:e=c.AudioEnum.hark2;break;case 2:e=c.AudioEnum.hark3;break;case 4:e=c.AudioEnum.hark8;break;case 3:e=c.AudioEnum.hark10;break;case 5:e=c.AudioEnum.hark7;break;case 6:e=c.AudioEnum.hark6;break;case 7:e=c.AudioEnum.hark1;break;case 8:e=c.AudioEnum.hark5;break;case 9:e=c.AudioEnum.hark9;break;case 10:e=c.AudioEnum.hark4}return e},e.prototype.rebackNormal=function(){this.clickFocusBoo=!1,this.runAct(0,this.ACT_STAND,!0),this.unschedule(this.idleAct),this.schedule(this.idleAct,this.act_time)},e.prototype.idleAct=function(){var t=this;this.ske&&this.ske.setCompleteListener(function(e){e.timeScale=0,(e.animation?e.animation.name:"")==t.ACT_STAND&&t.scheduleOnce(function(){e.timeScale=1,e.animationStart=1,e.animationEnd=28,t.runAct(0,t.ACT_Stand_2,!1),t.ske.setCompleteListener(function(e){e.timeScale=0,(e.animation?e.animation.name:"")===t.ACT_Stand_2&&t.scheduleOnce(function(){e.timeScale=1,e.animationStart=1,e.animationEnd=28,t.runAct(0,t.ACT_STAND,!0)})})})})},e.prototype.setFocus=function(){if(this.clickFocusBoo=!0,!this.flyBoo){this.runAct(0,this.ACT_SELECT,!0,[]),cc.Tween.stopAllByTarget(this.node);var t=cc.tween().to(.1,{scaleY:this.node.scaleY+.2}).to(.1,{scaleY:this.node.scaleY});cc.tween(this.node).then(t).start(),this.unschedule(this.idleAct)}},Object.defineProperty(e.prototype,"isStatic",{get:function(){return!this.flyBoo},enumerable:!1,configurable:!0}),e.prototype.changeStand=function(){this.runAct(0,this.ACT_STAND,!0)},e.prototype.runAct=function(t,e,o,n,i){void 0===n&&(n=[]),void 0===i&&(i=1),this.act_state!=e&&this.ske&&(this.act_state=e,this.ske.timeScale=i,this.ske.setAnimation(t,e,o))},e.prototype.animationGo=function(t,e,o,n,i,r){void 0===r&&(r=1),this.execMove(o,n,i,r)},e.prototype.execMove=function(t,e,o,n,i){var r=this;void 0===n&&(n=1),void 0===i&&(i=this.SPEED),this.currentFlyTween&&(this.flyBoo=!1,this.currentFlyTween.stop(),this.currentFlyTween=null),this.flyBoo=!0,this.runAct(0,this.ACT_FLY,!0,[a.ACT_STAND]);var c=e.sub(t).mag()/i;this.flyTrackEntry&&(this.flyTrackEntry.timeScale=1),this.currentFlyTween=cc.tween(this.node).then(cc.tween().to(c,{x:e.x,y:e.y},{easing:"sineOut"})).call(function(){r.node.scaleX*=n,r.runAct(0,r.ACT_FULL,!1,[a.ACT_FLY]),r.ske&&(o(),r.flyBoo=!1,r.ske.setCompleteListener(function(t){r.flyTrackEntry=t,t.timeScale=0,(t.animation?t.animation.name:"")===r.ACT_FULL&&r.scheduleOnce(function(){r.flyTrackEntry=null,t.timeScale=1,t.animationStart=1,t.animationEnd=28,r.clickFocusBoo?r.runAct(0,r.ACT_SELECT,!0,[a.ACT_FULL]):(r.runAct(0,r.ACT_STAND,!0,[a.ACT_FULL]),r.schedule(r.idleAct,r.act_time))})}))}).start()},r([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../common/GlobalInferfance":"GlobalInferfance"}],AdsCenter:[function(t,e,o){"use strict";cc._RF.push(e,"43692GGoYJGcalx2+sB0fkg","AdsCenter");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../base/BaseInst"),c=t("../common/AppData"),s=t("../otherOffer/OtherNoAdTip"),l=cc._decorator,u=l.ccclass,d=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bannerEntity=null,e.excitationEntity=null,e.showExcitationBoo=!1,e.fullScreenEntity=null,e.gridEntity=null,e.adsCd=3e4,e.startTime=0,e.showWay=0,e}return i(e,t),e.getInstance=function(){return t.getInstance.call(this)},e.prototype.preloadBanner=function(){var t=this;if(cc.sys.platform==cc.sys.WECHAT_GAME||window.wx){var e=window.wx.getSystemInfoSync();this.bannerEntity=window.wx.createBannerAd({adUnitId:"adunit-6303b62db7c37bd5",adIntervals:30,style:{left:(e.screenWidth-300)/2,top:e.screenHeight/6*5,width:300}}),this.bannerEntity.onResize(function(){t.bannerEntity.style.top=e.screenHeight/6*5,t.bannerEntity.style.width=300,t.bannerEntity.style.left=(e.screenWidth-300)/2}),this.bannerEntity.onError(function(t){console.log(t)})}},e.prototype.showBanner=function(){(cc.sys.platform==cc.sys.WECHAT_GAME||window.wx)&&(c.default.birdLev<3||(this.bannerEntity?this.bannerEntity.show():this.preloadBanner()))},e.prototype.hideBanner=function(){(cc.sys.platform==cc.sys.WECHAT_GAME||window.wx)&&(c.default.birdLev<3||(this.bannerEntity?this.bannerEntity.hide():this.preloadBanner()))},e.prototype.preloadExcitation=function(){var t=this;(cc.sys.platform==cc.sys.WECHAT_GAME||window.wx)&&(this.excitationEntity=window.wx.createRewardedVideoAd({adUnitId:"adunit-e39820c6e30083e3"}),this.excitationEntity.onError(function(t){console.log("this.videoAd.onError"+t)}),this.excitationEntity.onClose(function(e){t.showExcitationBoo=!1,e&&e.isEnded||void 0===e?(t.excitation_cb&&t.excitation_arg&&t.excitation_cb.call(t.excitation_arg,1),t.excitationEntity.onLoad(function(){})):(t.excitation_cb&&t.excitation_arg&&t.excitation_cb.call(t.excitation_arg,0),t.excitationEntity.onLoad(function(){}))}),this.excitationEntity.onLoad(function(){}))},e.prototype.showExcitation=function(t,e){var o=this;(cc.sys.platform==cc.sys.WECHAT_GAME||window.wx)&&(this.showExcitationBoo||c.default.birdLev<5||(this.excitation_cb=t,this.excitation_arg=e,this.excitationEntity?(this.showExcitationBoo=!0,this.excitationEntity.show().catch(function(){o.showExcitationBoo=!1,cc.find("tipNode").getComponent(s.default).showNoView(),t&&e&&t.call(e,0)}).then(function(){o.showExcitationBoo=!1,console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")})):(cc.find("tipNode").getComponent(s.default).showNoView(),this.preloadExcitation())))},e.prototype.preloadFullScreen=function(){var t=this;(cc.sys.platform==cc.sys.WECHAT_GAME||window.wx)&&(this.fullScreenEntity||(this.fullScreenEntity=window.wx.createInterstitialAd({adUnitId:"adunit-3fd8377cb9a8c2cb"}),this.fullScreenEntity.onClose(function(){1==t.showWay&&t.showGrid()})),this.fullScreenEntity.onLoad(function(){}))},e.prototype.showFullScreen=function(t){(cc.sys.platform==cc.sys.WECHAT_GAME||window.wx)&&(c.default.birdLev<3||(new Date).getTime()-this.startTime<this.adsCd||(this.startTime=(new Date).getTime(),this.showWay=t,this.fullScreenEntity?(this.fullScreenEntity.show(),this.fullScreenEntity.load()):this.preloadFullScreen()))},e.prototype.preloadGrid=function(){if(cc.sys.platform==cc.sys.WECHAT_GAME||window.wx){if(!this.gridEntity){var t=window.wx.getSystemInfoSync();this.gridEntity=window.wx.createCustomAd({adUnitId:"adunit-f2c73ccfe1ed80b3",style:{top:t.screenHeight/6*1.2,fixed:!0}})}this.gridEntity.onLoad(function(){})}},e.prototype.showGrid=function(){(cc.sys.platform==cc.sys.WECHAT_GAME||window.wx)&&(c.default.birdLev<=6||(this.gridEntity?this.gridEntity.show():this.preloadGrid()))},e.prototype.hideGrid=function(){(cc.sys.platform==cc.sys.WECHAT_GAME||window.wx)&&(c.default.birdLev<=6||(this.gridEntity?this.gridEntity.hide():this.preloadGrid()))},r([u],e)}(a.BaseInst));o.default=d,cc._RF.pop()},{"../base/BaseInst":"BaseInst","../common/AppData":"AppData","../otherOffer/OtherNoAdTip":"OtherNoAdTip"}],AniPool:[function(t,e,o){"use strict";cc._RF.push(e,"e4068R61AZBKalERVMpV6VR","AniPool");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.createPool=function(t,e,o){if(!this._pools[t]){this._prefabs[t]=e;for(var n=new cc.NodePool,i=0;i<o;i++){var r=cc.instantiate(e);r.name=t,this._birdScale[t]||(this._birdScale[t]=r.scale),n.put(r)}this._pools[t]=n}},e.getFromPool=function(t){var e=this._pools[t],o=null;if(e.size()>0)o=e.get();else if(this._prefabs[t]){var n=cc.instantiate(this._prefabs[t]);e.put(n),o=e.get()}return o},e.putInPool=function(t,e){e.setPosition(cc.v2()),e.scale=this._birdScale[t],e.active=!0;var o=e.getComponent("Action");o.rebackNormal(),o.flyBoo=!1,o.currentFlyTween&&(o.currentFlyTween.stop(),o.currentFlyTween=null),e.stopAllActions(),this._pools[t].put(e)},e.clearAll=function(){for(var t in this._pools)for(var e=this._pools[t],o=0;o<e.length;o++){var n=e[o];n&&n.clear()}this._pools=[],this._prefabs={},this._birdScale={}},e._pools={},e._prefabs={},e._birdScale={},r([c],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],AppData:[function(t,e,o){"use strict";cc._RF.push(e,"f9700H3hOpM6qaqG8petPGQ","AppData");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../base/BaseInst"),c=t("../common/GlobalInferfance"),s=t("../control/DatalController"),l=t("../global/GlobalFunc"),u=cc._decorator,d=u.ccclass,p=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shopJsonData={},e}var o;return i(e,t),o=e,e.getAni_index=function(){var t=this,e={1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1,10:1};return cc.resources.load("data/shopData",function(o,n){if(o)return cc.error(o),null;for(var i in t.skinShop.use_anim){var r=n.json[i],a=Number(r.posId),c=Number(r.posIndex);e[a]=c}}),e},e.adReady=function(){return 0==this.adCd},Object.defineProperty(e,"show_guide",{get:function(){return o.birdLev>=1&&o.birdLev<=2},enumerable:!1,configurable:!0}),e.prototype.loadShopJson=function(){return new Promise(function(t){cc.resources.load("data/shopData",function(e,o){e?cc.error(e):t(o)})})},e.getInstance=function(){return t.getInstance.call(this)},e.prototype.initData=function(){var t=s.default.getInstance().getRecordData();o.AppDataObj=t,this.initLevelData(),this.initShopData(),this.initGoldData()},e.prototype.initShopData=function(){var t=this,e=s.default.getInstance().getShopData();o.skinShop=e;var n=new Date(l.getGameTime()).toLocaleDateString(),i=new Date(o.skinShop.discountTime).toLocaleDateString();this.loadShopJson().then(function(e){t.shopJsonData=e.json,0!=o.skinShop.discountTime&&n==i||t.reloadShopData()})},e.prototype.reloadShopData=function(){o.skinShop.discountItem=s.default.getInstance().getShopDiscountObj(),o.skinShop.discountTime=l.getGameTime(),this.saveShopData()},e.prototype.initLevelData=function(){var t=cc.sys.localStorage.getItem(c.CustomLocalStorageKey.LEV);t&&(o.birdLev=parseInt(t))},e.prototype.saveGold=function(){cc.sys.localStorage.setItem(c.CustomLocalStorageKey.GOLD,String(o.userGold))},e.prototype.initGoldData=function(){var t=cc.sys.localStorage.getItem(c.CustomLocalStorageKey.GOLD);t&&(o.userGold=Number(t))},e.prototype.saveData=function(){o.AppDataObj&&s.default.getInstance().setRecordData(o.AppDataObj)},e.prototype.saveShopData=function(){o.skinShop&&cc.sys.localStorage.setItem(c.CustomLocalStorageKey.SKIN_SHOP,JSON.stringify(o.skinShop))},e.AppDataObj=null,e.userGold=0,e.skinShop=null,e.quickGetState=!0,e.CpuState=!0,e.soundOpen=!0,e.musicOpen=!0,e.shakeOpen=!0,e.isAddBranch=!1,e.gameComplete=!1,e.adCd=0,e.readyOk=!1,e.game_step=0,e.addtube=0,e.rollback=0,e.path=[],e.colourReach=[],e.reopenNum=0,e.aniFinish=!0,e.initGuide=null,e.hideNode=!1,e.waitTime=0,e.banner_state=!1,e.level_ids=[],e.startSlideOper=!1,e.gameCom=null,e.passPrompts=[],e.inAppHideTime=0,e.rewardAdLoadState=!1,e.birdLev=1,e.cup_skin_index=1,e.bg_index=1,e.dataBuffers=[],e.markBuffers=[],e.bannerTop=1,o=r([d],e)}(a.BaseInst));o.default=p,cc._RF.pop()},{"../base/BaseInst":"BaseInst","../common/GlobalInferfance":"GlobalInferfance","../control/DatalController":"DatalController","../global/GlobalFunc":"GlobalFunc"}],AudioCenter:[function(t,e,o){"use strict";cc._RF.push(e,"555a2O+l65FuJ29RcLjdkKy","AudioCenter");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(e){r(e)}}function c(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../base/BaseInst"),l=t("../common/AppData"),u=t("./DatalController"),d=cc._decorator,p=d.ccclass,h=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgPlayBoo=!1,e.cacheList={},e}return i(e,t),e.getInstance=function(){return t.getInstance.call(this)},e.prototype.playBgMusic=function(){return a(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return!l.default.AppDataObj.music_open||this.bgPlayBoo?[2]:(this.bgPlayBoo=!0,[4,this.loadClip("music/bg")]);case 1:return(t=e.sent())?(cc.audioEngine.playMusic(t,!0),[2]):[2]}})})},e.prototype.stopBgMusic=function(){this.bgPlayBoo=!1,cc.audioEngine.stopMusic()},e.prototype.playEffect=function(t){return a(this,void 0,void 0,function(){var e,o;return c(this,function(n){switch(n.label){case 0:return l.default.AppDataObj.sound_open?(e="music/"+t,[4,this.loadClip(e)]):[2];case 1:return(o=n.sent())?(cc.audioEngine.play(o,!1,1),[2]):[2]}})})},e.prototype.preloadFromRemote=function(){var t=this,e=["type_hark_1","type_hark_2","type_hark_3","type_hark_4","type_hark_5","type_hark_6","type_hark_7","type_hark_8","type_hark_9","type_hark_10","bg","gamewin"];u.default.getInstance().getBundle("remote_ass",function(o){for(var n=function(n){var i="music/"+e[n];o.load(i,cc.AudioClip,function(e,o){t.cacheList[i]=o})},i=0;i<=e.length;i++)n(i)},this)},e.prototype.loadClip=function(t){return a(this,void 0,void 0,function(){return c(this,function(){return[2,new Promise(function(e){u.default.getInstance().getBundle("remote_ass",function(o){o.load(t,cc.AudioClip,function(t,o){e(t?null:o)})},this)})]})})},r([p],e)}(s.BaseInst));o.default=h,cc._RF.pop()},{"../base/BaseInst":"BaseInst","../common/AppData":"AppData","./DatalController":"DatalController"}],BaseInst:[function(t,e,o){"use strict";cc._RF.push(e,"fa4b3rnP3NAKb+xt8f8q3Md","BaseInst");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.BaseInst=void 0;var i=cc._decorator,r=i.ccclass,a=(i.property,function(){function t(){}return t.getInstance=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=this;if(!o._instance){var n=t.length;0==n?o._instance=new o:1==n?o._instance=new o(t[0]):2==n?o._instance=new o(t[0],t[1]):3==n?o._instance=new o(t[0],t[1],t[2]):4==n?o._instance=new o(t[0],t[1],t[2],t[3]):5==n&&(o._instance=new o(t[0],t[1],t[2],t[3],t[4]))}return o._instance},n([r],t)}());o.BaseInst=a,cc._RF.pop()},{}],BlockType:[function(t,e,o){"use strict";cc._RF.push(e,"212e4R8UJpNR5TxuO+kfgFv","BlockType");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,a=(i.property,function(){function t(){}return t.getBlockInfoById=function(t){return this.deepCopyObj(this.block_data[t])},t.deepCopyObj=function(t){var e={};for(var o in t)e[o]=t[o];return e},t.block_data={1:{id:1,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u5757",type:0,assets:"quest_block_1"},2:{id:2,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u5757",type:0,assets:"quest_block_2"},3:{id:3,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u5757",type:0,assets:"quest_block_3"},4:{id:4,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u5757",type:0,assets:"quest_block_4"},5:{id:5,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u5757",type:0,assets:"quest_block_5"},6:{id:6,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u5757",type:0,assets:"quest_block_6"},7:{id:7,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u5757",type:0,assets:"quest_block_7"},8:{id:8,baseType:!1,IndependentType:!1,ratioGrid:0,desc:"\u661f\u661f",type:1,assets:"collect_star"},9:{id:9,baseType:!1,IndependentType:!1,ratioGrid:0,desc:"\u78c1\u94c1",type:2,assets:"collect_magnet",ani:!0},10:{id:10,baseType:!1,IndependentType:!1,ratioGrid:0,desc:"\u51b0\u5757",type:3,assets:"game_block_ice_1"},11:{id:11,baseType:!1,IndependentType:!1,ratioGrid:0,desc:"\u51b0\u5757",type:3,assets:"game_block_ice_2"},12:{id:12,baseType:!1,IndependentType:!1,ratioGrid:0,desc:"\u51b0\u5757",type:3,assets:"game_block_ice_3"},13:{id:13,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u51b0\u70b8\u5f39",type:4,assets:"tmp_icebomb"},14:{id:14,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u68a6\u60f3\u5b9d\u77f3",type:5,assets:"collect_dreamgem",ani:!0},15:{id:15,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u68a6\u60f3\u5b9d\u77f3",type:5,assets:"collect_dreamgem",ani:!0},16:{id:16,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u68a6\u60f3\u5b9d\u77f3",type:5,assets:"collect_dreamgem"},17:{id:17,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u68a6\u60f3\u5b9d\u77f3",type:5,assets:"collect_dreamgem"},18:{id:18,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u68a6\u60f3\u5b9d\u77f3",type:5,assets:"collect_dreamgem"},19:{id:19,baseType:!1,IndependentType:!1,ratioGrid:1,desc:"\u767d\u8272\u65b9\u5757",type:6,assets:"game_block_white"},20:{id:20,baseType:!1,IndependentType:!1,ratioGrid:1,desc:"\u77f3\u5934",type:7,assets:""},21:{id:21,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u7206\u70b8\u6c14\u7403",type:8,assets:"collect_bomb"},22:{id:22,baseType:!1,IndependentType:!0,ratioGrid:1,desc:"\u8f93\u9001\u5e26",type:9,assets:"tmp_conveyor"},23:{id:23,baseType:!1,IndependentType:!0,ratioGrid:1,desc:"\u8f93\u9001\u5e26",type:9,assets:"tmp_conveyor"},24:{id:24,baseType:!1,IndependentType:!0,ratioGrid:1,desc:"\u8f93\u9001\u5e26",type:9,assets:"tmp_conveyor"},25:{id:25,baseType:!1,IndependentType:!0,ratioGrid:1,desc:"\u8f93\u9001\u5e26",type:9,assets:"tmp_conveyor"},26:{id:26,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u79fb\u52a8\u5b9d\u77f3",type:10,assets:"collect_transfer"},27:{id:27,baseType:!0,IndependentType:!0,ratioGrid:4,desc:"\u97f3\u4e50\u76d2",type:11,assets:"tmp_music_box",ani:!0},28:{id:28,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u68a6\u60f3\u5b9d\u77f3\u5236\u9020\u673a",type:12,assets:"tmp_gemmachine",ani:!0},29:{id:29,baseType:!0,IndependentType:!0,relationId:1,ratioGrid:1,desc:"\u5b9d\u77f3\u76d2\u5b50",type:13,assets:"giftbox_1"},30:{id:30,baseType:!0,IndependentType:!0,ratioGrid:1,relationId:2,desc:"\u5b9d\u77f3\u76d2\u5b50",type:13,assets:"giftbox_2"},31:{id:31,baseType:!0,IndependentType:!0,ratioGrid:1,relationId:3,desc:"\u5b9d\u77f3\u76d2\u5b50",type:13,assets:"giftbox_3"},32:{id:32,baseType:!0,IndependentType:!0,ratioGrid:1,relationId:4,desc:"\u5b9d\u77f3\u76d2\u5b50",type:13,assets:"giftbox_4"},33:{id:33,baseType:!0,IndependentType:!0,ratioGrid:1,relationId:5,desc:"\u5b9d\u77f3\u76d2\u5b50",type:13,assets:"giftbox_5"},34:{id:34,baseType:!0,IndependentType:!0,ratioGrid:1,relationId:6,desc:"\u5b9d\u77f3\u76d2\u5b50",type:13,assets:"giftbox_6"},35:{id:35,baseType:!0,IndependentType:!0,ratioGrid:1,relationId:7,desc:"\u5b9d\u77f3\u76d2\u5b50",type:13,assets:"giftbox_7"},36:{id:36,baseType:!1,IndependentType:!0,ratioGrid:1,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble",ani:!0},37:{id:37,baseType:!1,IndependentType:!0,ratioGrid:1,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble",ani:!0},38:{id:38,baseType:!1,IndependentType:!0,ratioGrid:1,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble",ani:!0},39:{id:39,baseType:!1,IndependentType:!0,ratioGrid:1,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble",ani:!0},40:{id:40,baseType:!1,IndependentType:!0,ratioGrid:1,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble",ani:!0},41:{id:41,baseType:!1,IndependentType:!0,ratioGrid:1,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble",ani:!0},42:{id:42,baseType:!1,IndependentType:!0,ratioGrid:1,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble",ani:!0},43:{id:43,baseType:!1,IndependentType:!0,ratioGrid:1,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble",ani:!0},44:{id:44,baseType:!1,IndependentType:!0,ratioGrid:4,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble",ani:!0},45:{id:45,baseType:!1,IndependentType:!0,ratioGrid:4,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble"},46:{id:46,baseType:!1,IndependentType:!0,ratioGrid:4,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble"},47:{id:47,baseType:!1,IndependentType:!0,ratioGrid:4,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble"},48:{id:48,baseType:!1,IndependentType:!0,ratioGrid:4,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble"},49:{id:49,baseType:!1,IndependentType:!0,ratioGrid:4,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble"},50:{id:50,baseType:!1,IndependentType:!0,ratioGrid:4,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble"},51:{id:44,baseType:!1,IndependentType:!0,ratioGrid:4,desc:"\u6ce1\u6ce1",type:14,assets:"collect_bubble"},52:{id:52,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u97f3\u4e50\u76d2",type:11,assets:"tmp_music_box",ani:!0},53:{id:53,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u51b0\u5757\u5236\u9020\u673a",type:15,assets:"tmp_icemachine",ani:!0},54:{id:54,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u51b0\u5757\u5236\u9020\u673a",type:15,assets:"tmp_icemachine",ani:!0},55:{id:55,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u51b0\u5757\u5236\u9020\u673a",type:15,assets:"tmp_icemachine",ani:!0},56:{id:56,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u7eb8\u98de\u673a",type:16,assets:"collect_paper_airplane"},57:{id:57,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u706b\u7bad",type:18,assets:"level_rocket"},58:{id:58,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u706b\u7bad",type:18,assets:"level_rocket"},59:{id:59,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u706b\u7bad",type:18,assets:"level_rocket"},60:{id:60,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u706b\u7bad",type:18,assets:"level_rocket"},61:{id:61,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u73cd\u73e0",type:19,assets:"collect_pearl",ani:!0},62:{id:62,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u9e3d\u5b50",type:20,assets:"collect_pigeon",ani:!0},63:{id:63,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u80fd\u91cf\u7403",type:21,assets:""},64:{id:64,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u80fd\u91cf\u7403",type:21,assets:""},65:{id:65,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u80fd\u91cf\u7403",type:21,assets:""},66:{id:66,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u73cd\u73e0-\u4efb\u52a1\u6536\u96c6",type:19,assets:"collect_pearl",ani:!0},67:{id:67,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u5c0f\u718a\u76d2\u5b50",type:20,assets:"collect_bear"},68:{id:68,baseType:!0,IndependentType:!0,ratioGrid:1,desc:"\u725b\u5976",type:21,assets:"collect_milk"},69:{id:69,baseType:!1,IndependentType:!1,ratioGrid:1,desc:"\u97f3\u7b26-\u97f3\u4e50\u76d2\u5236\u9020",type:22,assets:"collect_notes"},70:{id:70,baseType:!1,IndependentType:!0,ratioGrid:0,desc:"\u969c\u788d-\u5206\u5272\u7ebf",assets:""}},n([r],t)}());o.default=a,cc._RF.pop()},{}],BranchEntityControl:[function(t,e,o){"use strict";cc._RF.push(e,"6e220zbzvhA9KzSDoE59cRr","BranchEntityControl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./common/GlobalInferfance"),c=t("./common/AppData"),s=t("./control/EventController"),l=t("./control/AudioCenter"),u=t("./prefabs/Branch"),d=t("./prefabs/BranchPool"),p=t("./util/ModifyNode"),h=cc._decorator,f=h.ccclass,y=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._cups=[],e._actions=[],e.selected=null,e.opers=[],e.layout_h=null,e.layout_scale=1,e.__ids=[],e.downBranchs=[],e}return i(e,t),e.prototype.start=function(){},e.prototype.createBranchEntity=function(t,e){if(void 0===e&&(e=c.default.cup_skin_index),this.__ids=[].concat(t),this.downBranchs=[],this.layout_h&&(this.layout_h.node.destroyAllChildren(),this.layout_h.node.removeAllChildren()),this._cups=[],this.selected=null,this._actions=[],0!=t.length){for(var o=0;o<t.length;o++){var n=t[o],i=d.default.getFromPool();i.name=o.toString(),i.parent=this.node;var r=i.getComponent(u.default);r.setBranchIndex(e),r.setBranchData(n,this.clickBranchEntity.bind(this),o),this._cups.push(r)}null==this.layout_h&&(this.layout_h=C(cc.Layout.Type.HORIZONTAL,this.node,"layout_h"),this.layout_h.node.zIndex=1,p.default.getInstance().adapterNode(this.layout_h.node)),this._cups[0].node.getContentSize();var a=C(cc.Layout.Type.VERTICAL,this.layout_h.node,"layout_left");a.node.anchorX=0;var s=C(cc.Layout.Type.VERTICAL,this.layout_h.node,"layout_right");s.node.anchorX=1,s.node.scaleX=-1;var l=[a,s],h=0;for(o=0;o<this._cups.length;o++)this._cups[o].node.parent=l[h].node,h=0==h?1:0;var f=Math.max(a.node.childrenCount,s.node.childrenCount);a.spacingY=s.spacingY=120;var y=f*this._cups[0].node.getChildByName("clickLyer").height,_=this.node.parent.getChildByName("topBoarder"),g=this.node.parent.getChildByName("bottomBoarder"),m=_.y+-g.y;if(m<y){var v=1-(y-m)/y/2;s.node.scale=v,s.node.scaleX=-v,a.node.scale=v}var b=cc.view.getVisibleSize().width/2;a.node.width=b/this.layout_h.node.scale,s.node.width=b/this.layout_h.node.scale,this.layout_scale=a.node.scaleX*this.layout_h.node.scale,this.layout_h.enabled=!0,a.updateLayout(),s.updateLayout(),this.layout_h.updateLayout()}function C(t,e,o){var n=new cc.Node(o);n.parent=e;var i=n.addComponent(cc.Layout);return i.type=t,i.resizeMode=cc.Layout.ResizeMode.CONTAINER,i}},e.prototype.addBranchEntity=function(){for(var t,e=[0,0,0,0],o=this.layout_h.node.getChildByName("layout_left").getComponent(cc.Layout),n=this.layout_h.node.getChildByName("layout_right").getComponent(cc.Layout),i=!1,r=0,l=[],p=[],h=0,f=0,y=0,_=0;_<o.node.childrenCount;_++)(g=o.node.children[_].getComponent("Branch")).downed?(t=!0,l.push(g)):h+=1;for(_=0;_<n.node.childrenCount;_++){var g;(g=n.node.children[_].getComponent("Branch")).downed?(i=!0,p.push(g)):f+=1}var m=!1;if(t||i){m=!1;var v=[];h>f?(v=p,f+=1):(v=l,h+=1);var b=v.sort(function(t,e){var o=Math.abs(t.node.y),n=Math.abs(e.node.y);return 0==o&&(o=1),0==n&&(n=1),o-n})[0],C=b.node.getChildByName("branch"+c.default.cup_skin_index).getChildByName("branch");y=(A=b.node.getChildByName("clickLyer")).height,A.active=!0,C.active=!0,C.angle=0,C.x=0,C.setPosition(cc.v2()),b.downed=!1,b.polled=!1,b.shakeState=!1,b.execAddBranchAni(),r=b.branchIndex,b.setBranchData(e,this.clickBranchEntity.bind(this),r),this._cups[b.branchIndex]=b}else{m=!0;var w=this._cups.length,I=d.default.getFromPool();I.parent=this.node;var A,S=I.getComponent(u.default);S.setBranchData(e,this.clickBranchEntity.bind(this),w),S.setBranchIndex(c.default.cup_skin_index),y=(A=I.getChildByName("clickLyer")).height,this._cups.push(S),I.name=this._cups.length.toString();var T=null;w%2==0?(T=this.layout_h.node.getChildByName("layout_left").getComponent(cc.Layout),h+=1):(T=this.layout_h.node.getChildByName("layout_right").getComponent(cc.Layout),f+=1),this._cups[this._cups.length-1].node.parent=T.node,T.updateLayout(),S.execAddBranchAni(),r=w}var B=Math.max(h,f)*y,O=this.node.parent.getChildByName("topBoarder"),N=this.node.parent.getChildByName("bottomBoarder"),E=O.y+-N.y;if(E<B){var P=1-(B-E)/B/2;n.node.scale=P,n.node.scaleX=-P,o.node.scale=P}this.layout_scale=o.node.scaleX,this.layout_h.enabled=!0,this.layout_h.updateLayout(),o.updateLayout(),n.updateLayout(),s.default.getInstance().emitListen(a.CUSTOM_UPDATE_INFO,{newBranch:!0,index:r,useNew:m})},e.prototype.isGameFail=function(){for(var t=!1,e=0;e<this._cups.length;e++){var o=this._cups[e];if(o){for(var n=0;n<this._cups.length;n++){var i=this._cups[n];i!=o&&i&&this.isCanMove(o,i)&&(t=!0,o.topColorNum>i.emptyNum&&(t=!1))}if(t)break}}s.default.getInstance().emitListen(a.CUSTOM_END_JUDGE,{canPoll:t})},e.prototype.filterUsedBranchs=function(t){for(var e=0;e<this.opers.length;e++)this.opers[e].branchIndex==t&&(this.opers.splice(e,1),e-=1)},e.prototype.getBranchByIndex=function(t){return this._cups[t]},e.prototype.containsPos=function(t){for(var e=0;e<this._cups.length;e++)if(this._cups[e]&&this._cups[e].node.getBoundingBoxToWorld().contains(t))return this._cups[e];return null},e.prototype.clickBranchEntity=function(t){if(c.default.waitTime=0,!(!c.default.aniFinish||this.selected&&this.selected.finished)&&(1!=c.default.birdLev&&2!=c.default.birdLev||c.default.initGuide==t.node&&null!=c.default.initGuide))if(this.selected){var e=1==c.default.birdLev||2==c.default.birdLev;if(this.selected!=t||e){if(this.isCanMove(this.selected,t)&&this.selected!=t){this.transPageStr(),this.selectOper(this.selected,!1);var o=this.selected.branchIndex,n=t.branchIndex,i=t.emptyNum,r=this.selected.topColorNum,u=i>=r?r:i,d=this.selected.pop(u,!0);return t.push(d),this.transPageStr(),c.default.game_step+=1,c.default.path.push(this.selected.branchIndex.toString()+"."+t.branchIndex.toString()+".0"),this._actions.push({from:o,to:n,num:u,EndBranchIndex:t.branchIndex,SelectBranchIndex:this.selected.branchIndex}),s.default.getInstance().emitListen(a.CUSTOM_UPDATE_INFO,{pollNum:u,from:o,to:n}),l.default.getInstance().playEffect(a.AudioEnum.Fly_2_2),this.selected=null,e&&(c.default.initGuide=null,s.default.getInstance().emitListen(a.CUSTOM_NEXT_GUIDE)),this.isGameFail(),!0}return e||(this.selectOper(this.selected,!1),this.selected=t,this.selectOper(t,!0)),!1}this.selectOper(t,!1),this.selected=null}else{if(t.isEmpty())return;this.selected=t,this.selectOper(t,!0),1!=c.default.birdLev&&2!=c.default.birdLev||(c.default.initGuide=null,s.default.getInstance().emitListen(a.CUSTOM_NEXT_GUIDE))}},e.prototype.transPageStr=function(){for(var t="",e=0;e<this._cups.length;e++)this._cups[e]?t+=this._cups[e].cupInfo.join(""):t+="0000";return t},e.prototype.selectOper=function(t,e){var o=t.branchIndex,n=t.topColorNum;s.default.getInstance().emitListen(a.CUSTOM_UPDATE_STATE,{focusIndex:o,bool:e,topNum:n})},e.prototype.isCanMove=function(t,e){var o=t.getFirstData(),n=e.getFirstData();return 0!=o&&(0==n||n==o&&e.emptyNum>0&&(t.topColorNum<=e.emptyNum||t.topColorNum>0))},e.prototype.isBranchFull=function(t){return this._cups[t]?this._cups[t].finished:-1},e.prototype.allBranchFull=function(){for(var t=!0,e=0;e<this._cups.length;e++)if(!(this._cups[e]&&this._cups[e].isEmpty()||!this._cups[e]||this._cups[e].finished)){t=!1;break}return c.default.gameComplete=t,t},Object.defineProperty(e.prototype,"ids",{get:function(){for(var t=[],e=0;e<this._cups.length;e++)if(this._cups[e]){var o=this._cups[e];t=t.concat(o.cupInfo)}else t.push(13,13,13,13);return t},enumerable:!1,configurable:!0}),e.prototype.getEntityRealPos=function(t,e){return this._cups[t].transLocalPos(e)},e.prototype.checkAllShake=function(){for(var t=!1,e=0;e<this._cups.length;e++)if(this._cups[e]&&this._cups[e].shakeState){t=!0;break}return t},e.prototype.getBranchShakeState=function(t){return this._cups[t].shakeState},e.prototype.shakeBranch=function(t){var e=this;if(this._cups[t].shakeState)return!0;this._cups[t].shakeState=!0;var o=this._cups[t].node,n=cc.tween().to(.2,{angle:-2}),i=cc.tween().to(.2,{angle:1}),r=cc.tween().to(.2,{angle:-1}),a=cc.tween().to(.2,{angle:0});return cc.tween(o).then(n).then(i).then(r).then(a).call(function(){e._cups[t]&&(e._cups[t].shakeState=!1)}).start(),null},e.prototype.downAllBranchAni=function(){},e.prototype.recordBranchs=function(t){this._cups[t]&&this.downBranchs.push(this._cups[t])},e.prototype.execBranchDown=function(t){var e=this;if(this._cups[t]){var o=this._cups[t].node;o.getChildByName("clickLyer").active=!1;var n=o.getChildByName("branch"+c.default.cup_skin_index).getChildByName("branch"),i=cc.view.getVisibleSize().height,r=cc.tween().to(.8,{y:200-i,angle:-90},{easing:"sineIn"});cc.tween(n).delay(.15).then(r).call(function(){e._cups[t]&&(e._cups[t].downed=!0,e._cups[t]=null),n.active=!1}).start()}},e.prototype.getActionNum=function(){return this._actions.length},e.prototype.releasNodeAction=function(t){for(var e=0;e<this._actions.length;e++)this._actions[e].from!=t&&this._actions[e].to!=t||(this._actions.splice(e,1),e-=1)},e.prototype.undoAction=function(){var t=this._actions[this._actions.length-1];if(!t)return!1;var e=t.from,o=t.to,n=t.num,i=this._cups[o],r=this._cups[e];if(i&&r){if(!(i.topColorNum<n||r.emptyNum<n)){this.transPageStr();var l=i.pop(n);return r.push(l),this.transPageStr(),c.default.path.push(o.toString()+"."+e.toString()+".1"),s.default.getInstance().emitListen(a.CUSTOM_UPDATE_INFO,{pollNum:n,from:o,to:e,quick:!0}),this._actions.pop(),!0}this._actions=[]}else this._actions=[]},e.prototype.onReplaceBranchs=function(t){for(var e=0;e<this._cups.length;e++)this._cups[e]&&this._cups[e].setBranchIndex(t)},e.prototype.onRealseBranchs=function(){for(var t=0;t<this._cups.length;t++)this._cups[t]&&d.default.putInPool(this._cups[t].node);for(t=0;t<this.downBranchs.length;t++)this.downBranchs[t]&&d.default.putInPool(this.downBranchs[t].node);this.downBranchs=[],this._cups=[],this.selected=null,this._actions=[]},r([f],e)}(cc.Component));o.default=y,cc._RF.pop()},{"./common/AppData":"AppData","./common/GlobalInferfance":"GlobalInferfance","./control/AudioCenter":"AudioCenter","./control/EventController":"EventController","./prefabs/Branch":"Branch","./prefabs/BranchPool":"BranchPool","./util/ModifyNode":"ModifyNode"}],BranchPool:[function(t,e,o){"use strict";cc._RF.push(e,"7d10etzs/tFhaaueQyDdvJx","BranchPool");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../common/AppData"),c=t("./Branch"),s=cc._decorator,l=s.ccclass,u=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.createPool=function(t,e){this._pool=new cc.NodePool,this.__prefab=t;for(var o=0;o<e;o++){var n=cc.instantiate(t);this._pool.put(n)}},e.getFromPool=function(){var t=null;if(this._pool.size()>0)t=this._pool.get();else if(this.__prefab){var e=cc.instantiate(this.__prefab);this._pool.put(e),t=this._pool.get()}return t},e.putInPool=function(t){t.scaleX=Math.abs(t.scaleX),t.name="";var e=t.getComponent(c.default);e.branchIndex=0,e.shakeState=!1,e.polled=!1,e.downed=!1,e.__ids=[],e.setBranchIndex(a.default.cup_skin_index),t.getChildByName("clickLyer").active=!0;var o=t.getChildByName("branch"+a.default.cup_skin_index).getChildByName("branch");cc.Tween.stopAllByTarget(o),o.opacity=255,o.active=!0,o.setPosition(cc.v2(0,0)),o.angle=0,this._pool.put(t)},e.clearAll=function(){this._pool&&this._pool.clear(),this.__prefab=null},r([l],e)}(cc.Component));o.default=u,cc._RF.pop()},{"../common/AppData":"AppData","./Branch":"Branch"}],Branch:[function(t,e,o){"use strict";cc._RF.push(e,"6564e9Dgu1EkYDP0K3YKn6h","Branch");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../common/GlobalInferfance"),c=t("../common/AppData"),s=t("../control/EventController"),l=cc._decorator,u=l.ccclass,d=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.branchIndex=0,e.shakeState=!1,e.polled=!1,e.downed=!1,e.onClick=null,e.infoNormals=[],e.__ids=[],e}return i(e,t),e.prototype.transLocalPos=function(t){for(var e=[],o=this.node.getChildByName("branch"+c.default.cup_skin_index),n=[o.getChildByName("point1"),o.getChildByName("point2"),o.getChildByName("point3"),o.getChildByName("point4")],i=0;i<n.length;i++){var r=n[i].getPosition(),a=this.node.convertToWorldSpaceAR(r),s=t.convertToNodeSpaceAR(a);e.push(s)}return e},e.prototype.setBranchIndex=function(t){void 0===t&&(t=c.default.cup_skin_index);for(var e=1;e<=4;e++)this.node.getChildByName("branch"+e).active=!1,t==e&&(this.node.getChildByName("branch"+e).active=!0)},e.prototype.start=function(){this.node.getChildByName("clickLyer").on(cc.Node.EventType.TOUCH_START,this.onBtn_click,this)},e.prototype.onBtn_click=function(){this&&this.finished||c.default.gameComplete||c.default.startSlideOper||this.onClick&&this.onClick(this)},e.prototype.setBranchData=function(t,e,o){if(this.__ids=[].concat(t),this.onClick=e,this.branchIndex=o,this.infoNormals=[],c.default.hideNode)for(var n=0;n<this.__ids.length;n++)0!=this.__ids[n]&&0!=this.__ids[n+1]&&null!=this.__ids[n+1]&&(this.infoNormals.push(this.__ids[n]),this.__ids[n]=100)},e.prototype.execAddBranchAni=function(){var t=this.node.getChildByName("branch"+c.default.cup_skin_index).getChildByName("branch");t.x=2*-t.width,cc.tween(t).then(cc.tween().to(.7,{x:0})).call(function(){}).start()},Object.defineProperty(e.prototype,"cupInfo",{get:function(){return[].concat(this.__ids)},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return 0==this.__ids[0]&&this.__ids[0]==this.__ids[1]&&this.__ids[1]==this.__ids[2]&&this.__ids[2]==this.__ids[3]},e.prototype.pop=function(t,e){void 0===e&&(e=!1);for(var o=[],n=this.__ids.length-1;n>=0&&!(100!=this.__ids[n]&&0!=this.__ids[n]&&(o.push(this.__ids[n]),this.__ids[n]=0,o.length>=t));n--);var i=this.getFirstData();if(c.default.hideNode&&this.infoNormals.length&&e&&100==i){var r=this.infoNormals[this.infoNormals.length-1],l=1;for(n=this.infoNormals.length-2;n>=0&&r==this.infoNormals[n];n--)l+=1;for(var u=l,d=this.__ids.length-1;d>=0;d--)if(0!=this.__ids[d]){if(!(u>0))break;100==this.__ids[d]&&(this.__ids[d]=this.infoNormals.pop()),u-=1}s.default.getInstance().emitListen(a.CUSTOM_RESTORE,{restore:l,index:this.branchIndex})}return o},e.prototype.push=function(t){for(var e=0;e<this.__ids.length;e++)if(0==this.__ids[e]){var o=t.shift();if(this.__ids[e]=o,t.length<=0)break}},Object.defineProperty(e.prototype,"finished",{get:function(){return 0!=this.__ids[0]&&this.__ids[0]==this.__ids[1]&&this.__ids[1]==this.__ids[2]&&this.__ids[2]==this.__ids[3]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"emptyNum",{get:function(){var t=this.cupInfo,e=t[t.length-1];if(0!=e)return 0;for(var o=0,n=t.length-1;n>=0&&t[n]==e;n--)o+=1;return o},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topColorNum",{get:function(){for(var t=this.cupInfo,e=0,o=0,n=t.length-1;n>=0;n--)if(0!=t[n]){if(0!=e&&e!=t[n])break;e=t[n],o++}return o},enumerable:!1,configurable:!0}),e.prototype.getFirstData=function(){for(var t=this.__ids.length-1;t>=0;t--)if(0!=this.__ids[t])return this.__ids[t];return 0},r([u],e)}(cc.Component));o.default=d,cc._RF.pop()},{"../common/AppData":"AppData","../common/GlobalInferfance":"GlobalInferfance","../control/EventController":"EventController"}],1:[function(t,e,o){"use strict";o.byteLength=function(t){var e=l(t),o=e[0],n=e[1];return 3*(o+n)/4-n},o.toByteArray=function(t){var e,o,n=l(t),a=n[0],c=n[1],s=new r(u(0,a,c)),d=0,p=c>0?a-4:a;for(o=0;o<p;o+=4)e=i[t.charCodeAt(o)]<<18|i[t.charCodeAt(o+1)]<<12|i[t.charCodeAt(o+2)]<<6|i[t.charCodeAt(o+3)],s[d++]=e>>16&255,s[d++]=e>>8&255,s[d++]=255&e;return 2===c&&(e=i[t.charCodeAt(o)]<<2|i[t.charCodeAt(o+1)]>>4,s[d++]=255&e),1===c&&(e=i[t.charCodeAt(o)]<<10|i[t.charCodeAt(o+1)]<<4|i[t.charCodeAt(o+2)]>>2,s[d++]=e>>8&255,s[d++]=255&e),s},o.fromByteArray=function(t){for(var e,o=t.length,i=o%3,r=[],a=0,c=o-i;a<c;a+=16383)r.push(d(t,a,a+16383>c?c:a+16383));return 1===i?(e=t[o-1],r.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[o-2]<<8)+t[o-1],r.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),r.join("")};for(var n=[],i=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,s=a.length;c<s;++c)n[c]=a[c],i[a.charCodeAt(c)]=c;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=t.indexOf("=");return-1===o&&(o=e),[o,o===e?0:4-o%4]}function u(t,e,o){return 3*(e+o)/4-o}function d(t,e,o){for(var i,r,a=[],c=e;c<o;c+=3)i=(t[c]<<16&16711680)+(t[c+1]<<8&65280)+(255&t[c+2]),a.push(n[(r=i)>>18&63]+n[r>>12&63]+n[r>>6&63]+n[63&r]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],2:[function(t,e,o){(function(e){"use strict";var n=t("base64-js"),i=t("ieee754"),r=t("isarray");function a(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=s.prototype:(null===t&&(t=new s(e)),t.length=e),t}function s(t,e,o){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(t,e,o);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return p(this,t)}return l(this,t,e,o)}function l(t,e,o,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?y(t,e,o,n):"string"==typeof e?h(t,e,o):_(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function d(t,e,o,n){return u(e),e<=0?c(t,e):void 0!==o?"string"==typeof n?c(t,e).fill(o,n):c(t,e).fill(o):c(t,e)}function p(t,e){if(u(e),t=c(t,e<0?0:0|g(e)),!s.TYPED_ARRAY_SUPPORT)for(var o=0;o<e;++o)t[o]=0;return t}function h(t,e,o){if("string"==typeof o&&""!==o||(o="utf8"),!s.isEncoding(o))throw new TypeError('"encoding" must be a valid string encoding');var n=0|m(e,o),i=(t=c(t,n)).write(e,o);return i!==n&&(t=t.slice(0,i)),t}function f(t,e){var o=e.length<0?0:0|g(e.length);t=c(t,o);for(var n=0;n<o;n+=1)t[n]=255&e[n];return t}function y(t,e,o,n){if(e.byteLength,o<0||e.byteLength<o)throw new RangeError("'offset' is out of bounds");if(e.byteLength<o+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===o&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,o):new Uint8Array(e,o,n),s.TYPED_ARRAY_SUPPORT?(t=e).__proto__=s.prototype:t=f(t,e),t}function _(t,e){if(s.isBuffer(e)){var o=0|g(e.length);return 0===(t=c(t,o)).length?t:(e.copy(t,0,0,o),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?c(t,0):f(t,e);if("Buffer"===e.type&&r(e.data))return f(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function m(t,e){if(s.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var o=t.length;if(0===o)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*o;case"hex":return o>>>1;case"base64":return W(t).length;default:if(n)return z(t).length;e=(""+e).toLowerCase(),n=!0}}function v(t,e,o){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===o||o>this.length)&&(o=this.length),o<=0)return"";if((o>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return D(this,e,o);case"utf8":case"utf-8":return E(this,e,o);case"ascii":return L(this,e,o);case"latin1":case"binary":return R(this,e,o);case"base64":return N(this,e,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,o);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,e,o){var n=t[e];t[e]=t[o],t[o]=n}function C(t,e,o,n,i){if(0===t.length)return-1;if("string"==typeof o?(n=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,isNaN(o)&&(o=i?0:t.length-1),o<0&&(o=t.length+o),o>=t.length){if(i)return-1;o=t.length-1}else if(o<0){if(!i)return-1;o=0}if("string"==typeof e&&(e=s.from(e,n)),s.isBuffer(e))return 0===e.length?-1:w(t,e,o,n,i);if("number"==typeof e)return e&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,o):Uint8Array.prototype.lastIndexOf.call(t,e,o):w(t,[e],o,n,i);throw new TypeError("val must be string, number or Buffer")}function w(t,e,o,n,i){var r,a=1,c=t.length,s=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,c/=2,s/=2,o/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var u=-1;for(r=o;r<c;r++)if(l(t,r)===l(e,-1===u?0:r-u)){if(-1===u&&(u=r),r-u+1===s)return u*a}else-1!==u&&(r-=r-u),u=-1}else for(o+s>c&&(o=c-s),r=o;r>=0;r--){for(var d=!0,p=0;p<s;p++)if(l(t,r+p)!==l(e,p)){d=!1;break}if(d)return r}return-1}function I(t,e,o,n){o=Number(o)||0;var i=t.length-o;n?(n=Number(n))>i&&(n=i):n=i;var r=e.length;if(r%2!=0)throw new TypeError("Invalid hex string");n>r/2&&(n=r/2);for(var a=0;a<n;++a){var c=parseInt(e.substr(2*a,2),16);if(isNaN(c))return a;t[o+a]=c}return a}function A(t,e,o,n){return Z(z(e,t.length-o),t,o,n)}function S(t,e,o,n){return Z(J(e),t,o,n)}function T(t,e,o,n){return S(t,e,o,n)}function B(t,e,o,n){return Z(W(e),t,o,n)}function O(t,e,o,n){return Z(q(e,t.length-o),t,o,n)}function N(t,e,o){return 0===e&&o===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,o))}function E(t,e,o){o=Math.min(t.length,o);for(var n=[],i=e;i<o;){var r,a,c,s,l=t[i],u=null,d=l>239?4:l>223?3:l>191?2:1;if(i+d<=o)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(r=t[i+1]))&&(s=(31&l)<<6|63&r)>127&&(u=s);break;case 3:r=t[i+1],a=t[i+2],128==(192&r)&&128==(192&a)&&(s=(15&l)<<12|(63&r)<<6|63&a)>2047&&(s<55296||s>57343)&&(u=s);break;case 4:r=t[i+1],a=t[i+2],c=t[i+3],128==(192&r)&&128==(192&a)&&128==(192&c)&&(s=(15&l)<<18|(63&r)<<12|(63&a)<<6|63&c)>65535&&s<1114112&&(u=s)}null===u?(u=65533,d=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),i+=d}return k(n)}o.Buffer=s,o.SlowBuffer=function(t){return+t!=t&&(t=0),s.alloc(+t)},o.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),o.kMaxLength=a(),s.poolSize=8192,s._augment=function(t){return t.__proto__=s.prototype,t},s.from=function(t,e,o){return l(null,t,e,o)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(t,e,o){return d(null,t,e,o)},s.allocUnsafe=function(t){return p(null,t)},s.allocUnsafeSlow=function(t){return p(null,t)},s.isBuffer=function(t){return!(null==t||!t._isBuffer)},s.compare=function(t,e){if(!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var o=t.length,n=e.length,i=0,r=Math.min(o,n);i<r;++i)if(t[i]!==e[i]){o=t[i],n=e[i];break}return o<n?-1:n<o?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!r(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var o;if(void 0===e)for(e=0,o=0;o<t.length;++o)e+=t[o].length;var n=s.allocUnsafe(e),i=0;for(o=0;o<t.length;++o){var a=t[o];if(!s.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},s.byteLength=m,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)b(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)b(this,e,e+3),b(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)b(this,e,e+7),b(this,e+1,e+6),b(this,e+2,e+5),b(this,e+3,e+4);return this},s.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?E(this,0,t):v.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",e=o.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},s.prototype.compare=function(t,e,o,n,i){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===o&&(o=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||o>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=o)return 0;if(n>=i)return-1;if(e>=o)return 1;if(this===t)return 0;for(var r=(i>>>=0)-(n>>>=0),a=(o>>>=0)-(e>>>=0),c=Math.min(r,a),l=this.slice(n,i),u=t.slice(e,o),d=0;d<c;++d)if(l[d]!==u[d]){r=l[d],a=u[d];break}return r<a?-1:a<r?1:0},s.prototype.includes=function(t,e,o){return-1!==this.indexOf(t,e,o)},s.prototype.indexOf=function(t,e,o){return C(this,t,e,o,!0)},s.prototype.lastIndexOf=function(t,e,o){return C(this,t,e,o,!1)},s.prototype.write=function(t,e,o,n){if(void 0===e)n="utf8",o=this.length,e=0;else if(void 0===o&&"string"==typeof e)n=e,o=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(o)?(o|=0,void 0===n&&(n="utf8")):(n=o,o=void 0)}var i=this.length-e;if((void 0===o||o>i)&&(o=i),t.length>0&&(o<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var r=!1;;)switch(n){case"hex":return I(this,t,e,o);case"utf8":case"utf-8":return A(this,t,e,o);case"ascii":return S(this,t,e,o);case"latin1":case"binary":return T(this,t,e,o);case"base64":return B(this,t,e,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,o);default:if(r)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),r=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function k(t){var e=t.length;if(e<=P)return String.fromCharCode.apply(String,t);for(var o="",n=0;n<e;)o+=String.fromCharCode.apply(String,t.slice(n,n+=P));return o}function L(t,e,o){var n="";o=Math.min(t.length,o);for(var i=e;i<o;++i)n+=String.fromCharCode(127&t[i]);return n}function R(t,e,o){var n="";o=Math.min(t.length,o);for(var i=e;i<o;++i)n+=String.fromCharCode(t[i]);return n}function D(t,e,o){var n,i=t.length;(!e||e<0)&&(e=0),(!o||o<0||o>i)&&(o=i);for(var r="",a=e;a<o;++a)r+=(n=t[a])<16?"0"+n.toString(16):n.toString(16);return r}function j(t,e,o){for(var n=t.slice(e,o),i="",r=0;r<n.length;r+=2)i+=String.fromCharCode(n[r]+256*n[r+1]);return i}function x(t,e,o){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>o)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,o,n,i,r){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<r)throw new RangeError('"value" argument is out of bounds');if(o+n>t.length)throw new RangeError("Index out of range")}function G(t,e,o,n){e<0&&(e=65535+e+1);for(var i=0,r=Math.min(t.length-o,2);i<r;++i)t[o+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function F(t,e,o,n){e<0&&(e=4294967295+e+1);for(var i=0,r=Math.min(t.length-o,4);i<r;++i)t[o+i]=e>>>8*(n?i:3-i)&255}function U(t,e,o,n){if(o+n>t.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function Y(t,e,o,n,r){return r||U(t,0,o,4),i.write(t,e,o,n,23,4),o+4}function H(t,e,o,n,r){return r||U(t,0,o,8),i.write(t,e,o,n,52,8),o+8}s.prototype.slice=function(t,e){var o,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),s.TYPED_ARRAY_SUPPORT)(o=this.subarray(t,e)).__proto__=s.prototype;else{var i=e-t;o=new s(i,void 0);for(var r=0;r<i;++r)o[r]=this[r+t]}return o},s.prototype.readUIntLE=function(t,e,o){t|=0,e|=0,o||x(t,e,this.length);for(var n=this[t],i=1,r=0;++r<e&&(i*=256);)n+=this[t+r]*i;return n},s.prototype.readUIntBE=function(t,e,o){t|=0,e|=0,o||x(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},s.prototype.readUInt8=function(t,e){return e||x(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return e||x(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return e||x(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return e||x(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return e||x(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,o){t|=0,e|=0,o||x(t,e,this.length);for(var n=this[t],i=1,r=0;++r<e&&(i*=256);)n+=this[t+r]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},s.prototype.readIntBE=function(t,e,o){t|=0,e|=0,o||x(t,e,this.length);for(var n=e,i=1,r=this[t+--n];n>0&&(i*=256);)r+=this[t+--n]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},s.prototype.readInt8=function(t,e){return e||x(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){e||x(t,2,this.length);var o=this[t]|this[t+1]<<8;return 32768&o?4294901760|o:o},s.prototype.readInt16BE=function(t,e){e||x(t,2,this.length);var o=this[t+1]|this[t]<<8;return 32768&o?4294901760|o:o},s.prototype.readInt32LE=function(t,e){return e||x(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return e||x(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return e||x(t,4,this.length),i.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return e||x(t,4,this.length),i.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return e||x(t,8,this.length),i.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return e||x(t,8,this.length),i.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,o,n){t=+t,e|=0,o|=0,n||M(this,t,e,o,Math.pow(2,8*o)-1,0);var i=1,r=0;for(this[e]=255&t;++r<o&&(i*=256);)this[e+r]=t/i&255;return e+o},s.prototype.writeUIntBE=function(t,e,o,n){t=+t,e|=0,o|=0,n||M(this,t,e,o,Math.pow(2,8*o)-1,0);var i=o-1,r=1;for(this[e+i]=255&t;--i>=0&&(r*=256);)this[e+i]=t/r&255;return e+o},s.prototype.writeUInt8=function(t,e,o){return t=+t,e|=0,o||M(this,t,e,1,255,0),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,o){return t=+t,e|=0,o||M(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):G(this,t,e,!0),e+2},s.prototype.writeUInt16BE=function(t,e,o){return t=+t,e|=0,o||M(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):G(this,t,e,!1),e+2},s.prototype.writeUInt32LE=function(t,e,o){return t=+t,e|=0,o||M(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):F(this,t,e,!0),e+4},s.prototype.writeUInt32BE=function(t,e,o){return t=+t,e|=0,o||M(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},s.prototype.writeIntLE=function(t,e,o,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*o-1);M(this,t,e,o,i-1,-i)}var r=0,a=1,c=0;for(this[e]=255&t;++r<o&&(a*=256);)t<0&&0===c&&0!==this[e+r-1]&&(c=1),this[e+r]=(t/a>>0)-c&255;return e+o},s.prototype.writeIntBE=function(t,e,o,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*o-1);M(this,t,e,o,i-1,-i)}var r=o-1,a=1,c=0;for(this[e+r]=255&t;--r>=0&&(a*=256);)t<0&&0===c&&0!==this[e+r+1]&&(c=1),this[e+r]=(t/a>>0)-c&255;return e+o},s.prototype.writeInt8=function(t,e,o){return t=+t,e|=0,o||M(this,t,e,1,127,-128),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,o){return t=+t,e|=0,o||M(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):G(this,t,e,!0),e+2},s.prototype.writeInt16BE=function(t,e,o){return t=+t,e|=0,o||M(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):G(this,t,e,!1),e+2},s.prototype.writeInt32LE=function(t,e,o){return t=+t,e|=0,o||M(this,t,e,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):F(this,t,e,!0),e+4},s.prototype.writeInt32BE=function(t,e,o){return t=+t,e|=0,o||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},s.prototype.writeFloatLE=function(t,e,o){return Y(this,t,e,!0,o)},s.prototype.writeFloatBE=function(t,e,o){return Y(this,t,e,!1,o)},s.prototype.writeDoubleLE=function(t,e,o){return H(this,t,e,!0,o)},s.prototype.writeDoubleBE=function(t,e,o){return H(this,t,e,!1,o)},s.prototype.copy=function(t,e,o,n){if(o||(o=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<o&&(n=o),n===o)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(o<0||o>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-o&&(n=t.length-e+o);var i,r=n-o;if(this===t&&o<e&&e<n)for(i=r-1;i>=0;--i)t[i+e]=this[i+o];else if(r<1e3||!s.TYPED_ARRAY_SUPPORT)for(i=0;i<r;++i)t[i+e]=this[i+o];else Uint8Array.prototype.set.call(t,this.subarray(o,o+r),e);return r},s.prototype.fill=function(t,e,o,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,o=this.length):"string"==typeof o&&(n=o,o=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!s.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<o)throw new RangeError("Out of range index");if(o<=e)return this;var r;if(e>>>=0,o=void 0===o?this.length:o>>>0,t||(t=0),"number"==typeof t)for(r=e;r<o;++r)this[r]=t;else{var a=s.isBuffer(t)?t:z(new s(t,n).toString()),c=a.length;for(r=0;r<o-e;++r)this[r+e]=a[r%c]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function K(t){if((t=X(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function X(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function z(t,e){var o;e=e||1/0;for(var n=t.length,i=null,r=[],a=0;a<n;++a){if((o=t.charCodeAt(a))>55295&&o<57344){if(!i){if(o>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&r.push(239,191,189);continue}i=o;continue}if(o<56320){(e-=3)>-1&&r.push(239,191,189),i=o;continue}o=65536+(i-55296<<10|o-56320)}else i&&(e-=3)>-1&&r.push(239,191,189);if(i=null,o<128){if((e-=1)<0)break;r.push(o)}else if(o<2048){if((e-=2)<0)break;r.push(o>>6|192,63&o|128)}else if(o<65536){if((e-=3)<0)break;r.push(o>>12|224,o>>6&63|128,63&o|128)}else{if(!(o<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;r.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}}return r}function J(t){for(var e=[],o=0;o<t.length;++o)e.push(255&t.charCodeAt(o));return e}function q(t,e){for(var o,n,i,r=[],a=0;a<t.length&&!((e-=2)<0);++a)n=(o=t.charCodeAt(a))>>8,i=o%256,r.push(i),r.push(n);return r}function W(t){return n.toByteArray(K(t))}function Z(t,e,o,n){for(var i=0;i<n&&!(i+o>=e.length||i>=t.length);++i)e[i+o]=t[i];return i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":1,ieee754:4,isarray:3}],3:[function(t,e){var o={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==o.call(t)}},{}],4:[function(t,e,o){o.read=function(t,e,o,n,i){var r,a,c=8*i-n-1,s=(1<<c)-1,l=s>>1,u=-7,d=o?i-1:0,p=o?-1:1,h=t[e+d];for(d+=p,r=h&(1<<-u)-1,h>>=-u,u+=c;u>0;r=256*r+t[e+d],d+=p,u-=8);for(a=r&(1<<-u)-1,r>>=-u,u+=n;u>0;a=256*a+t[e+d],d+=p,u-=8);if(0===r)r=1-l;else{if(r===s)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),r-=l}return(h?-1:1)*a*Math.pow(2,r-n)},o.write=function(t,e,o,n,i,r){var a,c,s,l=8*r-i-1,u=(1<<l)-1,d=u>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:r-1,f=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-a))<1&&(a--,s*=2),(e+=a+d>=1?p/s:p*Math.pow(2,1-d))*s>=2&&(a++,s/=2),a+d>=u?(c=0,a=u):a+d>=1?(c=(e*s-1)*Math.pow(2,i),a+=d):(c=e*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;t[o+h]=255&c,h+=f,c/=256,i-=8);for(a=a<<i|c,l+=i;l>0;t[o+h]=255&a,h+=f,a/=256,l-=8);t[o+h-f]|=128*y}},{}],ChosenOneNodeType:[function(t,e,o){"use strict";cc._RF.push(e,"4376bVfLxlLeK7kHBe4FuAC","ChosenOneNodeType");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GAME_CHODENONE_DATA=o.ChosenOneItem=void 0;var i=function(){this.id=0,this.type=0,this.texture="",this.num=0,this.probability=0};o.ChosenOneItem=i;var r=cc._decorator,a=r.ccclass,c=(r.property,function(){function t(){this.choseOneData=[],this.chosenId=0}var e;return e=t,t.getInstance=function(){return this._instance||(this._instance=new e)},t.prototype.init=function(){this.initChosenOne()},t.prototype.getChosenOneId=function(t){for(var e=0;e<this.choseOneData.length;e++)if(t==this.choseOneData[e].id)return this.choseOneData[e]},t.prototype.getchosenArr=function(){return this.choseOneData},t.prototype.initChosenOne=function(){for(var t in e.relation_data){var o=new i;o.id=e.relation_data[t].id,o.type=e.relation_data[t].type,o.texture=e.relation_data[t].texture,o.num=e.relation_data[t].num,o.probability=e.relation_data[t].probability,this.choseOneData.push(o)}this.disorganizeArr()},t.prototype.disorganizeArr=function(){},Object.defineProperty(t.prototype,"chosenID",{get:function(){return this.chosenId},set:function(t){this.chosenId=t},enumerable:!1,configurable:!0}),t.relation_data={1:{id:1,type:1,texture:"texture/chosenOne/daily_gold_50",num:50,probability:10},2:{id:2,type:1,texture:"texture/chosenOne/daily_gold_75",num:75,probability:10},3:{id:3,type:1,texture:"texture/chosenOne/daily_gold_100",num:100,probability:10},4:{id:4,type:101,texture:"texture/chosenOne/daily_change",num:1,probability:10},5:{id:5,type:101,texture:"texture/chosenOne/daily_change",num:2,probability:10},6:{id:6,type:102,texture:"texture/chosenOne/daily_cube",num:1,probability:10},7:{id:7,type:102,texture:"texture/chosenOne/daily_cube",num:2},8:{id:8,type:2,texture:"texture/chosenOne/daily_power",num:5,probability:10},9:{id:9,type:103,texture:"texture/chosenOne/daily_boom",num:1,probability:10}},e=n([a],t)}());o.default=c,o.GAME_CHODENONE_DATA=c.getInstance(),cc._RF.pop()},{}],CreateLevColor:[function(t,e,o){"use strict";cc._RF.push(e,"0295cnb1IFDSqJpWzSqLTY7","CreateLevColor");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../common/GlobalInferfance"),r=t("../common/AppData"),a=t("../util/MathTools"),c=cc._decorator,s=c.ccclass,l=(c.property,function(){function t(){}return t.getColorArr=function(t){var e=t||r.default.birdLev;if(1==e)return[0,0,0,1,0,1,1,1];if(2==e)return[1,1,2,2,2,2,1,1,0,0,0,0];var o=this.getBottleNum(t);o>10&&(o=10);for(var n=[],i=0;i<o;i++)for(var c=0;c<4;c++)n.push(i+1);for(a.default.seed=e,i=0;i<n.length;i++){var s=n.length-i,l=a.default.seedRandom()*n.length,u=Math.floor(l),d=n[i];if(n[i]=n[u],n[u]=d,s<=2)break}for(i=0;i<8;i++)n.push(0);return n},t.checkOut=function(){},t.getBottleNum=function(t){for(var e=t||r.default.birdLev,o=[],n=0;n<i.BottleArr.length;n++){if(e<i.BottleArr[n][1]){o=i.BottleArr[n-1];break}n==i.BottleArr.length-1&&(o=i.BottleArr[n])}return 0==o[2]?o[0]:e%o[2]==0?o[0]:o[3]},n([s],t)}());o.default=l,cc._RF.pop()},{"../common/AppData":"AppData","../common/GlobalInferfance":"GlobalInferfance","../util/MathTools":"MathTools"}],DatalController:[function(t,e,o){"use strict";cc._RF.push(e,"769002IG1ZOjafDFQLwLIp7","DatalController");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../base/BaseInst"),c=t("../common/GlobalInferfance"),s=t("../common/AppData"),l=t("../global/GlobalFunc"),u=cc._decorator,d=u.ccclass,p=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.getInstance=function(){return t.getInstance.call(this)},e.prototype.initRecordData=function(){var t;return(t={}).prop_addcup=1,t.prop_back=3,t.add_guide=0,t.prop_jumplev=1,t.prop_propmt=3,t.music_open=!0,t.sound_open=!0,t.shake_open=!0,t},e.prototype.getRecordData=function(){var t;if(cc.sys.localStorage.getItem("BirdData")){t=JSON.parse(cc.sys.localStorage.getItem("BirdData"));var e=this.initRecordData(),o=Object.keys(t);for(var n in e)-1==o.indexOf(n)&&(t[n]=e[n]);cc.sys.localStorage.setItem("BirdData",JSON.stringify(t))}else t=this.initRecordData(),cc.sys.localStorage.setItem("BirdData",JSON.stringify(t));return t},e.prototype.setRecordData=function(t){cc.sys.localStorage.getItem("BirdData")&&cc.sys.localStorage.setItem("BirdData",JSON.stringify(t))},e.prototype.clearRecordData=function(){cc.sys.localStorage.getItem("BirdData")&&(cc.sys.localStorage.clear(),s.default.getInstance().initData())},e.prototype.getBundle=function(t,e,o){var n=cc.assetManager.getBundle(t);n?e.call(o,n):cc.assetManager.loadBundle(t,function(t,n){t?cc.log("Prefab error:"+t):e.call(o,n)})},e.prototype.getShopData=function(){var t,e=this.initShopData();if(cc.sys.localStorage.getItem(c.CustomLocalStorageKey.SKIN_SHOP)){t=JSON.parse(cc.sys.localStorage.getItem(c.CustomLocalStorageKey.SKIN_SHOP));var o=Object.keys(t);for(var n in e)-1==o.indexOf(n)&&(t[n]=e[n])}else t=e;return cc.log(t),t},e.prototype.initShopData=function(){var t;return(t={}).use_bg=0,t.use_platform=0,t.use_anim={},t.own_bg={},t.own_platform={},t.own_anim={},t.discountTime=0,t.discountItem={},cc.resources.load("data/shopData",function(e,o){if(e)return cc.error(e),null;for(var n in o.json){var i=o.json[n];9==i.showId&&(t.own_anim[i.id]=!0,t.use_anim[i.id]=!0),2==i.showId&&1==i.posId&&(t.own_platform[i.id]=!0,t.use_platform=i.id),3==i.showId&&1==i.posId&&(t.own_bg[i.id]=!0,t.use_bg=i.id)}}),t},e.prototype.getUnlockShopItem=function(t){var e=[];for(var o in s.default.getInstance().shopJsonData){var n=s.default.getInstance().shopJsonData[o];if(n.showId==t&&!s.default.skinShop.own_anim[n.id]&&n.openLevel<=s.default.birdLev){if((n.showId==c.ShopShowType.bg||n.showId==c.ShopShowType.platform)&&1==n.posId)continue;e.push(n.id)}}return e},e.prototype.getShopDiscountObj=function(){var t={},e=this.getUnlockShopItem(c.ShopShowType.bird),o=this.getUnlockShopItem(c.ShopShowType.platform),n=this.getUnlockShopItem(c.ShopShowType.bg);e=l.getRandomList(e,3),o=l.getRandomList(o,3),n=l.getRandomList(n,3);for(var i=0;i<3;i++)e[i]&&(t[e[i]]=l.getRandom(3,7)),o[i]&&(t[o[i]]=l.getRandom(3,7)),n[i]&&(t[n[i]]=l.getRandom(3,7));return t},r([d],e)}(a.BaseInst));o.default=p,cc._RF.pop()},{"../base/BaseInst":"BaseInst","../common/AppData":"AppData","../common/GlobalInferfance":"GlobalInferfance","../global/GlobalFunc":"GlobalFunc"}],EventController:[function(t,e,o){"use strict";cc._RF.push(e,"28ce8OctrZOQLiAHQmIT5Pr","EventController");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../base/BaseInst"),c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.getInstance=function(){return t.getInstance.call(this)},e.prototype.addListen=function(t,e,o){cc.Canvas.instance.node.on(t,e.bind(o))},e.prototype.emitListen=function(t,e){void 0===e&&(e=null);var o=new cc.Event.EventCustom(t,!0);o.setUserData(e),cc.Canvas.instance.node.dispatchEvent(o)},e.prototype.removeListen=function(t){cc.Canvas.instance.node.off(t)},r([s],e)}(a.BaseInst));o.default=l,cc._RF.pop()},{"../base/BaseInst":"BaseInst"}],GameLaunch:[function(t,e,o){"use strict";cc._RF.push(e,"ef50344+c5ENq9ZOsA8acLJ","GameLaunch");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./common/GlobalInferfance"),c=t("./common/AppData"),s=t("./control/EventController"),l=t("./control/SkinController"),u=t("./control/AudioCenter"),d=t("./RunCore"),p=cc._decorator,h=p.ccclass,f=p.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progressBar=null,e.showargee=!1,e._progress=0,e._total=4,e.enterAni=!1,e}return i(e,t),e.prototype.start=function(){var t=this;if(cc.sys.platform===cc.sys.WECHAT_GAME){window.wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]});var e=window.wx.getSystemInfoSync();c.default.bannerTop=e.screenHeight/6*5-e.screenHeight/2}c.default.getInstance().initData(),c.default.getInstance().saveData(),cc.macro.ENABLE_MULTI_TOUCH=!1,window.EventController=s.default,window.CUSTOM_FINISH=a.CUSTOM_FINISH;var o=cc.sys.localStorage.getItem(a.CustomLocalStorageKey.BG_INDEX);o&&(c.default.bg_index=parseInt(o)),this.node.getChildByName("bgs").getChildByName(c.default.bg_index.toString()).active=!0,cc.sys.isNative&&(console.log=function(){},console.warn=function(){},cc.log=function(){},cc.warn=function(){}),u.default.getInstance().preloadFromRemote(),this.scheduleOnce(function(){t.preLoadPrefab()},1),s.default.getInstance().addListen(a.CUSTOM_READY,this.onSdkInit,this),this.onGmInit(),u.default.getInstance().playBgMusic()},e.prototype.updateProgress=function(){this._progress+=1;var t=this._progress/this._total;t>=1&&(t=1),this.progressBar.getComponent(cc.ProgressBar).progress=t},e.prototype.getOption=function(t){if(window.location){var e=location.search;if(""==e)return"";for(var o=(e=e.slice(1)).split("&"),n=o.length,i=0;i<n;i++){var r=o[i].split("=");if(r[0]==t)return r[1]}}return""},e.prototype.onGmInit=function(){cc.debug.setDisplayStats(!1)},e.prototype.onSdkInit=function(){var t=this,e=cc.sys.localStorage.getItem(a.CustomLocalStorageKey.LEV);e?c.default.birdLev=parseInt(e):(cc.sys.localStorage.setItem(a.CustomLocalStorageKey.LEV,1),c.default.birdLev=1),c.default.getAni_index();var o=cc.sys.localStorage.getItem(a.CustomLocalStorageKey.CUP_INDEX);o?c.default.cup_skin_index=parseInt(o):(c.default.cup_skin_index=1,cc.sys.localStorage.setItem(a.CustomLocalStorageKey.CUP_INDEX,c.default.cup_skin_index));var n=cc.sys.localStorage.getItem(a.CustomLocalStorageKey.BG_INDEX);n?c.default.bg_index=parseInt(n):(c.default.bg_index=1,cc.sys.localStorage.setItem(a.CustomLocalStorageKey.BG_INDEX,c.default.bg_index)),c.default.readyOk=!0;var i=c.default.gameCom.getComponent(d.default);i.initCfg(function(){i.initView(),t.updateProgress();var e=t,o=setTimeout(function(){clearTimeout(o),e.updateProgress(),e.enterGame()},1500)})},e.prototype.showAgree=function(){this.showargee=!0,this.onSdkInit()},e.prototype.enterGame=function(){var t=this;cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID||(c.default.readyOk=!0),this.showargee&&c.default.readyOk&&cc.director.preloadScene("GameMain",function(){s.default.getInstance().removeListen(a.CUSTOM_READY);var e=t.node.getChildByName("loading");cc.tween(e).then(cc.tween().to(.3,{opacity:0})).start(),cc.tween(t.progressBar).then(cc.tween().to(.3,{opacity:0})).start();var o=setTimeout(function(){clearTimeout(o),cc.director.loadScene("GameMain")},800)})},e.prototype.preLoadPrefab=function(){var t=this;l.default.loadPoolEntity(function(){t.updateProgress(),cc.resources.load("prefabs/GameCon",function(t,e){this.updateProgress(),c.default.gameCom=cc.instantiate(e);var o=cc.find("preloadNode");o.addChild(c.default.gameCom),c.default.gameCom.setContentSize(o.getContentSize()),c.default.gameCom.opacity=0,c.default.gameCom.getComponent(d.default).initialize(),this.checkFinish()}.bind(t))},this)},e.prototype.checkFinish=function(){if(!this.enterAni){this.enterAni=!0;var t=this,e=setTimeout(function(){clearTimeout(e),t.showAgree()},0)}},r([f(cc.Node)],e.prototype,"progressBar",void 0),r([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"./RunCore":"RunCore","./common/AppData":"AppData","./common/GlobalInferfance":"GlobalInferfance","./control/AudioCenter":"AudioCenter","./control/EventController":"EventController","./control/SkinController":"SkinController"}],GameMain:[function(t,e,o){"use strict";cc._RF.push(e,"e9c77jGPTdD/qRGkjdFEJOe","GameMain");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./common/GlobalInferfance"),c=t("./common/AppData"),s=t("./control/EventController"),l=t("./control/AudioCenter"),u=t("./RunCore"),d=t("./util/ModifyNode"),p=t("./control/AdsCenter"),h=cc._decorator,f=h.ccclass,y=h.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.back_btn=null,e.add_btn=null,e.jump_btn=null,e.shop_btn=null,e.prompt_btn=null,e.reset_btn=null,e.set_btn=null,e.btn_arrs=[],e.levelLab=null,e.guide_tip_font=null,e.eff_group=null,e.moneyLabel=null,e.overPrefab=null,e.setPrefab=null,e.shopPrefab=null,e.resultPanel=null,e.guide_to_addcup=!1,e.clickboo=!1,e.forbidClick=!1,e}return i(e,t),e.prototype.start=function(){var t=this;cc.sys.platform===cc.sys.WECHAT_GAME&&(p.default.getInstance().preloadBanner(),p.default.getInstance().preloadExcitation(),p.default.getInstance().preloadFullScreen(),p.default.getInstance().preloadGrid()),s.default.getInstance().addListen(a.CUSTOM_RESET,this.onResetGame,this),s.default.getInstance().addListen(a.CUSTOM_NEXT_LEV,this.runToNext,this),s.default.getInstance().addListen(a.CUSTOM_FINISH,this.gameFinish,this),s.default.getInstance().addListen(a.CUSTOM_REFRESH,this.onRefreshStep,this),s.default.getInstance().addListen(a.CUSTOM_END_JUDGE,this.isGameFail,this),s.default.getInstance().addListen(a.CUSTOM_SHOW_ANI,this.showMain,this),s.default.getInstance().addListen(a.CUSTOM_COIN_FLY,this.createFlyCoin,this),cc.Canvas.instance.node.on(cc.Node.EventType.TOUCH_END,this.onCloseGrid,this),c.default.gameCom.opacity=255,c.default.gameCom.parent=this.node.getChildByName("content"),this.gameCom=c.default.gameCom.getComponent(u.default),d.default.getInstance().adapterNode(this.set_btn.node.parent),d.default.getInstance().adapterNode(this.reset_btn.node.parent),d.default.getInstance().adapterNode(this.jump_btn.node.parent),d.default.getInstance().adapterNode(this.prompt_btn.node.parent),d.default.getInstance().adapterNode(this.shop_btn.node.parent),d.default.getInstance().adapterNode(this.levelLab.node.parent),this.showBtnAni(),this.refreshLab(),this.scheduleOnce(function(){t.gameCom.registEvent(),t.gameCom.startEnterAni()}),6==c.default.birdLev&&0==c.default.AppDataObj.add_guide?(this.guide_to_addcup=!0,this.guide_AddBranch(!0)):c.default.birdLev>6&&(this.guide_to_addcup=!1);var e=this.node.getChildByName("mainshow"),o=e.getChildByName("upnode");e.getChildByName("goHomeParent").y=o.y=-c.default.bannerTop-245,p.default.getInstance().showBanner(),this.moneyLabel.string=String(c.default.userGold)},e.prototype.onCloseGrid=function(){},e.prototype.showMain=function(){this.node.getChildByName("oper_mark").active=!1},e.prototype.createFlyCoin=function(t){var e=this,o=t.detail,n=new cc.Node;n.addComponent(cc.ParticleSystem).file=this.coinParticle,n.parent=cc.Canvas.instance.node,n.position=o;var i=this.moneyLabel.node.parent.convertToWorldSpace(this.moneyLabel.node.getPosition());i=cc.Canvas.instance.node.convertToNodeSpaceAR(i),cc.tween(n).to(1,{position:i}).call(function(){n.removeFromParent(),e.moneyLabel.string=String(Number(e.moneyLabel.string)+a.BirdAddCoin)}).start()},e.prototype.isGameFail=function(t){var e=t.detail.canPoll,o=this.node.getChildByName("notmove");e?o.active=!1:(o.active=!0,this.prompt_btn.interactable=!1,c.default.AppDataObj.prop_propmt<=0&&(this.prompt_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!1))},e.prototype.showBtnAni=function(){for(var t=0;t<2;t++)(e=this.btn_arrs[t]).y+=10,cc.tween(e).then(cc.tween().to(.3,{y:e.y-10,opacity:255})).start();for(t=2;t<this.btn_arrs.length;t++){var e;(e=this.btn_arrs[t]).y-=10,cc.tween(e).then(cc.tween().to(.3,{y:e.y+10,opacity:255})).start()}},e.prototype.setData=function(){this.levelLab.string="l "+c.default.birdLev},e.prototype.openSetPanel=function(){var t=this,e=this,o=setTimeout(function(){if(clearTimeout(o),t.setPrefab){var n=cc.instantiate(t.setPrefab);e.resultPanel=n,n.name="set",cc.Canvas.instance.node.addChild(n,100),t.clickboo=!1}else cc.resources.load("prefabs/SetPage",function(t,o){if(t)cc.log("Prefab error:"+t);else if(o instanceof cc.Prefab){if(!c.default.gameComplete){this.setPrefab=o;var n=cc.instantiate(o);e.resultPanel=n,n.name="set",cc.Canvas.instance.node.addChild(n,100),this.clickboo=!1}}else cc.log("Prefab error")}.bind(e))},50)},e.prototype.openShopPanel=function(){var t=this,e=this,o=setTimeout(function(){if(clearTimeout(o),t.shopPrefab){var n=cc.instantiate(t.shopPrefab);e.resultPanel=n,n.name="set",cc.Canvas.instance.node.addChild(n,100),t.clickboo=!1}else cc.resources.load("prefabs/ShopPage",function(t,o){if(t)cc.log("Prefab error:"+t);else if(o instanceof cc.Prefab){if(!c.default.gameComplete){this.shopPrefab=o;var n=cc.instantiate(o);e.resultPanel=n,n.name="shop",cc.Canvas.instance.node.addChild(n,100),this.clickboo=!1}}else cc.log("Prefab error")}.bind(e))},50)},e.prototype.onClick=function(t,e){var o=this,n=c.default.gameComplete||this.forbidClick||this.gameCom.checkIsRunning()||1==c.default.birdLev||2==c.default.birdLev||this.clickboo||!c.default.aniFinish;if(c.default.waitTime=0,!n)switch(e){case"menu":if(cc.Canvas.instance.node.getChildByName("set"))return;this.node.getChildByName("oper_mark").active=!0,l.default.getInstance().playEffect(a.AudioEnum.common_click),this.clickboo=!0,this.openSetPanel();break;case"shop":if(cc.Canvas.instance.node.getChildByName("shop"))return;this.node.getChildByName("oper_mark").active=!0,l.default.getInstance().playEffect(a.AudioEnum.common_click),this.clickboo=!0,this.openShopPanel();break;case"again":this.clickboo=!0,l.default.getInstance().playEffect(a.AudioEnum.resetGame),p.default.getInstance().showFullScreen(0);var i=this,r=setTimeout(function(){clearTimeout(r),i.clickboo=!1,i.onResetGame(null)},300);break;case"back":if(l.default.getInstance().playEffect(a.AudioEnum.common_click),this.clickboo=!0,c.default.AppDataObj.prop_back<=0){if(c.default.birdLev<5)return void(this.clickboo=!1);var s=this,u=null;return p.default.getInstance().hideBanner(),p.default.getInstance().showExcitation(function(t){p.default.getInstance().showBanner(),1==t&&(0==c.default.AppDataObj.prop_back&&(c.default.AppDataObj.prop_back+=5),c.default.getInstance().saveData()),o.clickboo=!1,u&&(clearTimeout(u),u=null),o.refreshLab()},this),void(u=setTimeout(function(){clearTimeout(u),s.clickboo=!1},500))}this.gameCom.undoAction()&&(this.gameCom.rebackNormal(),this.gameRecoverRefresh(),c.default.AppDataObj.prop_back-=1,c.default.game_step-=1,c.default.rollback+=1,this.refreshLab(),c.default.getInstance().saveData()),this.clickboo=!1,this.refreshLab();break;case"add":if(l.default.getInstance().playEffect(a.AudioEnum.common_click),this.clickboo=!0,this.guide_to_addcup)return this.guide_to_addcup=!1,c.default.AppDataObj.add_guide=1,c.default.getInstance().saveData(),this.guide_AddBranch(!1),c.default.addtube+=1,c.default.isAddBranch=!0,this.add_btn.interactable=!1,this.add_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!1,this.gameCom.addBranchEntity(),this.clickboo=!1,void this.gameRecoverRefresh();var d;if(c.default.AppDataObj.prop_addcup<=0)return c.default.birdLev<5?void(this.clickboo=!1):(p.default.getInstance().hideBanner(),p.default.getInstance().showExcitation(function(t){p.default.getInstance().showBanner(),1==t&&(c.default.banner_state=!1,c.default.addtube+=1,c.default.isAddBranch=!0,o.add_btn.interactable=!1,o.add_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!1,o.gameCom.addBranchEntity(),o.gameRecoverRefresh()),o.refreshLab(),d&&(clearTimeout(d),d=null),o.clickboo=!1},this),void(d=setTimeout(function(){clearTimeout(d),d=null,(void 0).clickboo=!1},500)));!c.default.isAddBranch&&c.default.AppDataObj.prop_addcup>0&&(this.gameRecoverRefresh(),c.default.AppDataObj.prop_addcup-=1,c.default.addtube+=1,c.default.isAddBranch=!0,this.add_btn.interactable=!1,this.add_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!1,this.refreshLab(),c.default.getInstance().saveData(),this.gameCom.addBranchEntity()),this.clickboo=!1,this.refreshLab();break;case"jump":if(this.clickboo=!0,l.default.getInstance().playEffect(a.AudioEnum.common_click),c.default.AppDataObj.prop_jumplev<=0)return c.default.birdLev,void(this.clickboo=!1);this.gameRecoverRefresh(),c.default.AppDataObj.prop_back=3,c.default.addtube=0,c.default.isAddBranch=!1,c.default.AppDataObj.prop_jumplev-=1,c.default.birdLev+=1,c.default.getInstance().saveData(),this.gameCom.releaseAni(),l.default.getInstance().playEffect(a.AudioEnum.gameSucc),this.showOverGame(),c.default.AppDataObj.prop_jumplev<=0&&(this.jump_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!0,this.jump_btn.node.getChildByName("Background").getChildByName("adShow").active=!0),this.clickboo=!1,this.refreshLab()}},e.prototype.guide_AddBranch=function(t){var e=this,o=this.node.getChildByName("mainshow");o.getChildByName("upnode").getChildByName("guide_tip").active=t,o.getChildByName("upnode").getChildByName("free").active=t;var n=this.eff_group.getChildByName("guide_hand");n.active=t,this.scheduleOnce(function(){var t=e.add_btn.node.parent.convertToWorldSpaceAR(e.add_btn.node.getPosition()),o=e.eff_group.convertToNodeSpaceAR(t);n.setPosition(cc.v2(o.x+75,o.y-5))});var i=this.add_btn.node.getChildByName("Background"),r=i.getChildByName("common_point"),a=i.getChildByName("stepNum");r.active=!t,a.active=!t;var s=i.getChildByName("adShow");c.default.AppDataObj.prop_addcup<=0&&0==t?s.active=!0:s.active=!1},e.prototype.gameRecoverRefresh=function(){this.node.getChildByName("notmove").active=!1},e.prototype.refreshLab=function(){this.levelLab.string="l "+c.default.birdLev,this.refreshSingleFunctionBtn(this.add_btn,c.default.AppDataObj.prop_addcup),this.refreshSingleFunctionBtn(this.back_btn,c.default.AppDataObj.prop_back),this.refreshSingleFunctionBtn(this.jump_btn,c.default.AppDataObj.prop_jumplev),this.refreshSingleFunctionBtn(this.prompt_btn,c.default.AppDataObj.prop_propmt),this.prompt_btn.interactable=!c.default.hideNode,c.default.AppDataObj.prop_propmt<=0&&(this.prompt_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!c.default.hideNode),this.guide_tip_font.active=1==c.default.birdLev||2==c.default.birdLev,c.default.AppDataObj.prop_back>0&&!this.gameCom.checkIsRunning()&&(this.gameCom.getActionNum()>0?this.back_btn.interactable=!0:this.back_btn.interactable=!1)},e.prototype.refreshSingleFunctionBtn=function(t,e){if(t.node.getChildByName("Background").getChildByName("stepNum").getComponent(cc.Label).string=e.toString(),(t==this.add_btn||t==this.back_btn)&&c.default.birdLev>=5){var o=t.node.getChildByName("Background").getChildByName("adShow");o.active=e<=0,o.active&&(this.back_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!0)}},e.prototype.onResetGame=function(){c.default.waitTime=0,this.gameRecoverRefresh(),this.resultPanel=null,c.default.reopenNum+=1,this.nextLevel();var t=this,e=setTimeout(function(){clearTimeout(e),t.clickboo=!1},600)},e.prototype.nextLevel=function(t){var e=this;void 0===t&&(t=!0),c.default.AppDataObj.prop_back=3,c.default.getInstance().saveData(),c.default.aniFinish=!1,this.resultPanel=null,this.guide_to_addcup=!1,this.clickboo=!1,this.gameCom.initialize(),this.gameCom.initCfg(function(){e.refreshLab(),e.gameCom.initView(),e.scheduleOnce(function(){e.gameCom.startEnterAni()})})},e.prototype.release=function(){s.default.getInstance().removeListen(a.CUSTOM_RESET),s.default.getInstance().removeListen(a.CUSTOM_FINISH),s.default.getInstance().removeListen(a.CUSTOM_NEXT_LEV),s.default.getInstance().removeListen(a.CUSTOM_END_JUDGE),s.default.getInstance().removeListen(a.CUSTOM_REFRESH),s.default.getInstance().removeListen(a.CUSTOM_SHOW_ANI),s.default.getInstance().removeListen(a.CUSTOM_COIN_FLY),cc.Canvas.instance.node.off(cc.Node.EventType.TOUCH_END,this.onCloseGrid,this)},e.prototype.onRefreshStep=function(t){t.detail&&null!=t.detail.forbid&&(this.forbidClick=t.detail.forbid),this.refreshLab()},e.prototype.runToNext=function(){if(c.default.waitTime=0,c.default.gameComplete=!1,this.forbidClick=!1,this.gameCom.show(),cc.tween(this.add_btn.node).then(cc.tween().to(.5,{opacity:255,y:0})).start(),cc.tween(this.back_btn.node).then(cc.tween().to(.5,{opacity:255,y:0})).start(),cc.tween(this.jump_btn.node).then(cc.tween().to(.5,{opacity:255,y:0})).start(),cc.tween(this.shop_btn.node).then(cc.tween().to(.5,{opacity:255,y:0})).start(),cc.tween(this.set_btn.node).then(cc.tween().to(.5,{opacity:255,y:0})).start(),cc.tween(this.reset_btn.node).then(cc.tween().to(.5,{opacity:255,y:0})).start(),cc.tween(this.levelLab.node.parent).then(cc.tween().to(.5,{opacity:255,y:0})).start(),cc.tween(this.prompt_btn.node).then(cc.tween().to(.5,{opacity:255})).start(),1!=c.default.birdLev&&2!=c.default.birdLev||cc.tween(this.guide_tip_font).then(cc.tween().to(.5,{opacity:255})).start(),this.add_btn.interactable=!0,this.add_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!0,this.jump_btn.interactable=!0,this.jump_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!0,this.prompt_btn.interactable=!0,this.prompt_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!0,this.shop_btn.interactable=!0,this.refreshLab(),this.setData(),this.nextLevel(),6==c.default.birdLev&&0==c.default.AppDataObj.add_guide)this.guide_to_addcup=!0,this.guide_AddBranch(!0);else if(c.default.birdLev>6){this.guide_to_addcup=!1;var t=this.node.getChildByName("mainshow");t.getChildByName("upnode").getChildByName("guide_tip").active=!1,t.getChildByName("upnode").getChildByName("free").active=!1,this.eff_group.getChildByName("guide_hand").active=!1;var e=this.add_btn.node.getChildByName("Background"),o=e.getChildByName("common_point"),n=e.getChildByName("stepNum");o.active=!0,n.active=!0}},e.prototype.gameFinish=function(t){var e=this;void 0===t&&(t=!1),this.resultPanel&&(this.resultPanel.removeFromParent(),this.resultPanel=null),1!=c.default.birdLev&&2!=c.default.birdLev||cc.tween(this.guide_tip_font).then(cc.tween().to(.5,{opacity:0})).start(),cc.tween(this.add_btn.node).then(cc.tween().to(.5,{opacity:0,y:-60})).start(),cc.tween(this.back_btn.node).then(cc.tween().to(.5,{opacity:0,y:-60})).start(),cc.tween(this.jump_btn.node).then(cc.tween().to(.5,{opacity:0,y:-60})).start(),cc.tween(this.shop_btn.node).then(cc.tween().to(.5,{opacity:0,y:-60})).start();var o=this.node.getChildByName("mainshow");o.getChildByName("upnode").getChildByName("guide_tip").active=!1,o.getChildByName("upnode").getChildByName("free").active=!1,this.eff_group.getChildByName("guide_hand").active=!1,this.gameCom.hide(),cc.tween(this.set_btn.node).then(cc.tween().to(.5,{opacity:0,y:60})).start(),cc.tween(this.reset_btn.node).then(cc.tween().to(.5,{opacity:0,y:60})).start(),cc.tween(this.levelLab.node.parent).then(cc.tween().to(.5,{opacity:0,y:60})).start(),cc.tween(this.prompt_btn.node).then(cc.tween().to(.5,{opacity:0})).start(),this.forbidClick=!0,c.default.isAddBranch=!1,this.add_btn.interactable=!1,c.default.AppDataObj.prop_back=3,this.add_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!1,this.back_btn.interactable=!1,this.back_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!1,this.jump_btn.interactable=!1,this.jump_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!1,this.prompt_btn.interactable=!1,this.prompt_btn.node.getChildByName("Background").getChildByName("adShow").getChildByName("red").active=!1,this.shop_btn.interactable=!1,cc.tween(this.node).delay(1).call(function(){l.default.getInstance().playEffect(a.AudioEnum.gameSucc),e.showOverGame(),p.default.getInstance().showFullScreen(1),c.default.birdLev++,cc.sys.localStorage.setItem("lev",c.default.birdLev),c.default.getInstance().saveData()}).start()},e.prototype.showOverGame=function(){if(p.default.getInstance().hideBanner(),this.overPrefab){var t=cc.instantiate(this.overPrefab);t.name="result",cc.Canvas.instance.node.addChild(t,100)}else cc.resources.load("prefabs/ResultGame",function(t,e){if(t)cc.log("Prefab error:"+t);else if(e instanceof cc.Prefab){this.overPrefab=e;var o=cc.instantiate(e);o.name="result",cc.Canvas.instance.node.addChild(o,100)}else cc.log("Prefab error")}.bind(this))},e.prototype.update=function(){},e.prototype.showShop=function(){},r([y(cc.Button)],e.prototype,"back_btn",void 0),r([y(cc.Button)],e.prototype,"add_btn",void 0),r([y(cc.Button)],e.prototype,"jump_btn",void 0),r([y(cc.Button)],e.prototype,"shop_btn",void 0),r([y(cc.Button)],e.prototype,"prompt_btn",void 0),r([y(cc.Button)],e.prototype,"reset_btn",void 0),r([y(cc.Button)],e.prototype,"set_btn",void 0),r([y({type:[cc.Node]})],e.prototype,"btn_arrs",void 0),r([y(cc.Label)],e.prototype,"levelLab",void 0),r([y(cc.Node)],e.prototype,"guide_tip_font",void 0),r([y(cc.Node)],e.prototype,"eff_group",void 0),r([y(cc.Label)],e.prototype,"moneyLabel",void 0),r([y(cc.ParticleAsset)],e.prototype,"coinParticle",void 0),r([f],e)}(cc.Component);o.default=_,cc._RF.pop()},{"./RunCore":"RunCore","./common/AppData":"AppData","./common/GlobalInferfance":"GlobalInferfance","./control/AdsCenter":"AdsCenter","./control/AudioCenter":"AudioCenter","./control/EventController":"EventController","./util/ModifyNode":"ModifyNode"}],GlobalFunc:[function(t,e,o){"use strict";function n(){return Date.now()}function i(){return new Date(new Date(n()).toLocaleDateString()).getTime()}cc._RF.push(e,"75d85ydJdBKWIYHTj4V+TJC","GlobalFunc"),Object.defineProperty(o,"__esModule",{value:!0}),o.solve=o.localOper=o.getNextDayStartTime=o.getTodayStartTime=o.getGameTime=o.getRandomList=o.getRandom=o.shuffle=o.formatTime=o.globalData=o.TIME_FORMAT2=o.TIME_FORMAT1=void 0,o.TIME_FORMAT1="00:00",o.TIME_FORMAT2="00:00:00",o.globalData={soundBoo:!0,gameData:{},uid:"",noAd:!1},o.formatTime=function(t,e){var n="",i=0,r=0,a=0;switch(e){case o.TIME_FORMAT1:n=((r=t/60>>0)<10?"0"+r:r)+":"+((a=t-60*r)<10?"0"+a:a);break;case o.TIME_FORMAT2:n=((i=t/3600>>0)<10?"0"+i:i)+":"+((r=(t-3600*i)/60>>0)<10?"0"+r:r)+":"+((a=t-3600*i-60*r)<10?"0"+a:a)}return n},o.shuffle=function(t){for(var e,o=t.length;o;){var n=Math.floor(Math.random()*o--);e=[t[o],t[n]],t[n]=e[0],t[o]=e[1]}return t},o.getRandom=function(t,e){if(void 0===e&&(e=null),e){var o=e-t;return Math.floor(Math.random()*(o+1))+t}return Math.floor(Math.random()*(t+1))},o.getRandomList=function(t,e){if(t.length<=e)return t;for(var o=t.slice(0),n=[];e>0;){var i=this.getRandom(o.length);n.push(o[i]),o.splice(i,1),e--}return n},o.getGameTime=n,o.getTodayStartTime=i,o.getNextDayStartTime=function(){return i()+864e5},function(t){function e(t,e){localStorage.setItem(t,e)}t.LOCAL_LOCK_GUIDE="10001",t.LOCAL_LOCK_LEVEL="10002",t.LOCAL_BEST_TIME="10003",t.LOCAL_GAME_DATA="10004",t.saveToLocal=e,t.getValue=function(t){var o=localStorage.getItem(t);return o||e(t,o=""),o}}(o.localOper||(o.localOper={}));var r=[[0,1],[0,-1],[-1,0],[1,0]],a={copy:function(t){for(var e=new Array(t.length),o=0;o<e.length;o++)t[o]instanceof Array?e[o]=this.copy(t[o]):e[o]=t[o];return e},random_pintu:function(t,e){for(var o=this.get_array([t,e],0),n=0;n<t;n++)for(var i=0;i<e;i++)o[n][i]=(n*e+i+1)%(t*e);var c=[t-1,e-1];for(n=0;n<t*e*16;n++){var s=r[Math.floor(4*Math.random())],l=[c[0]+s[0],c[1]+s[1]],u=l[0],d=l[1];t>u&&u>=0&&d>=0&&e>d&&(a.swap(o,[u,d],[c[0],c[1]]),c=[u,d])}return o},swap:function(t,e,o){var n=t[e[0]][e[1]];t[e[0]][e[1]]=t[o[0]][o[1]],t[o[0]][o[1]]=n},legal:function(t,e,o){return t.length>e&&e>=0&&o>=0&&o<t[0].length},get_array:function(t,e){if(!(t instanceof Array))throw new Error("'shape' should be a array ");for(var o=new Array(t[0]),n=0;n<t[0];n++)1==t.length?o[n]=e:o[n]=this.get_array(t.slice(1),e);return o},flat:function(t){for(var e=[],o=0;o<t.length;o++)if(t[o]instanceof Array)for(var n=0,i=this.flat(t[o]);n<i.length;n++){var r=i[n];e.push(r)}else e.push(t[o]);return e},is_solvable:function(t){var e=this.get_reverse(a.flat(t)),o=t.length;return t[0].length%2==0&&(e^=o-1-a.get_space(t)[0]&1),e%2==0},array_eq:function(t,e){if(t.length!=e.length)throw new Error("length not equal");for(var o=0;o<t.length;o++)if(t[o]instanceof Array){if(!(e[o]instanceof Array))return!1;if(!a.array_eq(t[o],e[o]))return!1}else if(t[o]!=e[o])return!1;return!0},get_space:function(t){for(var e=0;e<t.length;e++)for(var o=0;o<t[e].length;o++)if(0==t[e][o])return[e,o]},get_reverse:function(t){for(var e=0,o=0;o<t.length;o++)if(0!=t[o])for(var n=o+1;n<t.length;n++)0!=t[n]&&t[o]>t[n]&&(e+=1);return e},over:function(t){for(var e=0;e<t.length;e++)for(var o=0;o<t[0].length;o++)if(t[e][o]!=(e*t[0].length+o+1)%(t.length*t[0].length))return!1;return!0},get_angle:function(t,e,o,n){var i=(t*o+e*n)/Math.hypot(t,e)/Math.hypot(o,n);return Math.acos(i)},get_direction:function(t,e){for(var o=0;o<r.length;o++){var n=this.get_angle(r[o][0],r[o][1],t,e);if(Math.abs(n)<Math.PI/6)return o}return-1}};o.solve=function(){var t=0,e=0,o=null,n=null,i=null,c="",s=[0,2,1,3,1,2,0,0,3,1];function l(t){for(var e=0;e<r.length;e++)if(r[e][0]==t[0]&&r[e][1]==t[1])return"\u5de6\u53f3\u4e0b\u4e0a"[e];throw new Error("imposible to reach here")}function u(t,e){if(0!=o[t[0]][t[1]]){var i=t;t=e,e=i}c+=l([e[0]-t[0],e[1]-t[1]]),a.swap(o,t,e),n[o[t[0]][t[1]]]=[t[0],t[1]],n[o[e[0]][e[1]]]=[e[0],e[1]]}function d(o,i){return n[(o*e+i+1)%(t*e)]}function p(){for(var i=0;i<t;i++)for(var r=0;r<e;r++)n[o[i][r]]=[i,r]}function h(n,c,s,l,u,d){var p=a.get_array([t,e],-1),h=[];h.push([n,c]),p[n][c]=0;var f=a.get_array([t,e],0);(function(){for(;h.length>0;)for(var t=h.shift(),e=0,n=r;e<n.length;e++){var c=n[e],y=[t[0]+c[0],t[1]+c[1]],_=y[0],g=y[1];if(a.legal(o,_,g)&&-1==p[_][g]&&(_!=u||g!=d)&&0==i[_][g]&&(h.push([_,g]),p[_][g]=p[t[0]][t[1]]+1,f[_][g]=t,_==s&&g==l))return}})();for(var y=[],_=[s,l],g=_[0],m=_[1];y.push([g,m]),g!=n||m!=c;){var v=f[g][m];g=v[0],m=v[1]}return y.reverse()}function f(o,n,i,r){for(var a=d(t-1,e-1),c=h(a[0],a[1],o,n,i,r),s=1;s<c.length;s++)u(c[s],c[s-1])}function y(t,e,o,n){if(4!=arguments.length)throw new Error("move error");for(var i=h(t,e,o,n,null,null),r=1;r<i.length;r++)f(i[r][0],i[r][1],i[r-1][0],i[r-1][1]),u(i[r],i[r-1])}function _(o){for(var n=d(t-1,e-1),i=n[0],a=n[1],c=0,s=o;c<s.length;c++){var l=s[c],p=i-r[l][0],h=a-r[l][1];u([p,h],[i,a]),i=p,a=h}}function g(o){if(a.is_solvable(o)){for(var n=0;n<t-2;n++)for(var r=0;r<e-2;r++){var c=d(n,r);y(c[0],c[1],n,r),i[n][r]=!0}for(n=0;n<e-2;n++){var l=d(t-1,n);if(y(l[0],l[1],t-1,n),a.array_eq(d(t-1,e-1),[t-2,n])&&u([t-2,n],[t-2,n+1]),!a.array_eq(d(t-2,n),[t-2,n])){var p=d(t-2,n);y(p[0],p[1],t-2,n+2),f(t-2,n+1,t-2,n+2),_(s)}}for(n=0;n<t-2;n++){var h=d(n,e-2);if(y(h[0],h[1],n,e-2),a.array_eq(d(t-1,e-1),[n,e-1])&&u([n,e-1],[n+1,e-1]),!a.array_eq(d(n,e-1),[n,e-1])){var g=d(n,e-1);y(g[0],g[1],n+2,e-1),f(n+1,e-1,n+2,e-1),_(s.map(function(t){return[3,2,0,1][t]}))}}var m=d(t-2,e-2);y(m[0],m[1],t-2,e-2);var v=d(t-2,e-1);y(v[0],v[1],t-2,e-1);var b=d(t-1,e-2);y(b[0],b[1],t-1,e-2)}else console.log("unsolvable")}return function(r){return o=a.copy(r),this.a=o,t=o.length,e=o[0].length,n=a.get_array([t,e,2],-1),p(),i=a.get_array([t,e],0),c="",g(o),c}}(),cc._RF.pop()},{}],GlobalInferfance:[function(t,e,o){"use strict";cc._RF.push(e,"d0408GqRT1DwI4WaB+5sweM","GlobalInferfance"),Object.defineProperty(o,"__esModule",{value:!0}),o.ShopShowType=o.BottleArr=o.POS=o.AudioEnum=o.BirdAddCoin=o.CUSTOM_CHANGE_SKIN=o.CUSTOM_BUY_SKIN=o.CUSTOM_COIN_FLY=o.CUSTOM_UPDATE_SHOP=o.CUSTOM_RESTORE=o.CUSTOM_NEXT_GUIDE=o.CUSTOM_UPDATE_INFO=o.CUSTOM_UPDATE_STATE=o.CUSTOM_END_JUDGE=o.CUSTOM_REFRESH=o.CUSTOM_READY=o.CUSTOM_SHOW_ANI=o.CUSTOM_RESET=o.CUSTOM_NEXT_LEV=o.CUSTOM_FINISH=o.adCd=o.CustomLocalStorageKey=void 0,function(t){t.LEV="lev",t.ANI_INDEX="selectEntitys",t.CUP_INDEX="selectBranch",t.BG_INDEX="selectBg",t.SKIN_SHOP="skinShop",t.GOLD="gold"}(o.CustomLocalStorageKey||(o.CustomLocalStorageKey={})),o.adCd=30,o.CUSTOM_FINISH="10001",o.CUSTOM_NEXT_LEV="10002",o.CUSTOM_RESET="10003";var n=cc._decorator;n.ccclass,n.property,o.CUSTOM_SHOW_ANI="10004",o.CUSTOM_READY="10005",o.CUSTOM_REFRESH="10006",o.CUSTOM_END_JUDGE="10007",o.CUSTOM_UPDATE_STATE="10009",o.CUSTOM_UPDATE_INFO="10010",o.CUSTOM_NEXT_GUIDE="10011",o.CUSTOM_RESTORE="10012",o.CUSTOM_UPDATE_SHOP="10013",o.CUSTOM_COIN_FLY="10014",o.CUSTOM_BUY_SKIN="20013",o.CUSTOM_CHANGE_SKIN="20014",o.BirdAddCoin=1,function(t){t.common_click="common_click",t.gameSucc="gamewin",t.resetGame="common_click",t.flyout="flys",t.hark1="type_hark_1",t.hark2="type_hark_2",t.hark3="type_hark_3",t.hark4="type_hark_4",t.hark5="type_hark_5",t.hark6="type_hark_6",t.hark7="type_hark_7",t.hark8="type_hark_8",t.hark9="type_hark_9",t.Fly_2_2="collect_fly",t.hark10="type_hark_10",t.Collect="Collect",t.GetAward="getreward",t.collect_gold="collect_gold",t.PopupLayer="openpop"}(o.AudioEnum||(o.AudioEnum={}));o.POS=function(){},o.BottleArr=[[3,1,0,0],[5,5,0,0],[7,10,3,5],[9,30,3,7],[12,100,2,9]],function(t){t[t.bird=1]="bird",t[t.platform=2]="platform",t[t.bg=3]="bg",t[t.defaultBird=9]="defaultBird"}(o.ShopShowType||(o.ShopShowType={})),cc._RF.pop()},{}],GuideType:[function(t,e,o){"use strict";cc._RF.push(e,"16b0dliMChHpoI97BXB5onz","GuideType");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,a=(i.property,function(){function t(){}return t.getGuideById=function(t){return this.relation_data[t]},t.getLockShow=function(){var t=[];for(var e in this.relation_data)if(this.relation_data[e].tip&&0!=this.relation_data[e].level){var o={};for(var n in this.relation_data[e])o[n]=this.relation_data[e][n];t.push(o)}return t.sort(function(t,e){return t.level-e.level})},t.getGuideInfoByLevel=function(){for(var t in this.relation_data)if(1==this.relation_data[t].level){var e={};for(var o in this.relation_data[t])e[o]=this.relation_data[t][o];return e}return null},t.relation_data={1:{guideId:1,level:3,tip:"Move BOXING GLOVE to somewhere to clear a line of things.",icon:"tmp_punch"},2:{level:6,guideId:2,tip:"Rotate the jewel",icon:"rotate"},3:{level:11,guideId:3,tip:"Exchanged for 3 single gems",icon:"prop_refresh"},4:{level:16,guideId:4,tip:"Use the bomb to eliminate all targets on 2 rows and columns",icon:"level_prop_bomb"},5:{level:21,guideId:5,tip:"Collect stars in the gem by removing a line of gems",icon:"collect_star"},6:{level:2,guideId:6,tip:"Two Magnets placed on the same line interact and clean the line",icon:"collect_magnet"},7:{level:10,guideId:7,tip:"Eliminate bubble gems to break bubbles",icon:"collect_bubble"},8:{level:15,guideId:8,tip:"Drop and collect the diamonds",icon:"collect_transfer"},9:{level:5,guideId:9,tip:"Eliminate gems to clean the ice",icon:"game_block_ice_1"},10:{level:30,guideId:10,tip:"Note occurs after music box removed",icon:"tmp_music_box"},11:{level:40,guideId:11,tip:"Collect the balloon before it explodes",icon:"collect_bomb"},13:{level:61,guideId:13,tip:"Collect colorful gems!",icon:"collect_dreamgem"},14:{level:71,guideId:14,tip:"Gems generated by the Gem Machine can fill up the line",icon:"tmp_gemmachine"},15:{level:0,guideId:15,tip:"To remove 2 rows or 2 columns of bubble gems at the same time to break the bubbles",icon:"collect_bubble"},17:{level:0,guideId:17},18:{level:96,tip:"Open the gift box by removing the same colored gems",icon:"tmp_gembox",guideId:18},19:{level:120,guideId:19,tip:"Nearby blocks in a 3*3 area will be frozen after an explosion",icon:"tmp_icebomb"},20:{level:50,guideId:20,tip:"Conveyor belt can move the gems",icon:"tmp_conveyor"},21:{level:141,guideId:21,tip:"The ice machine freezes the gems Burst it!",icon:"tmp_icemachine"},23:{level:201,guideId:23,tip:"Collect the Pearl when the Clamshell opens",icon:"collect_pearl"},24:{level:251,guideId:24,tip:"Clear the Magic Hat to collect pigeons",icon:"collect_pigeon"}},n([r],t)}());o.default=a,cc._RF.pop()},{}],MarkPool:[function(t,e,o){"use strict";cc._RF.push(e,"11f8cpdCXFC+bRBcbpEUvAK","MarkPool");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.createPool=function(t,e){this._pool=new cc.NodePool,this.__prefab=t;for(var o=0;o<e;o++){var n=cc.instantiate(t);this._pool.put(n),this.__scale=n.scale}},e.getFromPool=function(){var t=null;if(this._pool.size()>0)t=this._pool.get();else if(this.__prefab){var e=cc.instantiate(this.__prefab);this._pool.put(e),t=this._pool.get()}return t},e.putInPool=function(t){t.scale=this.__scale,this._pool.put(t)},e.clearAll=function(){this._pool&&this._pool.clear(),this.__prefab=null,this.__scale=1},e.__scale=1,r([c],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],MathTools:[function(t,e,o){"use strict";cc._RF.push(e,"766eaWRt0hFlaZhNjTQGNdk","MathTools");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.seedRandom=function(){return this.seed=(9301*this.seed+49297)%233280,this.seed/233280},e.deepCopy=function(t){for(var e=[],o=0;o<t.length;o++){e.push([-1,-1,-1,-1,-1,-1,-1,-1]);for(var n=0;n<t[o].length;n++)e[o][n]=t[o][n]}return e},e.Bezier2=function(t,e,o,n){var i=cc.bezierTo(e,o);i.easing(cc.easeSineOut());var r=cc.sequence(i,cc.callFunc(function(){n()}));t.runAction(r)},e.shakeEffect=function(t,e){var o={};o.x=e.x,o.y=e.y,e.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.02,cc.v2(5+o.x,7+o.y)),cc.moveTo(.02,cc.v2(-6+o.x,7+o.y)),cc.moveTo(.02,cc.v2(-13+o.x,3+o.y)),cc.moveTo(.02,cc.v2(3+o.x,-6+o.y)),cc.moveTo(.02,cc.v2(-5+o.x,5+o.y)),cc.moveTo(.02,cc.v2(2+o.x,-8+o.y)),cc.moveTo(.02,cc.v2(-8+o.x,-10+o.y)),cc.moveTo(.02,cc.v2(3+o.x,10+o.y)),cc.moveTo(.02,cc.v2(0+o.x,0+o.y))))),setTimeout(function(){e.stopAllActions(),e.setPosition(o.x,o.y)},1e3*t)},e.seed=5,r([c],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],MessageController:[function(t,e,o){"use strict";cc._RF.push(e,"11925X/MNtMlY4ZbfOzq0Fb","MessageController");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../base/BaseInst"),c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.getInstance=function(){return t.getInstance.call(this)},e.prototype.addListen=function(t,e,o){cc.Canvas.instance.node.on(t,e.bind(o))},e.prototype.emitListen=function(t,e){void 0===e&&(e=null);var o=new cc.Event.EventCustom(t,!0);o.setUserData(e),cc.Canvas.instance.node.dispatchEvent(o)},e.prototype.removeListen=function(t){cc.Canvas.instance.node.off(t)},r([s],e)}(a.BaseInst));o.default=l,cc._RF.pop()},{"../base/BaseInst":"BaseInst"}],ModifyNode:[function(t,e,o){"use strict";cc._RF.push(e,"3a78eh9LZxK26XIlHTJjKhK","ModifyNode");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../base/BaseInst"),c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.getInstance=function(){return t.getInstance.call(this)},e.prototype.adapterNode=function(t){var e=cc.winSize.height/cc.winSize.width,o=cc.view.getDesignResolutionSize();if(e<=1.4){var n=cc.winSize.width/o.width,i=cc.winSize.height/o.height,r=Math.min(n,i);t.scale=r-.1}else if(e>1.4&&e<1.8)if(n=cc.winSize.width/o.width,(i=cc.winSize.height/o.height)>n){var a=n/i;t.scaleX*=a,t.scaleY*=a}else a=i/n,t.scaleX*=a,t.scaleY*=a},r([s],e)}(a.BaseInst));o.default=l,cc._RF.pop()},{"../base/BaseInst":"BaseInst"}],OtherNoAdTip:[function(t,e,o){"use strict";cc._RF.push(e,"9f38cZ1ZBZPpLvVsTPB+1B1","OtherNoAdTip");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){cc.game.addPersistRootNode(this.node),this.node.active=!1},e.prototype.showNoView=function(){var t=this;this.node.active=!0;var e=this.node.getChildByName("bg");e.active=!0,this.node.opacity=255;var o=this,n=setTimeout(function(){clearTimeout(n),cc.tween(t.node).then(cc.tween().to(.5,{opacity:0})).call(function(){o.node.active=!1,e.active=!1}).start()},1e3)},r([c],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],OverContent:[function(t,e,o){"use strict";cc._RF.push(e,"522f6a8bfVIdpDqfIKc2Trl","OverContent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,c=t("../common/GlobalInferfance"),s=t("../common/AppData"),l=t("../control/EventController"),u=t("../control/AdsCenter"),d=t("./AniPool");(function(t){t[t.willOpen=0]="willOpen",t[t.open=1]="open"})(a||(a={}));var p=cc._decorator,h=p.ccclass,f=p.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_video=null,e.btn_next=null,e.untouch=null,e.openNode=null,e.willOpenNode=null,e.birdRootNode=null,e.unlockProgress=null,e.result_node=null,e.aniFINISH=!1,e}return i(e,t),e.prototype.start=function(){var t=this;this.node.active=!0,this.untouch.active=!1,this.btn_next.active=!1,this.btn_video.active=!1,this.ske=this.result_node.getComponent(sp.Skeleton);var e=this.node.getChildByName("cnt").getChildByName("result_lock_bg"),o=this.node.getChildByName("cnt").getChildByName("progressBar");e.opacity=0,o.opacity=0,cc.tween(this.node).delay(.3).call(function(){e.scale=.1,e.opacity=0,cc.tween(e).then(cc.tween().to(.2,{scale:1,opacity:255})).start()}).delay(.1).call(function(){o.opacity=0,cc.tween(o).then(cc.tween().to(.2,{opacity:255})).start()}).start(),this.ske.setCompleteListener(function(e){"start"==(e.animation?e.animation.name:"")&&t.scheduleOnce(function(){e.animationStart=3,e.animationEnd=28,t.ske.setAnimation(1,"loop",!0),t.btn_next.active=!0,t.btn_video.active=!0,t.aniFINISH=!0,t.willUnlockData&&(t.progressMove(t.willUnlockData),t.reloadWillUnlockData(t.willUnlockData))})}),this.reloadPage(),s.default.gameComplete=!1,this.reloadMoney()},e.prototype.reloadMoney=function(){this.moneyLabel.string=String(s.default.userGold)},e.prototype.onVideoClick=function(){var t=this;this.aniFINISH&&u.default.getInstance().showExcitation(function(e){u.default.getInstance().showBanner(),1==e&&(s.default.userGold+=80,s.default.getInstance().saveGold(),t.reloadMoney())},this)},e.prototype.onNextClick=function(){if(this.aniFINISH){this.ske.setAnimation(0,"end",!1),this.untouch.active=!0,this.btn_next.active=!1;var t=this.node.getChildByName("cnt").getChildByName("result_lock_bg"),e=this.node.getChildByName("cnt").getChildByName("progressBar");cc.tween(t).then(cc.tween().to(.5,{scale:0,opacity:0})).start(),e.active=!1,l.default.getInstance().emitListen(c.CUSTOM_NEXT_LEV),u.default.getInstance().showBanner(),this.node.removeFromParent()}},e.prototype.reloadPage=function(){var t=s.default.birdLev;for(var e in this.willUnlockData=null,this.setPageType(a.willOpen),cc.log(s.default.getInstance().shopJsonData),s.default.getInstance().shopJsonData){var o=s.default.getInstance().shopJsonData[e];if(o.showId==c.ShopShowType.bird){if(o.openLevel==t){this.willUnlockData=o;break}if(o.openLevel<t)continue;(!this.willUnlockData||this.willUnlockData.openLevel>o.openLevel)&&(this.willUnlockData=o)}}this.initUnlockProgress(this.willUnlockData)},e.prototype.reloadWillUnlockData=function(t){var e=t.posId+"_"+t.posIndex;this.key!=e&&(this.key=e,this.birdNode=d.default.getFromPool(this.key),this.birdNode.parent=this.birdRootNode)},e.prototype.initUnlockProgress=function(t){var e=t.openLevel-s.default.birdLev,o=t.openNeedLevel,n=(o-e-1)/o;this.percentLabel.string=String(Math.floor(100*n))+"%",this.unlockProgress.progress=n},e.prototype.progressMove=function(t){var e=this,o=t.openLevel-s.default.birdLev,n=t.openNeedLevel,i=(n-o-1)/n,r=(n-o)/n;this.unlockProgress.progress=i,cc.tween(this.unlockProgress).to(1,{progress:r}).start(),String(Math.floor(100*r));var a=cc.tween().to(1,{percent:1},{progress:function(t,o,n,a){e.percentLabel.string=String(Math.floor(100*((r-i)*a+i)))+"%"}});cc.tween({percent:0}).then(a).start()},e.prototype.setPageType=function(t){this.pageType=t,this.openNode.active=t==a.open,this.willOpenNode.active=t==a.willOpen,t==a.open||a.willOpen},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),d.default.putInPool(this.key,this.birdNode)},r([f(cc.Node)],e.prototype,"btn_video",void 0),r([f(cc.Node)],e.prototype,"btn_next",void 0),r([f(cc.Node)],e.prototype,"untouch",void 0),r([f(cc.Node)],e.prototype,"openNode",void 0),r([f(cc.Node)],e.prototype,"willOpenNode",void 0),r([f(cc.Node)],e.prototype,"birdRootNode",void 0),r([f(cc.ProgressBar)],e.prototype,"unlockProgress",void 0),r([f(cc.Node)],e.prototype,"result_node",void 0),r([f(cc.Label)],e.prototype,"moneyLabel",void 0),r([f(cc.Label)],e.prototype,"percentLabel",void 0),r([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../common/AppData":"AppData","../common/GlobalInferfance":"GlobalInferfance","../control/AdsCenter":"AdsCenter","../control/EventController":"EventController","./AniPool":"AniPool"}],OverGame:[function(t,e,o){"use strict";cc._RF.push(e,"a3cd1k5//JFo6D7C5mI0X9T","OverGame");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../common/GlobalInferfance"),c=t("../common/AppData"),s=t("../control/EventController"),l=t("../control/AudioCenter"),u=t("../control/AdsCenter"),d=cc._decorator,p=d.ccclass,h=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickboo=!1,e}return i(e,t),e.prototype.onLoad=function(){var t=this.node.getChildByName("cnt").getChildByName("next_btn");t.active=!1,t.scale=.7,cc.tween(t).delay(1.5).call(function(){t.active=!0}).then(cc.tween().to(.23,{scale:1})).start();var e=this.node.getChildByName("cnt").getChildByName("ani").getComponent(dragonBones.ArmatureDisplay);e.addEventListener(dragonBones.EventObject.COMPLETE,function(){e.removeEventListener(dragonBones.EventObject.COMPLETE),e.playAnimation("newAnimation_2",0)},this)},e.prototype.start=function(){},e.prototype.onClick=function(t,e){switch(e){case"next":if(this.clickboo)return;this.clickboo=!0,c.default.gameComplete=!1,l.default.getInstance().playEffect(a.AudioEnum.resetGame),this.clickboo=!1,s.default.getInstance().emitListen(a.CUSTOM_NEXT_LEV),this.node.removeFromParent(),u.default.getInstance().showBanner()}},r([p],e)}(cc.Component));o.default=h,cc._RF.pop()},{"../common/AppData":"AppData","../common/GlobalInferfance":"GlobalInferfance","../control/AdsCenter":"AdsCenter","../control/AudioCenter":"AudioCenter","../control/EventController":"EventController"}],PointReport:[function(t,e,o){"use strict";cc._RF.push(e,"7bf4f7GrUdKm5kLqrr9O74u","PointReport"),Object.defineProperty(o,"__esModule",{value:!0}),o.PointReport=void 0;var n=t("../common/AppData"),i=cc._decorator;i.ccclass,i.property,function(t){t.ClickEvent={usr_device_type:"usr_device_type",usr_data_install:"usr_data_install",usr_data_round_start:"usr_data_round_start",usr_data_round_reopen:"usr_data_round_reopen",usr_data_game_end:"usr_data_game_end",usr_act_main_guid:"usr_act_main_guid",usr_data_restart:"usr_data_restart",usr_data_round_rollback:"usr_data_round_rollback",usr_data_round_addtube:"usr_data_round_addtube",usr_data_round_jumplev:"usr_data_round_jumplev",usr_data_round_prompt:"usr_data_round_prompt",wx_ad_show_request_succ:"wx_ad_show_request_succ",wx_ad_show_request_fail:"wx_ad_show_request_fail",wx_ad_excitation_finish:"wx_ad_excitation_finish",wx_ad_excitation_broken:"wx_ad_excitation_broken",wx_ad_show_request:"wx_ad_show_request",ta_mg_show:"ta_mg_show",ta_mg_hide:"ta_mg_hide",Difficulty_level:"Difficulty_level",usr_levels_completed:"usr_levels_completed",usr_data_game_error:"usr_data_game_error",game_drag:"game_drag",usr_game_scene:"usr_game_scene",usr_game_click_point:"usr_game_click_point",usr_gold_num:"usr_gold_num",usr_game_bg:"usr_game_bg",usr_game_platform:"usr_game_platform",usr_game_anims:"usr_game_anims",usr_own_bg:"usr_own_bg",usr_own_platform:"usr_own_platform",usr_own_anims:"usr_own_anims",usr_coin_get:"usr_coin_get",usr_shop_buy_skin:"usr_shop_buy_skin",usr_click_show_gameover:"usr_click_show_gameover"},t.reportInfo=function(t){if(0!=t.length)if(t.length%2>0)console.error(t);else{for(var e={},o=0;o<t.length;o++)o%2==0&&(e[""+t[o]]=t[o+1]);e.time=(new Date).getTime(),[].push(e),console.log(e)}},t.uploadUserInfo=function(){var e={};e[t.ClickEvent.usr_levels_completed]=n.default.birdLev,e[t.ClickEvent.usr_gold_num]=n.default.userGold,e[t.ClickEvent.usr_game_bg]=n.default.skinShop.use_bg,e[t.ClickEvent.usr_game_platform]=n.default.skinShop.use_platform,e[t.ClickEvent.usr_game_anims]=JSON.stringify(n.default.skinShop.use_anim),e[t.ClickEvent.usr_own_bg]=JSON.stringify(n.default.skinShop.own_bg),e[t.ClickEvent.usr_own_platform]=JSON.stringify(n.default.skinShop.own_platform),e[t.ClickEvent.usr_own_anims]=JSON.stringify(n.default.skinShop.own_anim)}}(o.PointReport||(o.PointReport={})),cc._RF.pop()},{"../common/AppData":"AppData"}],QuestType:[function(t,e,o){"use strict";cc._RF.push(e,"d736a5qo+FH4YJTEkDuMbqc","QuestType");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,a=(i.property,function(){function t(){}return t.getItemQuestById=function(t){return[].concat(this.relation_data[t])},t.getQuestIdByBlockId=function(t){for(var e in this.relation_data)if(this.relation_data[e][0]==t)return parseInt(e);return-1},t.relation_data={},n([r],t)}());o.default=a,cc._RF.pop()},{}],RegGlobalNode:[function(t,e,o){"use strict";cc._RF.push(e,"a73639nJyRCi4389QY7doSW","RegGlobalNode");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){cc.game.addPersistRootNode(this.node)},r([c],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],RunCore:[function(t,e,o){(function(n){"use strict";cc._RF.push(e,"094ecss3LZNsLNRrxkdRDkn","RunCore");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./BranchEntityControl"),s=t("./common/GlobalInferfance"),l=t("./common/AppData"),u=t("./control/EventController"),d=t("./control/AudioCenter"),p=t("./prefabs/Action"),h=t("./prefabs/MarkPool"),f=t("./prefabs/AniPool"),y=t("./util/CreateLevColor"),_=cc._decorator,g=_.ccclass,m=_.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cupCenter=null,e.aniLayer=null,e.eff_group=null,e.startModifyPos=!1,e.entityNodes={},e.runningAni=[],e.hideEntityNodes={},e.__idArr=[],e.all_ids=[],e.syncBranchs=[],e.RULE_COLOR=[[4],[4,5],[4,5,7],[4,5,7,1],[4,5,7,1,6],[4,5,7,1,6,8],[4,5,7,1,6,8,3],[4,5,7,1,6,8,3,9],[4,5,7,1,6,8,3,9,2],[4,5,7,1,6,8,3,9,2,10]],e.no_move_click_num=0,e.startPos=null,e.maxBirdLayer=0,e.guidePoints=[],e.guideNodes=[],e}return r(e,t),e.prototype.onLoad=function(){this.node.getChildByName("bgs").getChildByName(l.default.bg_index.toString()).active=!0},e.prototype.start=function(){},e.prototype.hide=function(){cc.tween(this.aniLayer).then(cc.tween().to(.5,{opacity:0})).start(),cc.tween(this.cupCenter.node).then(cc.tween().to(.5,{opacity:0})).start()},e.prototype.show=function(){this.aniLayer.opacity=255,this.cupCenter.node.opacity=255},e.prototype.registEvent=function(){u.default.getInstance().addListen(s.CUSTOM_NEXT_GUIDE,this.toNextGuide,this),u.default.getInstance().addListen(s.CUSTOM_RESTORE,this.removeHideNode,this),u.default.getInstance().addListen(s.CUSTOM_UPDATE_STATE,this.onRefreshState,this),u.default.getInstance().addListen(s.CUSTOM_UPDATE_INFO,this.onRefreshInfo,this),u.default.getInstance().addListen(s.CUSTOM_CHANGE_SKIN,this.useSkin,this)},e.prototype.useSkin=function(t){var e=t.detail.showId,o=t.detail.posId;switch(e){case s.ShopShowType.bird:case s.ShopShowType.defaultBird:var n=o+"_"+t.detail.posIndex;this.changeAssets({ani:n});break;case s.ShopShowType.platform:this.changeAssets({cup:o});break;case s.ShopShowType.bg:this.changeAssets({bg:o})}},e.prototype.onRefreshInfo=function(t){var e=this;if(t.detail.newBranch){for(var o in t.detail.useNew,this.entityNodes[t.detail.index]=[],this.entityNodes)if((r=this.entityNodes[o])&&r.length)for(var n=this.cupCenter.getEntityRealPos(Number(o),this.aniLayer),i=0;i<r.length;i++)r[i].getComponent(p.default).isStatic&&(r[i].scaleX*=this.cupCenter.layout_scale,r[i].scaleY*=this.cupCenter.layout_scale,r[i].setPosition(cc.v2(n[i].x,n[i].y)));for(var o in this.hideEntityNodes){var r;if((r=this.hideEntityNodes[o])&&r.length)for(var a=0;a<r.length;a++)r[a].egg.setPosition(r[a].bird.getPosition())}}else{var c=t.detail.pollNum,d=t.detail.from,h=t.detail.to,f=t.detail.quick,y=this.entityNodes[d],_=this.entityNodes[h],g=_.length;for(a=y.length-1;a>=0&&(f||(y[a].getComponent("Action").flyBoo=!0),_.push(y[a]),y.splice(a,1),!((c-=1)<=0));a--);var m=this.cupCenter.isBranchFull(h);if(-1!=m){m&&(this.runningAni=this.runningAni.concat(_),this.cupCenter.recordBranchs(h),l.default.colourReach.push(l.default.game_step),this.cupCenter.releasNodeAction(h));var v=this.cupCenter.getEntityRealPos(h,this.aniLayer),b=0,C=function(t){if(t>=g){var o=_[t];w.maxBirdLayer+=1,o.zIndex=w.maxBirdLayer,f?((d%2==0&&h%2!=0||h%2==0&&d%2!=0)&&(o.scaleX*=-1),o.getComponent("Action").flyBoo=!1,o.setPosition(v[t])):cc.tween(o).delay(.1*b).call(function(){e.flyToOtherBranch(o,o.getPosition(),v[t],d,h,m)}).start(),b+=1}},w=this;for(a=0;a<_.length;a++)C(a);u.default.getInstance().emitListen(s.CUSTOM_REFRESH)}}},e.prototype.flyToOtherBranch=function(t,e,o,n,i,r){var a=this,c=1;n%2==0?t.scaleX<0&&(t.scaleX*=-1):t.scaleX>0&&(t.scaleX*=-1),n%2==0&&i%2!=0||i%2==0&&n%2!=0?c=-1:n%2==0&&i%2==0?o.x-e.x<0&&(t.scaleX*=-1,c=-1):n%2!=0&&i%2!=0&&o.x-e.x>0&&(t.scaleX*=-1,c=-1),u.default.getInstance().emitListen(s.CUSTOM_REFRESH),t.getComponent(p.default).animationGo(n,i,e,o,function(){if(a.modifyLayer(),a.scheduleOnce(function(){a.checkIsRunning()||l.default.gameComplete||u.default.getInstance().emitListen(s.CUSTOM_REFRESH)}),!l.default.gameComplete&&a.entityNodes[i])if(r){var t=a.entityNodes[i];a.runningAni.concat(t),delete a.entityNodes[i];if(cc.view.getVisibleSize().width,t&&(d.default.getInstance().playEffect(s.AudioEnum.Collect),l.default.AppDataObj.shake_open&&console.log("====exec===shake==="),a.flyToOutSide(t,i),l.default.userGold+=4*s.BirdAddCoin,l.default.getInstance().saveGold()),a.cupCenter.allBranchFull(),l.default.gameComplete){var e=a,o=setTimeout(function(){for(var t in clearTimeout(o),e.entityNodes){var n=e.entityNodes[t];a.flyToOutSide(n,Number(t))}e.entityNodes={}},800);a.startModifyPos=!1,a.__idArr=[],a.syncBranchs=[],console.log("=====\u6e38\u620f\u7ed3\u675f=====\u51fa\u7ed3\u7b97\u754c\u9762=====");var n=setTimeout(function(){clearTimeout(n),e.cupCenter.downAllBranchAni(),u.default.getInstance().emitListen(s.CUSTOM_FINISH)},1500);return}}else a.cupCenter.getBranchShakeState(i)||(a.syncBranchs=[i],a.startModifyPos=!0,a.cupCenter.shakeBranch(i))},c)},e.prototype.modifyLayer=function(){var t=0,e={};for(var o in this.entityNodes){var n=this.entityNodes[o];if(n&&n.length)for(var i=0,r=n.length;i<r;i++){var a=n[i].getComponent("Action");e[a.pollindex]||(e[a.pollindex]=t,t+=1),n[i].zIndex=e[a.pollindex]}}var c=t;for(var o in this.hideEntityNodes){var s=this.hideEntityNodes[o];s&&s.egg&&(s.egg.zIndex=c,c+=1)}},e.prototype.releaseAni=function(){},e.prototype.flyToOutSide=function(t,e){var o=this;if(t&&t.length){d.default.getInstance().playEffect(s.AudioEnum.flyout);for(var n=e%2==0?1:-1,i=(cc.view.getVisibleSize().width+200)*n,r=function(e){var o=.3*Math.random();cc.tween(t[e]).delay(o).call(function(){var o=t[e].getComponent("Action"),r=200*Math.random()+400;1==n?t[e].scaleX<0&&(t[e].scaleX*=-1):t[e].scaleX>0&&(t[e].scaleX*=-1),o.execMove(t[e].getPosition(),cc.v2(t[e].x+i,t[e].y+r),function(){f.default.putInPool(o.pollindex,t[e])},1),u.default.getInstance().emitListen(s.CUSTOM_COIN_FLY,t[e].getPosition())}).start()},a=t.length-1;a>=0;a--)r(a);this.scheduleOnce(function(){o.cupCenter.execBranchDown(e)},.2)}},e.prototype.onTouchNoMoveEnd=function(){l.default.startSlideOper&&(this.no_move_click_num++,this.cupCenter.selected&&this.no_move_click_num>=2&&(this.no_move_click_num=0,this.cupCenter.clickBranchEntity(this.cupCenter.selected)))},e.prototype.execPromptMove=function(t,e){var o=this.cupCenter.getBranchByIndex(t),n=this.cupCenter.getBranchByIndex(e);null!=o&&null!=n&&(this.cupCenter.selected&&this.rebackNormal(this.cupCenter.selected.branchIndex),this.cupCenter.selected=o,this.cupCenter.clickBranchEntity(n))},e.prototype.onTouchEnd=function(t){if(l.default.startSlideOper&&l.default.aniFinish){var e=t.getLocation(),o=this.cupCenter.containsPos(e);if(o){if(o.finished||l.default.gameComplete)return;this.cupCenter.selected&&(this.cupCenter.clickBranchEntity(o),this.cupCenter.selected||(this.no_move_click_num=0))}}},e.prototype.onTouchStart=function(t){var e=t.getLocation();if(this.startPos=e,l.default.startSlideOper&&l.default.aniFinish){var o=this.cupCenter.containsPos(e);if(o){if(o.finished||l.default.gameComplete)return;(!this.cupCenter.selected||this.cupCenter.selected&&this.cupCenter.selected!=o)&&(this.cupCenter.clickBranchEntity(o)||(this.no_move_click_num=0))}}},e.prototype.onTouchMove=function(t){var e=t.getLocation();this.startPos&&e.sub(this.startPos).mag()>130&&(this.startPos=null)},e.prototype.changeAssets=function(t){if(t.bg&&(this.node.getChildByName("bgs").getChildByName(l.default.bg_index.toString()).active=!1,l.default.bg_index=t.bg,cc.sys.localStorage.setItem(s.CustomLocalStorageKey.BG_INDEX,l.default.bg_index),this.node.getChildByName("bgs").getChildByName(t.bg.toString()).active=!0),t.cup)for(var e in this.cupCenter.onReplaceBranchs(t.cup),l.default.cup_skin_index=t.cup,cc.sys.localStorage.setItem(s.CustomLocalStorageKey.CUP_INDEX,l.default.cup_skin_index),this.rebackNormal(),this.entityNodes)for(var o=this.cupCenter.getEntityRealPos(Number(e),this.aniLayer),n=0;n<this.entityNodes[e].length;n++)this.entityNodes[e][n].setPosition(cc.v2(o[n].x,o[n].y)),this.hideEntityNodes[e]&&this.hideEntityNodes[e][n]&&this.hideEntityNodes[e][n].egg.setPosition(cc.v2(o[n].x,o[n].y));if(t.ani){var i=t.ani.split("_");for(var e in this.entityNodes)for(n=0;n<this.entityNodes[e].length;n++){var r=this.entityNodes[e][n];if(r.name.split("_")[0]==i[0]){var a=r.scaleX>0?1:-1,c=f.default.getFromPool(t.ani);c.active=!0,c.getComponent("Action").pollindex=t.ani,c.getComponent("Action").flyBoo=!1,this.aniLayer.addChild(c),c.setSiblingIndex(r.getSiblingIndex()),c.setPosition(r.getPosition()),c.scale*=this.cupCenter.layout_scale,c.scaleX*=a,f.default.putInPool(r.name,r),this.entityNodes[e][n]=c,this.hideEntityNodes[e]&&this.hideEntityNodes[e][n]&&(this.hideEntityNodes[e][n].bird=c,c.active=!1)}}var u=t.ani.split("_");l.default.getAni_index()[u[0]]=Number(u[1])}l.default.getInstance().saveData()},e.prototype.createEntity=function(t){for(var e=0,o=cc.view.getVisibleSize().width/2,n=l.default.getAni_index(),i=0,r=t.length,a=0;a<t.length;a++){var c=this.cupCenter.getEntityRealPos(a,this.aniLayer);~this.syncBranchs.indexOf(a)||this.syncBranchs.push(a),this.entityNodes[a]=[],this.hideEntityNodes[a]=[];for(var s=0;s<t[a].length;s++)if(0!=t[a][s]){var u=0==e?1:-1,d=t[a][s]+"_"+n[t[a][s]],p=f.default.getFromPool(d);p.active=!0,p.getComponent("Action").pollindex=d,p.getComponent("Action").flyBoo=!1,this.aniLayer.addChild(p),p.zIndex=3*r+(4*a+s);var y=c[s].x-o*u,_=c[s].y+100*Math.random()+200;if(p.setPosition(cc.v2(y,_)),p.scale*=this.cupCenter.layout_scale,p.scaleX*=u,this.entityNodes[a].push(p),this.maxBirdLayer=p.zIndex,l.default.hideNode&&0!=t[a][s+1]&&null!=t[a][s+1]){var g=h.default.getFromPool();g.zIndex=i,g.getComponent(sp.Skeleton).setAnimation(1,"idle",!0),g.scale*=this.cupCenter.layout_scale,this.aniLayer.addChild(g),p.active=!1,p.setPosition(c[s].x,c[s].y),g.setPosition(c[s].x,c[s].y),this.hideEntityNodes[a].push({egg:g,bird:p}),i+=1}}e=0==e?1:0}this.modifyLayer()},e.prototype.startEnterAni=function(){for(var t=this,e=0,o=0,n=0;n<this.__idArr.length;n++)"0,0,0,0"==this.__idArr[n].toString()&&(o+=1);d.default.getInstance().playEffect(s.AudioEnum.Fly_2_2);var i=l.default.hideNode?this.__idArr.length-o:4*(this.__idArr.length-o);1==l.default.birdLev&&(i=4);var r=function(o){var n=a.entityNodes[o];if(n&&n.length)for(var r=0,c=a.cupCenter.getEntityRealPos(Number(o),a.aniLayer),s=function(a){if(!n[a].active)return"continue";var s=n[a].getComponent(p.default),u=setTimeout(function(){clearTimeout(u),s.execMove(n[a].getPosition(),cc.v2(c[a].x,c[a].y),function(){if((1==(r+=1)||l.default.hideNode)&&(t.startModifyPos=!0,t.cupCenter.shakeBranch(Number(o)),1!=l.default.birdLev&&2!=l.default.birdLev||t.showGuideLevel()),(e+=1)>=i){l.default.aniFinish=!0;var n=t,a=setTimeout(function(){clearTimeout(a),n.startModifyPos=!1,t.syncBranchs=[]},800)}},1,1e3)},100*a)},u=0;u<n.length;u++)s(u)},a=this;for(var c in this.entityNodes)r(c)},e.prototype.showGuideLevel=function(){if((1==l.default.birdLev||2==l.default.birdLev)&&this.guidePoints.length<=0){var t=this.eff_group.getChildByName("guide_hand");if(t.active=!0,1==l.default.birdLev){var e=(c=this.cupCenter.node.getChildByName("layout_h").getChildByName("layout_left").children[0]).parent.convertToWorldSpaceAR(cc.v2(c.x+c.width/2,c.y)),o=this.eff_group.convertToNodeSpaceAR(e);this.guidePoints.push(o);var n=(a=this.cupCenter.node.getChildByName("layout_h").getChildByName("layout_right").children[0]).parent.convertToWorldSpaceAR(cc.v2(a.x+a.width/2,a.y)),i=this.eff_group.convertToNodeSpaceAR(n);this.guidePoints.push(i);var r=this.guidePoints.shift();t.setPosition(r),this.guideNodes.push(c,a),l.default.initGuide=this.guideNodes.shift()}else if(2==l.default.birdLev){var a;n=(a=this.cupCenter.node.getChildByName("layout_h").getChildByName("layout_right").children[0]).parent.convertToWorldSpaceAR(cc.v2(a.x+a.width/2,a.y)),i=this.eff_group.convertToNodeSpaceAR(n),this.guidePoints.push(i);var c,s=this.cupCenter.node.getChildByName("layout_h").getChildByName("layout_left").children[1],u=s.parent.convertToWorldSpaceAR(cc.v2(s.x+s.width/2,s.y)),d=this.eff_group.convertToNodeSpaceAR(u);this.guidePoints.push(d),e=(c=this.cupCenter.node.getChildByName("layout_h").getChildByName("layout_left").children[0]).parent.convertToWorldSpaceAR(cc.v2(c.x+c.width/2,c.y)),o=this.eff_group.convertToNodeSpaceAR(e),this.guidePoints.push(o),this.guidePoints.push(i),this.guidePoints.push(o),this.guidePoints.push(d),this.guideNodes.push(a,s,c,a,c,s),t.setPosition(this.guidePoints.shift()),l.default.initGuide=this.guideNodes.shift()}}},e.prototype.toNextGuide=function(){if(console.log("=====\u6267\u884c\u4e0b\u4e00\u6b65\u5f15\u5bfc===="),(1==l.default.birdLev||2==l.default.birdLev)&&this.guidePoints.length>0){l.default.initGuide=this.guideNodes.shift();var t=this.eff_group.getChildByName("guide_hand"),e=this.guidePoints.shift();t.setPosition(e)}else l.default.initGuide=null,(t=this.eff_group.getChildByName("guide_hand")).active=!1},e.prototype.initCfg=function(t){var e=this;if(l.default.hideNode=!1,l.default.dataBuffers.length){if(l.default.dataBuffers[l.default.birdLev-1])l.default.hideNode=l.default.markBuffers[l.default.birdLev-1]>=1,this.syncPageFontToId(l.default.dataBuffers[l.default.birdLev-1]);else{var o=y.default.getColorArr(l.default.birdLev);this.dealLevIds(o)}t&&t()}else cc.resources.load("way/ratio",cc.BufferAsset,function(o,i){for(var r=i._buffer,a=new n(r.byteLength),c=new Uint8Array(r),s=0;s<a.length;++s)a[s]=c[s];for(var u=a.readInt32BE(0),d=0,p=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],h=0;h<u;h++){a.readInt32BE(d+4);for(var f=a.readInt32BE(d+8),_=a.readInt32BE(d+12),g="",m=0;m<_;m++)g+=p[Number(a.readInt32BE(d+16+4*m))-1];d=d+12+4*_,l.default.dataBuffers.push(g),l.default.markBuffers.push(f)}if(l.default.dataBuffers[l.default.birdLev-1])l.default.hideNode=l.default.markBuffers[l.default.birdLev-1]>=1,e.syncPageFontToId(l.default.dataBuffers[l.default.birdLev-1]);else{var v=y.default.getColorArr(l.default.birdLev);e.dealLevIds(v)}t&&t()})},e.prototype.initView=function(){var t=this;this.cupCenter.createBranchEntity(this.__idArr),l.default.isAddBranch&&this.cupCenter.addBranchEntity(),l.default.aniFinish=!1,this.scheduleOnce(function(){t.createEntity(t.__idArr)})},e.prototype.dealLevIds=function(t){this.all_ids=[].concat(t);for(var e=t,o=0,n=[];o<e.length;){var i=[e[o],e[o+1]||0,e[o+2]||0,e[o+3]||0];i.reverse(),n.push(i),o+=4}this.__idArr=n},e.prototype.calLevIds=function(){return this.cupCenter.ids},e.prototype.syncPageFontToId=function(t){for(var e=[],o=t.length/4,n=[],i=t.split(""),r=0;r<i.length;r++)~n.indexOf(i[r])||"O"==i[r]||n.push(i[r]);var a=n.length,c=[].concat(this.RULE_COLOR[a-1]),s={};for(r=0;r<o;r++){var u=t.substring(4*r,4*r+4).split("");u.reverse();for(var d=0;d<u.length;d++)"O"!=u[d]?(s[u[d]]||(s[u[d]]=c.shift()),e.push(s[u[d]])):e.push(0)}l.default.level_ids=[].concat(e),this.dealLevIds(e)},e.prototype.initialize=function(){for(var t in this.cupCenter.onRealseBranchs(),this.entityNodes)if((n=this.entityNodes[t])&&n.length)for(var e=0;e<n.length;e++){cc.Tween.stopAllByTarget(n[e]);var o=n[e].getComponent("Action");f.default.putInPool(o.pollindex,n[e])}for(e=0;e<this.runningAni.length;e++)this.runningAni[e]&&(cc.Tween.stopAllByTarget(this.runningAni[e]),o=this.runningAni[e].getComponent("Action"),f.default.putInPool(o.pollindex,this.runningAni[e]));for(var t in this.hideEntityNodes){var n;if((n=this.hideEntityNodes[t])&&n.length)for(e=0;e<n.length;e++)h.default.putInPool(n[e].egg)}this.startModifyPos=!1,this.entityNodes={},this.runningAni=[],this.hideEntityNodes={},this.__idArr=[],this.syncBranchs=[],l.default.hideNode=!1},e.prototype.removeHideNode=function(t){var e=t.detail.restore,o=t.detail.index,n=this.hideEntityNodes[o];if(n&&n.length)for(var i=function(){var t=n.pop(),e=t.egg.getComponent(sp.Skeleton);e.setAnimation(1,"broken",!1),e.setCompleteListener(function(e){"broken"==(e.animation?e.animation.name:"")&&h.default.putInPool(t.egg)}),t.bird.active=!0;var o=t.bird.scaleX,i=t.bird.scaleY;t.bird.scale=0,t.bird.getComponent("Action").flyBoo=!0,t.bird.getComponent("Action").changeStand(),cc.tween(t.bird).then(cc.tween().to(.5,{scaleX:o,scaleY:i}).call(function(){t.bird.getComponent("Action").flyBoo=!1})).start()},r=0;r<e;r++)i()},e.prototype.addBranchEntity=function(){this.startModifyPos=!0;for(var t=Object.keys(this.entityNodes),e=[],o=0;o<t.length;o++)e.push(parseInt(t[o]));this.syncBranchs=e,this.cupCenter.addBranchEntity()},e.prototype.undoAction=function(){return this.cupCenter.undoAction()},e.prototype.checkIsRunning=function(){for(var t in this.entityNodes){var e=this.entityNodes[t];if(e&&e.length)for(var o=0;o<e.length;o++)if(e[o].active&&!e[o].getComponent("Action").isStatic)return!0}return!1},e.prototype.onRefreshState=function(t){this.refresAniStates(t.detail.focusIndex,t.detail.bool,t.detail.topNum)},e.prototype.getActionNum=function(){return this.cupCenter.getActionNum()},e.prototype.refresAniStates=function(t,e,o){var n=this.entityNodes[t];if(n&&n.length)for(var i=!1,r=n.length-1;r>=0&&o>0;r--){var a=n[r].getComponent("Action");if(e){var c=a.pollindex.split("_");i||(i=!0,d.default.getInstance().playEffect(p.default.harkEff(c[0]))),a.setFocus()}else a.rebackNormal();o-=1}},e.prototype.rebackNormal=function(t){if(void 0===t&&(t=null),t){if((n=this.entityNodes[t])&&n.length)for(var e=n.length-1;e>=0;e--)n[e].getComponent("Action").rebackNormal()}else for(var o in this.entityNodes){var n;if((n=this.entityNodes[o])&&n.length)for(e=n.length-1;e>=0;e--)n[e].getComponent("Action").rebackNormal()}this.cupCenter.selected=null},e.prototype.update=function(){if(this.startModifyPos&&this.__idArr){for(var t in this.entityNodes)if((n=this.entityNodes[Number(t)])&&n.length&&-1!=this.syncBranchs.indexOf(Number(t)))for(var e=this.cupCenter.getEntityRealPos(Number(t),this.aniLayer),o=0;o<n.length;o++)n[o].getComponent(p.default).isStatic&&n[o].setPosition(cc.v2(e[o].x,e[o].y));for(var t in this.hideEntityNodes){var n;if((n=this.hideEntityNodes[t])&&n.length)for(var i=0;i<n.length;i++)n[i].egg.setPosition(n[i].bird.getPosition())}this.cupCenter.checkAllShake()||(this.startModifyPos=!1)}},a([m(c.default)],e.prototype,"cupCenter",void 0),a([m(cc.Node)],e.prototype,"aniLayer",void 0),a([m(cc.Node)],e.prototype,"eff_group",void 0),a([g],e)}(cc.Component);o.default=v,cc._RF.pop()}).call(this,t("buffer").Buffer)},{"./BranchEntityControl":"BranchEntityControl","./common/AppData":"AppData","./common/GlobalInferfance":"GlobalInferfance","./control/AudioCenter":"AudioCenter","./control/EventController":"EventController","./prefabs/Action":"Action","./prefabs/AniPool":"AniPool","./prefabs/MarkPool":"MarkPool","./util/CreateLevColor":"CreateLevColor",buffer:2}],Set:[function(t,e,o){"use strict";cc._RF.push(e,"d5c23TXKBFBuqiwu03NICxE","Set");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../common/GlobalInferfance"),c=t("../common/AppData"),s=t("../control/EventController"),l=t("../control/AudioCenter"),u=cc._decorator,d=u.ccclass,p=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audio_btn=null,e.shake_btn=null,e.music_btn=null,e.clickBoo=!1,e}return i(e,t),e.prototype.onLoad=function(){this.changeSound(),this.changeShake(),this.changeMusic();var t=this.node.getChildByName("content");t.opacity=0;var e=cc.tween().to(.4,{opacity:255},{easing:"circOut"});cc.tween(t).then(e).start()},e.prototype.start=function(){},e.prototype.changeSound=function(){var t=this.audio_btn.node.getChildByName("Background").getChildByName("sound_icon_down"),e=this.audio_btn.node.getChildByName("Background").getChildByName("sound_icon_up");t.active=c.default.AppDataObj.sound_open,e.active=!c.default.AppDataObj.sound_open,c.default.getInstance().saveData()},e.prototype.changeShake=function(){var t=this.shake_btn.node.getChildByName("Background").getChildByName("shake_close"),e=this.shake_btn.node.getChildByName("Background").getChildByName("shake_open");t.active=!c.default.AppDataObj.shake_open,e.active=c.default.AppDataObj.shake_open,c.default.getInstance().saveData()},e.prototype.changeMusic=function(){var t=this.music_btn.node.getChildByName("Background").getChildByName("music_icon_down"),e=this.music_btn.node.getChildByName("Background").getChildByName("music_icon_up");t.active=c.default.AppDataObj.music_open,e.active=!c.default.AppDataObj.music_open,c.default.AppDataObj.music_open?l.default.getInstance().playBgMusic():l.default.getInstance().stopBgMusic(),c.default.getInstance().saveData()},e.prototype.onClick=function(t,e){var o=this;switch(e){case"sound":if(this.clickBoo)return;c.default.AppDataObj.sound_open=!c.default.AppDataObj.sound_open,c.default.getInstance().saveData(),l.default.getInstance().playEffect(a.AudioEnum.common_click),this.changeSound();break;case"shake":if(this.clickBoo)return;c.default.AppDataObj.shake_open=!c.default.AppDataObj.shake_open,c.default.getInstance().saveData(),l.default.getInstance().playEffect(a.AudioEnum.common_click),this.changeShake();break;case"music":if(this.clickBoo)return;c.default.AppDataObj.music_open=!c.default.AppDataObj.music_open,l.default.getInstance().playEffect(a.AudioEnum.common_click),this.changeMusic();break;case"close":if(this.clickBoo)return;this.clickBoo=!0,l.default.getInstance().playEffect(a.AudioEnum.resetGame),s.default.getInstance().emitListen(a.CUSTOM_SHOW_ANI),this.node.removeFromParent();break;case"shop":if(this.clickBoo)return;this.clickBoo=!0,l.default.getInstance().playEffect(a.AudioEnum.common_click),s.default.getInstance().emitListen(a.CUSTOM_SHOW_ANI),this.node.removeFromParent(),this.showShop();break;case"reset":if(this.clickBoo)return;this.clickBoo=!0,l.default.getInstance().playEffect(a.AudioEnum.resetGame);var n=setTimeout(function(){clearTimeout(n),s.default.getInstance().emitListen(a.CUSTOM_RESET,{ani:!1}),c.default.banner_state=!1,s.default.getInstance().emitListen(a.CUSTOM_SHOW_ANI),o.node.removeFromParent()},100);break;case"feedback":if(this.clickBoo)return;this.clickBoo=!0,console.log("====feedback==="),l.default.getInstance().playEffect(a.AudioEnum.common_click);var i=this,r=setTimeout(function(){clearTimeout(r),i.clickBoo=!1},1500);break;case"private":if(this.clickBoo)return;this.clickBoo=!0,console.log("====private==="),l.default.getInstance().playEffect(a.AudioEnum.common_click);var u=this,d=setTimeout(function(){clearTimeout(d),u.clickBoo=!1},1500)}},e.prototype.showShop=function(){},r([p(cc.Button)],e.prototype,"audio_btn",void 0),r([p(cc.Button)],e.prototype,"shake_btn",void 0),r([p(cc.Button)],e.prototype,"music_btn",void 0),r([d],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../common/AppData":"AppData","../common/GlobalInferfance":"GlobalInferfance","../control/AudioCenter":"AudioCenter","../control/EventController":"EventController"}],ShopItem1:[function(t,e,o){"use strict";cc._RF.push(e,"6baac/l0BZPurR9INFuF0De","ShopItem1");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator.menu,c=t("./AniPool"),s=t("../common/AppData"),l=t("../control/EventController"),u=t("../common/GlobalInferfance"),d=cc._decorator,p=d.ccclass,h=d.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemId=0,e}return i(e,t),e.prototype.onLoad=function(){l.default.getInstance().addListen(u.CUSTOM_CHANGE_SKIN,this.reload,this)},e.prototype.start=function(){},e.prototype.update=function(){},e.prototype.setItemId=function(t){this.removeOldBird(),this.itemId=t,this.reload()},e.prototype.removeOldBird=function(){this.birdRootNode.getChildByName("bird")&&(this.birdNode.removeFromParent(),c.default.putInPool(this.key,this.birdNode))},e.prototype.reload=function(){var t=this.shopData.json[this.itemId],e=t.posId+"_"+t.posIndex;this.key!=e&&(this.key=e,this.birdNode=c.default.getFromPool(this.key),this.birdNode.parent=this.birdRootNode,this.birdNode.name="bird");var o=t.price;s.default.skinShop.discountItem[this.itemId]&&(o=Math.floor(o*s.default.skinShop.discountItem[this.itemId]*.1),this.discountCircle.active=!0,this.discountLabel.string=10*(10-s.default.skinShop.discountItem[this.itemId])+"%"),this.priceLabel.string=o,s.default.skinShop.own_anim[this.itemId]?(this.buyBtn.node.active=!1,this.bgSprite.spriteFrame=this.gotFrame,s.default.skinShop.use_anim[this.itemId]?(this.chooseBtn.node.active=!1,this.useSprite.node.active=!0):(this.chooseBtn.node.active=!0,this.useSprite.node.active=!1)):(this.chooseBtn.node.active=!1,this.useSprite.node.active=!1,s.default.birdLev>=t.openLevel?(this.buyBtn.node.active=!0,this.lock.active=!1):(this.buyBtn.node.active=!1,this.lock.active=!0,this.unlockNum.string=t.openLevel))},e.prototype.onClickBuy=function(){l.default.getInstance().emitListen(u.CUSTOM_BUY_SKIN,this.itemId)},e.prototype.onClickChoose=function(){var t=this.shopData.json[this.itemId];for(var e in s.default.skinShop.use_anim){var o=Number(e);if(this.shopData.json[o].posId==t.posId){delete s.default.skinShop.use_anim[e];break}}s.default.skinShop.use_anim[this.itemId]=!0,l.default.getInstance().emitListen(u.CUSTOM_CHANGE_SKIN,t)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),l.default.getInstance().removeListen(u.CUSTOM_CHANGE_SKIN),c.default.putInPool(this.key,this.birdNode)},r([h(cc.Sprite)],e.prototype,"bgSprite",void 0),r([h(cc.SpriteFrame)],e.prototype,"gotFrame",void 0),r([h(cc.Label)],e.prototype,"priceLabel",void 0),r([h(cc.Button)],e.prototype,"buyBtn",void 0),r([h(cc.Button)],e.prototype,"chooseBtn",void 0),r([h(cc.Sprite)],e.prototype,"useSprite",void 0),r([h(cc.JsonAsset)],e.prototype,"shopData",void 0),r([h(cc.Node)],e.prototype,"birdRootNode",void 0),r([h(cc.Node)],e.prototype,"lock",void 0),r([h(cc.Label)],e.prototype,"unlockNum",void 0),r([h(cc.Node)],e.prototype,"discountCircle",void 0),r([h(cc.Label)],e.prototype,"discountLabel",void 0),r([p,a("shop/shopItem1")],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../common/AppData":"AppData","../common/GlobalInferfance":"GlobalInferfance","../control/EventController":"EventController","./AniPool":"AniPool"}],ShopItem2:[function(t,e,o){"use strict";cc._RF.push(e,"f83b0LPHEVNb7yX8lzjItav","ShopItem2");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator.menu,c=t("../common/AppData"),s=t("../control/EventController"),l=t("../common/GlobalInferfance"),u=cc._decorator,d=u.ccclass,p=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frameList=[],e.itemId=0,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){s.default.getInstance().addListen(l.CUSTOM_CHANGE_SKIN,this.reload,this)},e.prototype.update=function(){},e.prototype.setItemId=function(t){this.itemId=t,this.reload()},e.prototype.reload=function(){var t=this.shopData.json[this.itemId];this.branchSprite.spriteFrame=this.frameList[t.posId-1];var e=t.price;c.default.skinShop.discountItem[this.itemId]&&(e=Math.floor(e*c.default.skinShop.discountItem[this.itemId]*.1),this.discountCircle.active=!0,this.discountLabel.string=10*(10-c.default.skinShop.discountItem[this.itemId])+"%"),this.priceLabel.string=e,c.default.skinShop.own_platform[this.itemId]?(this.buyBtn.node.active=!1,this.bgSprite.spriteFrame=this.gotFrame,c.default.skinShop.use_platform==this.itemId?(this.chooseBtn.node.active=!1,this.useSprite.node.active=!0):(this.chooseBtn.node.active=!0,this.useSprite.node.active=!1)):(this.chooseBtn.node.active=!1,this.useSprite.node.active=!1,c.default.birdLev>=t.openLevel?(this.buyBtn.node.active=!0,this.lock.active=!1):(this.buyBtn.node.active=!1,this.lock.active=!0,this.unlockNum.string=t.openLevel))},e.prototype.onClickBuy=function(){s.default.getInstance().emitListen(l.CUSTOM_BUY_SKIN,this.itemId)},e.prototype.onClickChoose=function(){var t=this.shopData.json[this.itemId];c.default.skinShop.use_platform=this.itemId,s.default.getInstance().emitListen(l.CUSTOM_CHANGE_SKIN,t)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),s.default.getInstance().removeListen(l.CUSTOM_CHANGE_SKIN)},r([p(cc.Sprite)],e.prototype,"bgSprite",void 0),r([p(cc.SpriteFrame)],e.prototype,"gotFrame",void 0),r([p(cc.Label)],e.prototype,"priceLabel",void 0),r([p(cc.Button)],e.prototype,"buyBtn",void 0),r([p(cc.Button)],e.prototype,"chooseBtn",void 0),r([p(cc.Sprite)],e.prototype,"useSprite",void 0),r([p(cc.JsonAsset)],e.prototype,"shopData",void 0),r([p(cc.Sprite)],e.prototype,"branchSprite",void 0),r([p([cc.SpriteFrame])],e.prototype,"frameList",void 0),r([p(cc.Node)],e.prototype,"lock",void 0),r([p(cc.Label)],e.prototype,"unlockNum",void 0),r([p(cc.Node)],e.prototype,"discountCircle",void 0),r([p(cc.Label)],e.prototype,"discountLabel",void 0),r([d,a("shop/shopItem2")],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../common/AppData":"AppData","../common/GlobalInferfance":"GlobalInferfance","../control/EventController":"EventController"}],ShopItem3:[function(t,e,o){"use strict";cc._RF.push(e,"3fcc0iRYktKU4a8SaRbPAFF","ShopItem3");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator.menu,c=cc._decorator,s=c.ccclass,l=c.property,u=t("../common/AppData"),d=t("../control/EventController"),p=t("../common/GlobalInferfance"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frameList=[],e.itemId=0,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){d.default.getInstance().addListen(p.CUSTOM_CHANGE_SKIN,this.reload,this)},e.prototype.update=function(){},e.prototype.setItemId=function(t){this.itemId=t,this.reload()},e.prototype.reload=function(){var t=this.shopData.json[this.itemId],e=t.posId-1;this.sprite.spriteFrame=this.frameList[e];var o=t.price;u.default.skinShop.discountItem[this.itemId]&&(o=Math.floor(o*u.default.skinShop.discountItem[this.itemId]*.1),this.discountCircle.active=!0,this.discountLabel.string=10*(10-u.default.skinShop.discountItem[this.itemId])+"%"),this.priceLabel.string=o,u.default.skinShop.own_bg[this.itemId]?(this.buyBtn.node.active=!1,u.default.skinShop.use_bg==this.itemId?(this.chooseBtn.node.active=!1,this.useSprite.node.active=!0):(this.chooseBtn.node.active=!0,this.useSprite.node.active=!1)):(this.chooseBtn.node.active=!1,this.useSprite.node.active=!1,u.default.birdLev>=t.openLevel?(this.buyBtn.node.active=!0,this.lock.active=!1):(this.buyBtn.node.active=!1,this.lock.active=!0,this.unlockNum.string=t.openLevel))},e.prototype.onClickBuy=function(){d.default.getInstance().emitListen(p.CUSTOM_BUY_SKIN,this.itemId)},e.prototype.onClickChoose=function(){var t=this.shopData.json[this.itemId];u.default.skinShop.use_bg=this.itemId,d.default.getInstance().emitListen(p.CUSTOM_CHANGE_SKIN,t)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),d.default.getInstance().removeListen(p.CUSTOM_CHANGE_SKIN)},r([l(cc.Sprite)],e.prototype,"sprite",void 0),r([l(cc.Label)],e.prototype,"priceLabel",void 0),r([l(cc.Label)],e.prototype,"gotLabel",void 0),r([l([cc.SpriteFrame])],e.prototype,"frameList",void 0),r([l(cc.Button)],e.prototype,"buyBtn",void 0),r([l(cc.Button)],e.prototype,"chooseBtn",void 0),r([l(cc.Sprite)],e.prototype,"useSprite",void 0),r([l(cc.JsonAsset)],e.prototype,"shopData",void 0),r([l(cc.Node)],e.prototype,"lock",void 0),r([l(cc.Label)],e.prototype,"unlockNum",void 0),r([l(cc.Node)],e.prototype,"discountCircle",void 0),r([l(cc.Label)],e.prototype,"discountLabel",void 0),r([s,a("shop/shopItem3")],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../common/AppData":"AppData","../common/GlobalInferfance":"GlobalInferfance","../control/EventController":"EventController"}],ShopPage:[function(t,e,o){"use strict";cc._RF.push(e,"930bau+F91EypxROZMA5Jmi","ShopPage");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,c,s=t("../common/GlobalInferfance"),l=t("../common/AppData"),u=t("../control/EventController"),d=t("../control/AudioCenter"),p=cc._decorator.menu,h=t("./ShopItem3"),f=t("./ShopItem1"),y=t("./ShopItem2"),_=t("../global/GlobalFunc"),g=t("../control/AdsCenter");(function(t){t[t.bird=1]="bird",t[t.platform=2]="platform",t[t.bg=3]="bg",t[t.off=4]="off"})(a||(a={})),function(t){t[t.shop=1]="shop",t[t.owner=2]="owner"}(c||(c={}));var m=cc._decorator,v=m.ccclass,b=m.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickBoo=!1,e.curPageType=a.bird,e.curOwnerType=c.shop,e}return i(e,t),e.prototype.onLoad=function(){this.showAction()},e.prototype.start=function(){this.reloadPage(),u.default.getInstance().addListen(s.CUSTOM_BUY_SKIN,this.buyItem,this),u.default.getInstance().addListen(s.CUSTOM_CHANGE_SKIN,this.changeSkin,this)},e.prototype.showAction=function(){var t=this.node.getChildByName("content");t.opacity=0;var e=cc.tween().to(.4,{opacity:255},{easing:"circOut"});cc.tween(t).then(e).start()},e.prototype.clickClose=function(){this.clickBoo||(this.clickBoo=!0,d.default.getInstance().playEffect(s.AudioEnum.resetGame),u.default.getInstance().emitListen(s.CUSTOM_SHOW_ANI),this.node.removeFromParent())},e.prototype.typeCheckEvent=function(t){var e=t.target.name;this.curPageType=e.charAt(e.length-1),this.reloadPage()},e.prototype.ownerCheckEvent=function(t){var e=t.target.name;this.curOwnerType=e.charAt(e.length-1),this.reloadPage()},e.prototype.reloadPage=function(){this.birdPage.active=this.curPageType==a.bird,this.branchPage.active=this.curPageType==a.platform,this.picPage.active=this.curPageType==a.bg,this.offPage.active=this.curPageType==a.off,this.reloadByType()},e.prototype.reloadByType=function(){this.shopView.content.removeAllChildren(),this.discountView.content.removeAllChildren(),this.ownerView.content.removeAllChildren();var t=this._getItemDataList(),e=this.curOwnerType==c.owner;this.shopView.node.active=!e,this.dailyDiscount.active=!e,this.discountView.node.active=!e,this.ownerView.node.active=e,this.curPageType==a.bird?this._reloadShopViewBird(t,e):this.curPageType==a.platform?this._reloadShopViewBranch(t,e):this.curPageType==a.bg?this._reloadShopViewPic(t,e):(this.curPageType,a.off)},e.prototype._reloadShopViewBird=function(t,e){if(e){var o={};for(var n in l.default.skinShop.own_anim){var i=Number(n);o[(c=this.shopData.json[i]).posId]||(o[c.posId]=[]),o[c.posId].push(c.id)}for(var n in o)for(var r=0;r<o[n].length;r++){var a=Number(o[n][r]);this._addItemToView(this.itemPre1,f.default,this.ownerView,a)}}else{for(var n in t)a=t[n].id,l.default.skinShop.own_anim[a]||l.default.skinShop.discountItem[a]||this._addItemToView(this.itemPre1,f.default,this.shopView,a);for(var n in l.default.skinShop.discountItem){var c;(c=this.shopData.json[n]).showId==this.curPageType&&this._addItemToView(this.itemPre1,f.default,this.discountView,c.id)}}},e.prototype._reloadShopViewBranch=function(t,e){if(e)for(var o in l.default.skinShop.own_platform)this._addItemToView(this.itemPre2,y.default,this.ownerView,Number(o));else{for(var o in t){var n=t[o].id;l.default.skinShop.own_platform[n]||l.default.skinShop.discountItem[n]||this._addItemToView(this.itemPre2,y.default,this.shopView,n)}for(var o in l.default.skinShop.discountItem){var i=this.shopData.json[o];i.showId==this.curPageType&&this._addItemToView(this.itemPre2,y.default,this.discountView,i.id)}}},e.prototype._reloadShopViewPic=function(t,e){if(e)for(var o in l.default.skinShop.own_bg)this._addItemToView(this.itemPre3,h.default,this.ownerView,Number(o));else{for(var o in t){var n=t[o].id;l.default.skinShop.own_bg[n]||l.default.skinShop.discountItem[n]||this._addItemToView(this.itemPre3,h.default,this.shopView,n)}for(var o in l.default.skinShop.discountItem){var i=this.shopData.json[o];i.showId==this.curPageType&&this._addItemToView(this.itemPre3,h.default,this.discountView,i.id)}}},e.prototype._addItemToView=function(t,e,o,n){var i=cc.instantiate(t);i.parent=o.content,i.getComponent(e).setItemId(n)},e.prototype._getItemDataList=function(){var t=[];for(var e in this.shopData.json){var o=this.shopData.json[e];o.showId==this.curPageType&&t.push(o)}return t},e.prototype.clickRefresh=function(){g.default.getInstance().showExcitation(function(t){g.default.getInstance().showBanner(),1==t&&l.default.getInstance().reloadShopData()},this)},e.prototype.showShop=function(){},e.prototype.buyItem=function(t){var e=t.getUserData(),o=this.shopData.json[e],n=o.price;if(l.default.userGold<n)return cc.log("\u94b1\u4e0d\u591f\uff01\uff01\uff01"),void cc.tween(this.noMoneyNode).then(cc.tween().to(.5,{opacity:255})).then(cc.delayTime(2)).then(cc.tween().to(.5,{opacity:0})).start();o.showId==a.bird?l.default.skinShop.own_anim[e]=!0:o.showId==a.platform?l.default.skinShop.own_platform[e]=!0:o.showId==a.bg&&(l.default.skinShop.own_bg[e]=!0),this.reloadPage(),u.default.getInstance().emitListen(s.CUSTOM_CHANGE_SKIN,o)},e.prototype.changeSkin=function(){l.default.getInstance().saveShopData()},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),u.default.getInstance().removeListen(s.CUSTOM_BUY_SKIN),u.default.getInstance().removeListen(s.CUSTOM_CHANGE_SKIN)},e.prototype.update=function(){var t=_.getGameTime(),e=_.getNextDayStartTime();this.reloadTimeLabel.string=_.formatTime(Math.floor((e-t)/1e3),_.TIME_FORMAT2)},r([b(cc.ToggleContainer)],e.prototype,"choosePageToggle",void 0),r([b(cc.Node)],e.prototype,"birdPage",void 0),r([b(cc.Node)],e.prototype,"branchPage",void 0),r([b(cc.Node)],e.prototype,"picPage",void 0),r([b(cc.Node)],e.prototype,"offPage",void 0),r([b(cc.Node)],e.prototype,"dailyDiscount",void 0),r([b(cc.ScrollView)],e.prototype,"shopView",void 0),r([b(cc.ScrollView)],e.prototype,"discountView",void 0),r([b(cc.ScrollView)],e.prototype,"ownerView",void 0),r([b(cc.Prefab)],e.prototype,"itemPre1",void 0),r([b(cc.Prefab)],e.prototype,"itemPre2",void 0),r([b(cc.Prefab)],e.prototype,"itemPre3",void 0),r([b(cc.Prefab)],e.prototype,"itemPre4",void 0),r([b(cc.JsonAsset)],e.prototype,"shopData",void 0),r([b(cc.Node)],e.prototype,"noMoneyNode",void 0),r([b(cc.Label)],e.prototype,"reloadTimeLabel",void 0),r([v,p("shop/shopPage")],e)}(cc.Component);o.default=C,cc._RF.pop()},{"../common/AppData":"AppData","../common/GlobalInferfance":"GlobalInferfance","../control/AdsCenter":"AdsCenter","../control/AudioCenter":"AudioCenter","../control/EventController":"EventController","../global/GlobalFunc":"GlobalFunc","./ShopItem1":"ShopItem1","./ShopItem2":"ShopItem2","./ShopItem3":"ShopItem3"}],SkinController:[function(t,e,o){"use strict";cc._RF.push(e,"4aa4a8HnFxJ6pjMcjup+xM7","SkinController");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../base/BaseInst"),c=t("../prefabs/BranchPool"),s=t("../prefabs/MarkPool"),l=t("../prefabs/AniPool"),u=cc._decorator,d=u.ccclass,p=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.getInstance=function(){return t.getInstance.call(this)},e.loadAnimation=function(t,e,o,n){var i=t+e;cc.resources.load("prefabs/"+i,function(t,e){t?cc.log("Prefab error:"+t):e instanceof cc.Prefab?o.call(n,e):cc.log("Prefab error")}.bind(this))},e.loadPoolEntity=function(t,e){l.default.clearAll();for(var o=0,n=1;n<=2;n++)for(var i=function(i){var a=i+"_"+n;cc.resources.load("prefabs/ani"+a,function(n,i){n?cc.log("Prefab error:"+n):i instanceof cc.Prefab?(o+=1,l.default.createPool(a,i,4),10==o&&(this.loadCount+=1,this.checkLoadFinish(t,e))):cc.log("Prefab error")}.bind(r))},r=this,a=1;a<=10;a++)i(a);c.default.clearAll(),cc.resources.load("prefabs/Branch",function(o,n){c.default.createPool(n,12),this.loadCount+=1,this.checkLoadFinish(t,e)}.bind(this)),s.default.clearAll(),cc.resources.load("prefabs/MarkNode",function(o,n){s.default.createPool(n,48),this.loadCount+=1,this.checkLoadFinish(t,e)}.bind(this))},e.checkLoadFinish=function(t,e){this.loadCount>=this.totalCount&&(this.loadCount=0,this.totalCount=0,t&&e&&t.call(e))},e.loadCount=0,e.totalCount=3,r([d],e)}(a.BaseInst));o.default=p,cc._RF.pop()},{"../base/BaseInst":"BaseInst","../prefabs/AniPool":"AniPool","../prefabs/BranchPool":"BranchPool","../prefabs/MarkPool":"MarkPool"}]},{},["BranchEntityControl","GameLaunch","GameMain","RunCore","BaseInst","BlockType","ChosenOneNodeType","GuideType","QuestType","AppData","GlobalInferfance","AdsCenter","AudioCenter","DatalController","EventController","MessageController","SkinController","GlobalFunc","OtherNoAdTip","PointReport","Action","AniPool","Branch","BranchPool","MarkPool","OverContent","OverGame","Set","ShopItem1","ShopItem2","ShopItem3","ShopPage","CreateLevColor","MathTools","ModifyNode","RegGlobalNode"]);